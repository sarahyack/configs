"use strict";var vc=Object.defineProperty;var qr=t=>{throw TypeError(t)};var pc=(t,e,n)=>e in t?vc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ge=(t,e,n)=>pc(t,typeof e!="symbol"?e+"":e,n),Ro=(t,e,n)=>e.has(t)||qr("Cannot "+n);var re=(t,e,n)=>(Ro(t,e,"read from private field"),n?n.call(t):e.get(t)),st=(t,e,n)=>e.has(t)?qr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Jt=(t,e,n,i)=>(Ro(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Wn=(t,e,n)=>(Ro(t,e,"access private method"),n);const St=require("obsidian"),Pa=!1;var Ks=Array.isArray,mc=Array.prototype.indexOf,gr=Array.from,Xs=Object.defineProperty,ti=Object.getOwnPropertyDescriptor,Ta=Object.getOwnPropertyDescriptors,hc=Object.prototype,gc=Array.prototype,yr=Object.getPrototypeOf,Hr=Object.isExtensible;function Qi(t){return typeof t=="function"}const An=()=>{};function yc(t){return t()}function Zo(t){for(var e=0;e<t.length;e++)t[e]()}function _c(){var t,e,n=new Promise((i,o)=>{t=i,e=o});return{promise:n,resolve:t,reject:e}}function Si(t,e,n=!1){return t===void 0?n?e():e:t}function bc(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const i of t)if(n.push(i),n.length===e)break;return n}const fn=2,_r=4,bo=8,Fs=16,Rn=32,hi=64,za=128,gn=256,Zs=512,Wt=1024,yn=2048,ii=4096,_n=8192,gi=16384,br=32768,Is=65536,Br=1<<17,kc=1<<18,kr=1<<19,wr=1<<20,Jo=1<<21,Sr=1<<22,ui=1<<23,Dn=Symbol("$state"),Oa=Symbol("legacy props"),wc=Symbol(""),Mr=new class extends Error{constructor(){super(...arguments);ge(this,"name","StaleReactionError");ge(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Sc(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function ko(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Mc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Cc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ac(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Dc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ec(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Lc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Pc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Tc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const wo=1,So=2,Ka=4,zc=8,Oc=16,Kc=1,Fc=2,Fa=4,Ic=8,$c=16,Gc=1,Nc=2,Tt=Symbol(),Rc="http://www.w3.org/1999/xhtml",Vc="http://www.w3.org/2000/svg",qc="@attach";function Hc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let Bc=!1;function Ia(t){return t===this.v}function Cr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Wc(t,e){return t!==e}function $a(t){return!Cr(t,this.v)}let Bi=!1,Uc=!1;function jc(){Bi=!0}let pt=null;function Js(t){pt=t}function ln(t){return Ga().get(t)}function Ji(t,e){return Ga().set(t,e),e}function sn(t,e=!1,n){pt={p:pt,c:null,e:null,s:t,x:null,l:Bi&&!e?{s:null,u:null,$:[]}:null}}function on(t){var e=pt,n=e.e;if(n!==null){e.e=null;for(var i of n)Ja(i)}return pt=e.p,{}}function yi(){return!Bi||pt!==null&&pt.l===null}function Ga(t){return pt===null&&ko(),pt.c??(pt.c=new Map(Qc(pt)||void 0))}function Qc(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}const Yc=new WeakMap;function Xc(t){var e=Ve;if(e===null)return Ue.f|=ui,t;if((e.f&br)===0){if((e.f&za)===0)throw!e.parent&&t instanceof Error&&Na(t),t;e.b.error(t)}else xr(t,e)}function xr(t,e){for(;e!==null;){if((e.f&za)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Na(t),t}function Na(t){const e=Yc.get(t);e&&(Xs(t,"message",{value:e.message}),Xs(t,"stack",{value:e.stack}))}let eo=[];function Zc(){var t=eo;eo=[],Zo(t)}function Mo(t){eo.length===0&&queueMicrotask(Zc),eo.push(t)}function Jc(){for(var t=Ve.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&Sc(),t}function $s(t){var e=fn|yn,n=Ue!==null&&(Ue.f&fn)!==0?Ue:null;return Ve===null||n!==null&&(n.f&gn)!==0?e|=gn:Ve.f|=kr,{ctx:pt,deps:null,effects:null,equals:Ia,f:e,fn:t,reactions:null,rv:0,v:Tt,wv:0,parent:n??Ve,ac:null}}function eu(t,e){let n=Ve;n===null&&Mc();var i=n.b,o=void 0,r=Ni(Tt),a=null,l=!Ue;return uu(()=>{try{var c=t()}catch(g){c=Promise.reject(g)}var u=()=>c;o=(a==null?void 0:a.then(u,u))??Promise.resolve(c),a=o;var m=vt,d=i.pending;l&&(i.update_pending_count(1),d||m.increment());const v=(g,p=void 0)=>{a=null,d||m.activate(),p?p!==Mr&&(r.f|=ui,cs(r,p)):((r.f&ui)!==0&&(r.f^=ui),cs(r,g)),l&&(i.update_pending_count(-1),d||m.decrement()),Ha()};if(o.then(v,g=>v(null,g||"unknown")),m)return()=>{queueMicrotask(()=>m.neuter())}}),new Promise(c=>{function u(m){function d(){m===o?c(r):u(o)}m.then(d,d)}u(o)})}function Ce(t){const e=$s(t);return rl(e),e}function Ar(t){const e=$s(t);return e.equals=$a,e}function Ra(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)nn(e[n])}}function tu(t){for(var e=t.parent;e!==null;){if((e.f&fn)===0)return e;e=e.parent}return null}function Dr(t){var e,n=Ve;zn(tu(t));try{Ra(t),e=ul(t)}finally{zn(n)}return e}function Va(t){var e=Dr(t);if(t.equals(e)||(t.v=e,t.wv=ll()),!ki)if(Xn!==null)Xn.set(t,t.v);else{var n=(Zn||(t.f&gn)!==0)&&t.deps!==null?ii:Wt;tn(t,n)}}function qa(t,e,n){const i=yi()?$s:Ar;if(e.length===0){n(t.map(i));return}var o=vt,r=Ve,a=nu(),l=Jc();Promise.all(e.map(c=>eu(c))).then(c=>{o==null||o.activate(),a();try{n([...t.map(i),...c])}catch(u){(r.f&gi)===0&&xr(u,r)}o==null||o.deactivate(),Ha()}).catch(c=>{l.error(c)})}function nu(){var t=Ve,e=Ue,n=pt;return function(){zn(t),Tn(e),Js(n)}}function Ha(){zn(null),Tn(null),Js(null)}const Yi=new Set;let vt=null,js=null,Xn=null,Wr=new Set,to=[];function Ba(){const t=to.shift();to.length>0&&queueMicrotask(Ba),t()}let as=[],Er=null,er=!1;var Ki,Fi,jn,ys,_s,li,Ii,ci,Qn,$i,bs,ks,bn,Wa,Qs,tr;const go=class go{constructor(){st(this,bn);ge(this,"current",new Map);st(this,Ki,new Map);st(this,Fi,new Set);st(this,jn,0);st(this,ys,null);st(this,_s,!1);st(this,li,[]);st(this,Ii,[]);st(this,ci,[]);st(this,Qn,[]);st(this,$i,[]);st(this,bs,[]);st(this,ks,[]);ge(this,"skipped_effects",new Set)}process(e){var r;as=[],js=null;var n=null;if(Yi.size>1){n=new Map,Xn=new Map;for(const[a,l]of this.current)n.set(a,{v:a.v,wv:a.wv}),a.v=l;for(const a of Yi)if(a!==this)for(const[l,c]of re(a,Ki))n.has(l)||(n.set(l,{v:l.v,wv:l.wv}),l.v=c)}for(const a of e)Wn(this,bn,Wa).call(this,a);if(re(this,li).length===0&&re(this,jn)===0){Wn(this,bn,tr).call(this);var i=re(this,ci),o=re(this,Qn);Jt(this,ci,[]),Jt(this,Qn,[]),Jt(this,$i,[]),js=vt,vt=null,Ur(i),Ur(o),vt===null?vt=this:Yi.delete(this),(r=re(this,ys))==null||r.resolve()}else Wn(this,bn,Qs).call(this,re(this,ci)),Wn(this,bn,Qs).call(this,re(this,Qn)),Wn(this,bn,Qs).call(this,re(this,$i));if(n){for(const[a,{v:l,wv:c}]of n)a.wv<=c&&(a.v=l);Xn=null}for(const a of re(this,li))os(a);for(const a of re(this,Ii))os(a);Jt(this,li,[]),Jt(this,Ii,[])}capture(e,n){re(this,Ki).has(e)||re(this,Ki).set(e,n),this.current.set(e,e.v)}activate(){vt=this}deactivate(){vt=null,js=null;for(const e of Wr)if(Wr.delete(e),e(),vt!==null)break}neuter(){Jt(this,_s,!0)}flush(){as.length>0?iu():Wn(this,bn,tr).call(this),vt===this&&(re(this,jn)===0&&Yi.delete(this),this.deactivate())}increment(){Jt(this,jn,re(this,jn)+1)}decrement(){if(Jt(this,jn,re(this,jn)-1),re(this,jn)===0){for(const e of re(this,bs))tn(e,yn),vi(e);for(const e of re(this,ks))tn(e,ii),vi(e);Jt(this,ci,[]),Jt(this,Qn,[]),this.flush()}else this.deactivate()}add_callback(e){re(this,Fi).add(e)}settled(){return(re(this,ys)??Jt(this,ys,_c())).promise}static ensure(){if(vt===null){const e=vt=new go;Yi.add(vt),go.enqueue(()=>{vt===e&&e.flush()})}return vt}static enqueue(e){to.length===0&&queueMicrotask(Ba),to.unshift(e)}};Ki=new WeakMap,Fi=new WeakMap,jn=new WeakMap,ys=new WeakMap,_s=new WeakMap,li=new WeakMap,Ii=new WeakMap,ci=new WeakMap,Qn=new WeakMap,$i=new WeakMap,bs=new WeakMap,ks=new WeakMap,bn=new WeakSet,Wa=function(e){var m;e.f^=Wt;for(var n=e.first;n!==null;){var i=n.f,o=(i&(Rn|hi))!==0,r=o&&(i&Wt)!==0,a=r||(i&_n)!==0||this.skipped_effects.has(n);if(!a&&n.fn!==null){if(o)n.f^=Wt;else if((i&Wt)===0)if((i&_r)!==0)re(this,Qn).push(n);else if((i&Sr)!==0){var l=(m=n.b)!=null&&m.pending?re(this,Ii):re(this,li);l.push(n)}else Ao(n)&&((n.f&Fs)!==0&&re(this,$i).push(n),os(n));var c=n.first;if(c!==null){n=c;continue}}var u=n.parent;for(n=n.next;n===null&&u!==null;)n=u.next,u=u.parent}},Qs=function(e){for(const n of e)((n.f&yn)!==0?re(this,bs):re(this,ks)).push(n),tn(n,Wt);e.length=0},tr=function(){if(!re(this,_s))for(const e of re(this,Fi))e();re(this,Fi).clear()};let ls=go;function iu(){var t=Li;er=!0;try{var e=0;for(Yr(!0);as.length>0;){var n=ls.ensure();if(e++>1e3){var i,o;su()}n.process(as),di.clear()}}finally{er=!1,Yr(t),Er=null}}function su(){try{Dc()}catch(t){xr(t,Er)}}function Ur(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var i=t[n++];if((i.f&(gi|_n))===0&&Ao(i)){var o=vt?vt.current.size:0;if(os(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?il(i):i.fn=null),vt!==null&&vt.current.size>o&&(i.f&wr)!==0)break}}for(;n<e;)vi(t[n++])}}function vi(t){for(var e=Er=t;e.parent!==null;){e=e.parent;var n=e.f;if(er&&e===Ve&&(n&Fs)!==0)return;if((n&(hi|Rn))!==0){if((n&Wt)===0)return;e.f^=Wt}}as.push(e)}const di=new Map;function Ni(t,e){var n={f:0,v:t,reactions:null,equals:Ia,rv:0,wv:0};return n}function G(t,e){const n=Ni(t);return rl(n),n}function Ua(t,e=!1,n=!0){var o;const i=Ni(t);return e||(i.equals=$a),Bi&&n&&pt!==null&&pt.l!==null&&((o=pt.l).s??(o.s=[])).push(i),i}function y(t,e,n=!1){Ue!==null&&(!xn||(Ue.f&Br)!==0)&&yi()&&(Ue.f&(fn|Fs|Sr|Br))!==0&&!(Xt!=null&&Xt.includes(t))&&Tc();let i=n?Ye(e):e;return cs(t,i)}function cs(t,e){if(!t.equals(e)){var n=t.v;ki?di.set(t,e):di.set(t,n),t.v=e;var i=ls.ensure();i.capture(t,n),(t.f&fn)!==0&&((t.f&yn)!==0&&Dr(t),tn(t,(t.f&gn)===0?Wt:ii)),t.wv=ll(),ja(t,yn),yi()&&Ve!==null&&(Ve.f&Wt)!==0&&(Ve.f&(Rn|hi))===0&&(pn===null?vu([t]):pn.push(t))}return e}function nr(t,e=1){var n=s(t),i=e===1?n++:n--;return y(t,n),i}function Vo(t){y(t,t.v+1)}function ja(t,e){var n=t.reactions;if(n!==null)for(var i=yi(),o=n.length,r=0;r<o;r++){var a=n[r],l=a.f;if(!(!i&&a===Ve)){var c=(l&yn)===0;c&&tn(a,e),(l&fn)!==0?ja(a,ii):c&&vi(a)}}}function Ye(t){if(typeof t!="object"||t===null||Dn in t)return t;const e=yr(t);if(e!==hc&&e!==gc)return t;var n=new Map,i=Ks(t),o=G(0),r=fi,a=l=>{if(fi===r)return l();var c=Ue,u=fi;Tn(null),Zr(r);var m=l();return Tn(c),Zr(u),m};return i&&n.set("length",G(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Lc();var m=n.get(c);return m===void 0?m=a(()=>{var d=G(u.value);return n.set(c,d),d}):y(m,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const m=a(()=>G(Tt));n.set(c,m),Vo(o)}}else y(u,Tt),Vo(o);return!0},get(l,c,u){var g;if(c===Dn)return t;var m=n.get(c),d=c in l;if(m===void 0&&(!d||(g=ti(l,c))!=null&&g.writable)&&(m=a(()=>{var p=Ye(d?l[c]:Tt),_=G(p);return _}),n.set(c,m)),m!==void 0){var v=s(m);return v===Tt?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var m=n.get(c);m&&(u.value=s(m))}else if(u===void 0){var d=n.get(c),v=d==null?void 0:d.v;if(d!==void 0&&v!==Tt)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){var v;if(c===Dn)return!0;var u=n.get(c),m=u!==void 0&&u.v!==Tt||Reflect.has(l,c);if(u!==void 0||Ve!==null&&(!m||(v=ti(l,c))!=null&&v.writable)){u===void 0&&(u=a(()=>{var g=m?Ye(l[c]):Tt,p=G(g);return p}),n.set(c,u));var d=s(u);if(d===Tt)return!1}return m},set(l,c,u,m){var S;var d=n.get(c),v=c in l;if(i&&c==="length")for(var g=u;g<d.v;g+=1){var p=n.get(g+"");p!==void 0?y(p,Tt):g in l&&(p=a(()=>G(Tt)),n.set(g+"",p))}if(d===void 0)(!v||(S=ti(l,c))!=null&&S.writable)&&(d=a(()=>G(void 0)),y(d,Ye(u)),n.set(c,d));else{v=d.v!==Tt;var _=a(()=>Ye(u));y(d,_)}var b=Reflect.getOwnPropertyDescriptor(l,c);if(b!=null&&b.set&&b.set.call(m,u),!v){if(i&&typeof c=="string"){var C=n.get("length"),w=Number(c);Number.isInteger(w)&&w>=C.v&&y(C,w+1)}Vo(o)}return!0},ownKeys(l){s(o);var c=Reflect.ownKeys(l).filter(d=>{var v=n.get(d);return v===void 0||v.v!==Tt});for(var[u,m]of n)m.v!==Tt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Pc()}})}function jr(t){try{if(t!==null&&typeof t=="object"&&Dn in t)return t[Dn]}catch{}return t}function ou(t,e){return Object.is(jr(t),jr(e))}var Qr,Qa,Ya,Xa;function ru(){if(Qr===void 0){Qr=window,Qa=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Ya=ti(e,"firstChild").get,Xa=ti(e,"nextSibling").get,Hr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Hr(n)&&(n.__t=void 0)}}function _i(t=""){return document.createTextNode(t)}function Ri(t){return Ya.call(t)}function Co(t){return Xa.call(t)}function h(t,e){return Ri(t)}function De(t,e){{var n=Ri(t);return n instanceof Comment&&n.data===""?Co(n):n}}function k(t,e=1,n=!1){let i=t;for(;e--;)i=Co(i);return i}function au(t){t.textContent=""}function Lr(){return!1}function Za(t){Ve===null&&Ue===null&&Ac(),Ue!==null&&(Ue.f&gn)!==0&&Ve===null&&xc(),ki&&Cc()}function lu(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Kn(t,e,n,i=!0){var o=Ve;o!==null&&(o.f&_n)!==0&&(t|=_n);var r={ctx:pt,deps:null,nodes_start:null,nodes_end:null,f:t|yn,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{os(r),r.f|=br}catch(c){throw nn(r),c}else e!==null&&vi(r);var a=n&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&kr)===0;if(!a&&i&&(o!==null&&lu(r,o),Ue!==null&&(Ue.f&fn)!==0&&(t&hi)===0)){var l=Ue;(l.effects??(l.effects=[])).push(r)}return r}function Pr(t){const e=Kn(bo,null,!1);return tn(e,Wt),e.teardown=t,e}function Dt(t){Za();var e=Ve.f,n=!Ue&&(e&Rn)!==0&&(e&br)===0;if(n){var i=pt;(i.e??(i.e=[])).push(t)}else return Ja(t)}function Ja(t){return Kn(_r|wr,t,!1)}function es(t){return Za(),Kn(bo|wr,t,!0)}function cu(t){ls.ensure();const e=Kn(hi,t,!0);return(n={})=>new Promise(i=>{n.outro?Gs(e,()=>{nn(e),i(void 0)}):(nn(e),i(void 0))})}function Wi(t){return Kn(_r,t,!1)}function uu(t){return Kn(Sr|kr,t,!0)}function el(t,e=0){return Kn(bo|e,t,!0)}function B(t,e=[],n=[]){qa(e,n,i=>{Kn(bo,()=>t(...i.map(s)),!0)})}function bi(t,e=0){var n=Kn(Fs|e,t,!0);return n}function Pn(t,e=!0){return Kn(Rn,t,!0,e)}function tl(t){var e=t.teardown;if(e!==null){const n=ki,i=Ue;Xr(!0),Tn(null);try{e.call(null)}finally{Xr(n),Tn(i)}}}function nl(t,e=!1){var o;var n=t.first;for(t.first=t.last=null;n!==null;){(o=n.ac)==null||o.abort(Mr);var i=n.next;(n.f&hi)!==0?n.parent=null:nn(n,e),n=i}}function du(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Rn)===0&&nn(e),e=n}}function nn(t,e=!0){var n=!1;(e||(t.f&kc)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(fu(t.nodes_start,t.nodes_end),n=!0),nl(t,e&&!n),no(t,0),tn(t,gi);var i=t.transitions;if(i!==null)for(const r of i)r.stop();tl(t);var o=t.parent;o!==null&&o.first!==null&&il(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function fu(t,e){for(;t!==null;){var n=t===e?null:Co(t);t.remove(),t=n}}function il(t){var e=t.parent,n=t.prev,i=t.next;n!==null&&(n.next=i),i!==null&&(i.prev=n),e!==null&&(e.first===t&&(e.first=i),e.last===t&&(e.last=n))}function Gs(t,e){var n=[];Tr(t,n,!0),sl(n,()=>{nn(t),e&&e()})}function sl(t,e){var n=t.length;if(n>0){var i=()=>--n||e();for(var o of t)o.out(i)}else e()}function Tr(t,e,n){if((t.f&_n)===0){if(t.f^=_n,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var i=t.first;i!==null;){var o=i.next,r=(i.f&Is)!==0||(i.f&Rn)!==0;Tr(i,e,r?n:!1),i=o}}}function xo(t){ol(t,!0)}function ol(t,e){if((t.f&_n)!==0){t.f^=_n,(t.f&Wt)===0&&(tn(t,yn),vi(t));for(var n=t.first;n!==null;){var i=n.next,o=(n.f&Is)!==0||(n.f&Rn)!==0;ol(n,o?e:!1),n=i}if(t.transitions!==null)for(const r of t.transitions)(r.is_global||e)&&r.in()}}let Li=!1;function Yr(t){Li=t}let ki=!1;function Xr(t){ki=t}let Ue=null,xn=!1;function Tn(t){Ue=t}let Ve=null;function zn(t){Ve=t}let Xt=null;function rl(t){Ue!==null&&(Xt===null?Xt=[t]:Xt.push(t))}let Qt=null,rn=0,pn=null;function vu(t){pn=t}let al=1,us=0,fi=us;function Zr(t){fi=t}let Zn=!1;function ll(){return++al}function Ao(t){var d;var e=t.f;if((e&yn)!==0)return!0;if((e&ii)!==0){var n=t.deps,i=(e&gn)!==0;if(n!==null){var o,r,a=(e&Zs)!==0,l=i&&Ve!==null&&!Zn,c=n.length;if((a||l)&&(Ve===null||(Ve.f&gi)===0)){var u=t,m=u.parent;for(o=0;o<c;o++)r=n[o],(a||!((d=r==null?void 0:r.reactions)!=null&&d.includes(u)))&&(r.reactions??(r.reactions=[])).push(u);a&&(u.f^=Zs),l&&m!==null&&(m.f&gn)===0&&(u.f^=gn)}for(o=0;o<c;o++)if(r=n[o],Ao(r)&&Va(r),r.wv>t.wv)return!0}(!i||Ve!==null&&!Zn)&&tn(t,Wt)}return!1}function cl(t,e,n=!0){var i=t.reactions;if(i!==null&&!(Xt!=null&&Xt.includes(t)))for(var o=0;o<i.length;o++){var r=i[o];(r.f&fn)!==0?cl(r,e,!1):e===r&&(n?tn(r,yn):(r.f&Wt)!==0&&tn(r,ii),vi(r))}}function ul(t){var p;var e=Qt,n=rn,i=pn,o=Ue,r=Zn,a=Xt,l=pt,c=xn,u=fi,m=t.f;Qt=null,rn=0,pn=null,Zn=(m&gn)!==0&&(xn||!Li||Ue===null),Ue=(m&(Rn|hi))===0?t:null,Xt=null,Js(t.ctx),xn=!1,fi=++us,t.ac!==null&&(t.ac.abort(Mr),t.ac=null);try{t.f|=Jo;var d=(0,t.fn)(),v=t.deps;if(Qt!==null){var g;if(no(t,rn),v!==null&&rn>0)for(v.length=rn+Qt.length,g=0;g<Qt.length;g++)v[rn+g]=Qt[g];else t.deps=v=Qt;if(!Zn||(m&fn)!==0&&t.reactions!==null)for(g=rn;g<v.length;g++)((p=v[g]).reactions??(p.reactions=[])).push(t)}else v!==null&&rn<v.length&&(no(t,rn),v.length=rn);if(yi()&&pn!==null&&!xn&&v!==null&&(t.f&(fn|ii|yn))===0)for(g=0;g<pn.length;g++)cl(pn[g],t);return o!==null&&o!==t&&(us++,pn!==null&&(i===null?i=pn:i.push(...pn))),(t.f&ui)!==0&&(t.f^=ui),d}catch(_){return Xc(_)}finally{t.f^=Jo,Qt=e,rn=n,pn=i,Ue=o,Zn=r,Xt=a,Js(l),xn=c,fi=u}}function pu(t,e){let n=e.reactions;if(n!==null){var i=mc.call(n,t);if(i!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[i]=n[o],n.pop())}}n===null&&(e.f&fn)!==0&&(Qt===null||!Qt.includes(e))&&(tn(e,ii),(e.f&(gn|Zs))===0&&(e.f^=Zs),Ra(e),no(e,0))}function no(t,e){var n=t.deps;if(n!==null)for(var i=e;i<n.length;i++)pu(t,n[i])}function os(t){var e=t.f;if((e&gi)===0){tn(t,Wt);var n=Ve,i=Li;Ve=t,Li=!0;try{(e&Fs)!==0?du(t):nl(t),tl(t);var o=ul(t);t.teardown=typeof o=="function"?o:null,t.wv=al;var r;Pa&&Uc&&(t.f&yn)!==0&&t.deps}finally{Li=i,Ve=n}}}function s(t){var e=t.f,n=(e&fn)!==0;if(Ue!==null&&!xn){var i=Ve!==null&&(Ve.f&gi)!==0;if(!i&&!(Xt!=null&&Xt.includes(t))){var o=Ue.deps;if((Ue.f&Jo)!==0)t.rv<us&&(t.rv=us,Qt===null&&o!==null&&o[rn]===t?rn++:Qt===null?Qt=[t]:(!Zn||!Qt.includes(t))&&Qt.push(t));else{(Ue.deps??(Ue.deps=[])).push(t);var r=t.reactions;r===null?t.reactions=[Ue]:r.includes(Ue)||r.push(Ue)}}}else if(n&&t.deps===null&&t.effects===null){var a=t,l=a.parent;l!==null&&(l.f&gn)===0&&(a.f^=gn)}if(ki){if(di.has(t))return di.get(t);if(n){a=t;var c=a.v;return((a.f&Wt)===0&&a.reactions!==null||dl(a))&&(c=Dr(a)),di.set(a,c),c}}else if(n){if(a=t,Xn!=null&&Xn.has(a))return Xn.get(a);Ao(a)&&Va(a)}if((t.f&ui)!==0)throw t.v;return t.v}function dl(t){if(t.v===Tt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(di.has(e)||(e.f&fn)!==0&&dl(e))return!0;return!1}function kn(t){var e=xn;try{return xn=!0,t()}finally{xn=e}}const mu=-7169;function tn(t,e){t.f=t.f&mu|e}function Ai(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Dn in t)ir(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Dn in n&&ir(n)}}}function ir(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let i in t)try{ir(t[i],e)}catch{}const n=yr(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const i=Ta(n);for(let o in i){const r=i[o].get;if(r)try{r.call(t)}catch{}}}}}function hu(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const gu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function yu(t){return gu.includes(t)}const _u={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function bu(t){return t=t.toLowerCase(),_u[t]??t}const ku=["touchstart","touchmove"];function wu(t){return ku.includes(t)}function Su(t,e){if(e){const n=document.body;t.autofocus=!0,Mo(()=>{document.activeElement===n&&t.focus()})}}let Jr=!1;function Mu(){Jr||(Jr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function fl(t){var e=Ue,n=Ve;Tn(null),zn(null);try{return t()}finally{Tn(e),zn(n)}}function vl(t,e,n,i=n){t.addEventListener(e,()=>fl(n));const o=t.__on_r;o?t.__on_r=()=>{o(),i(!0)}:t.__on_r=()=>i(!0),Mu()}const pl=new Set,sr=new Set;function ml(t,e,n,i={}){function o(r){if(i.capture||ts.call(e,r),!r.cancelBubble)return fl(()=>n==null?void 0:n.call(this,r))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Mo(()=>{e.addEventListener(t,o,i)}):e.addEventListener(t,o,i),o}function $e(t,e,n,i,o){var r={capture:i,passive:o},a=ml(t,e,n,r);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Pr(()=>{e.removeEventListener(t,a,r)})}function Mn(t){for(var e=0;e<t.length;e++)pl.add(t[e]);for(var n of sr)n(t)}let ea=null;function ts(t){var w;var e=this,n=e.ownerDocument,i=t.type,o=((w=t.composedPath)==null?void 0:w.call(t))||[],r=o[0]||t.target;ea=t;var a=0,l=ea===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(a=c)}if(r=o[a]||t.target,r!==e){Xs(t,"currentTarget",{configurable:!0,get(){return r||n}});var m=Ue,d=Ve;Tn(null),zn(null);try{for(var v,g=[];r!==null;){var p=r.assignedSlot||r.parentNode||r.host||null;try{var _=r["__"+i];if(_!=null&&(!r.disabled||t.target===r))if(Ks(_)){var[b,...C]=_;b.apply(r,[t,...C])}else _.call(r,t)}catch(S){v?g.push(S):v=S}if(t.cancelBubble||p===e||p===null)break;r=p}if(v){for(let S of g)queueMicrotask(()=>{throw S});throw v}}finally{t.__root=e,delete t.currentTarget,Tn(m),zn(d)}}}function hl(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ds(t,e){var n=Ve;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function T(t,e){var n=(e&Gc)!==0,i=(e&Nc)!==0,o,r=!t.startsWith("<!>");return()=>{o===void 0&&(o=hl(r?t:"<!>"+t),n||(o=Ri(o)));var a=i||Qa?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=Ri(a),c=a.lastChild;ds(l,c)}else ds(a,a);return a}}function Cu(t,e,n="svg"){var i=!t.startsWith("<!>"),o=`<${n}>${i?t:"<!>"+t}</${n}>`,r;return()=>{if(!r){var a=hl(o),l=Ri(a);r=Ri(l)}var c=r.cloneNode(!0);return ds(c,c),c}}function xu(t,e){return Cu(t,e,"svg")}function et(){var t=document.createDocumentFragment(),e=document.createComment(""),n=_i();return t.append(e,n),ds(e,n),t}function M(t,e){t!==null&&t.before(e)}function ae(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function gl(t,e){return Au(t,e)}const Mi=new Map;function Au(t,{target:e,anchor:n,props:i={},events:o,context:r,intro:a=!0}){ru();var l=new Set,c=d=>{for(var v=0;v<d.length;v++){var g=d[v];if(!l.has(g)){l.add(g);var p=wu(g);e.addEventListener(g,ts,{passive:p});var _=Mi.get(g);_===void 0?(document.addEventListener(g,ts,{passive:p}),Mi.set(g,1)):Mi.set(g,_+1)}}};c(gr(pl)),sr.add(c);var u=void 0,m=cu(()=>{var d=n??e.appendChild(_i());return Pn(()=>{if(r){sn({});var v=pt;v.c=r}o&&(i.$$events=o),u=t(d,i)||{},r&&on()}),()=>{var p;for(var v of l){e.removeEventListener(v,ts);var g=Mi.get(v);--g===0?(document.removeEventListener(v,ts),Mi.delete(v)):Mi.set(v,g)}sr.delete(c),d!==n&&((p=d.parentNode)==null||p.removeChild(d))}});return or.set(u,m),u}let or=new WeakMap;function yl(t,e){const n=or.get(t);return n?(or.delete(t),n(e)):Promise.resolve()}function W(t,e,n=!1){var i=t,o=null,r=null,a=Tt,l=n?Is:0,c=!1;const u=(g,p=!0)=>{c=!0,v(p,g)};var m=null;function d(){m!==null&&(m.lastChild.remove(),i.before(m),m=null);var g=a?o:r,p=a?r:o;g&&xo(g),p&&Gs(p,()=>{a?r=null:o=null})}const v=(g,p)=>{if(a!==(a=g)){var _=Lr(),b=i;if(_&&(m=document.createDocumentFragment(),m.append(b=_i())),a?o??(o=p&&Pn(()=>p(b))):r??(r=p&&Pn(()=>p(b))),_){var C=vt,w=a?o:r,S=a?r:o;w&&C.skipped_effects.delete(w),S&&C.skipped_effects.add(S),C.add_callback(d)}else d()}};bi(()=>{c=!1,e(u),c||v(null,null)},l)}function _l(t,e,n){var i=t,o=Tt,r,a,l=null,c=yi()?Wc:Cr;function u(){r&&Gs(r),l!==null&&(l.lastChild.remove(),i.before(l),l=null),r=a}bi(()=>{if(c(o,o=e())){var m=i,d=Lr();d&&(l=document.createDocumentFragment(),l.append(m=_i())),a=Pn(()=>n(m)),d?vt.add_callback(u):u()}})}function Nt(t,e){return e}function Du(t,e,n){for(var i=t.items,o=[],r=e.length,a=0;a<r;a++)Tr(e[a].e,o,!0);var l=r>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;au(c),c.append(n),i.clear(),Cn(t,e[0].prev,e[r-1].next)}sl(o,()=>{for(var u=0;u<r;u++){var m=e[u];l||(i.delete(m.k),Cn(t,m.prev,m.next)),nn(m.e,!l)}})}function at(t,e,n,i,o,r=null){var a=t,l={flags:e,items:new Map,first:null},c=(e&Ka)!==0;if(c){var u=t;a=u.appendChild(_i())}var m=null,d=!1,v=new Map,g=Ar(()=>{var C=n();return Ks(C)?C:C==null?[]:gr(C)}),p,_;function b(){Eu(_,p,l,v,a,o,e,i,n),r!==null&&(p.length===0?m?xo(m):m=Pn(()=>r(a)):m!==null&&Gs(m,()=>{m=null}))}bi(()=>{_??(_=Ve),p=s(g);var C=p.length;if(!(d&&C===0)){d=C===0;var w,S,P,L;if(Lr()){var x=new Set,A=vt;for(S=0;S<C;S+=1){P=p[S],L=i(P,S);var R=l.items.get(L)??v.get(L);R?(e&(wo|So))!==0&&bl(R,P,S,e):(w=kl(null,l,null,null,P,L,S,o,e,n,!0),v.set(L,w)),x.add(L)}for(const[Z,V]of l.items)x.has(Z)||A.skipped_effects.add(V.e);A.add_callback(b)}else b();s(g)}})}function Eu(t,e,n,i,o,r,a,l,c){var ye,ve,_e,ze;var u=(a&zc)!==0,m=(a&(wo|So))!==0,d=e.length,v=n.items,g=n.first,p=g,_,b=null,C,w=[],S=[],P,L,x,A;if(u)for(A=0;A<d;A+=1)P=e[A],L=l(P,A),x=v.get(L),x!==void 0&&((ye=x.a)==null||ye.measure(),(C??(C=new Set)).add(x));for(A=0;A<d;A+=1){if(P=e[A],L=l(P,A),x=v.get(L),x===void 0){var R=i.get(L);if(R!==void 0){i.delete(L),v.set(L,R);var Z=b?b.next:p;Cn(n,b,R),Cn(n,R,Z),qo(R,Z,o),b=R}else{var V=p?p.e.nodes_start:o;b=kl(V,n,b,b===null?n.first:b.next,P,L,A,r,a,c)}v.set(L,b),w=[],S=[],p=b.next;continue}if(m&&bl(x,P,A,a),(x.e.f&_n)!==0&&(xo(x.e),u&&((ve=x.a)==null||ve.unfix(),(C??(C=new Set)).delete(x))),x!==p){if(_!==void 0&&_.has(x)){if(w.length<S.length){var oe=S[0],N;b=oe.prev;var I=w[0],j=w[w.length-1];for(N=0;N<w.length;N+=1)qo(w[N],oe,o);for(N=0;N<S.length;N+=1)_.delete(S[N]);Cn(n,I.prev,j.next),Cn(n,b,I),Cn(n,j,oe),p=oe,b=j,A-=1,w=[],S=[]}else _.delete(x),qo(x,p,o),Cn(n,x.prev,x.next),Cn(n,x,b===null?n.first:b.next),Cn(n,b,x),b=x;continue}for(w=[],S=[];p!==null&&p.k!==L;)(p.e.f&_n)===0&&(_??(_=new Set)).add(p),S.push(p),p=p.next;if(p===null)continue;x=p}w.push(x),b=x,p=x.next}if(p!==null||_!==void 0){for(var K=_===void 0?[]:gr(_);p!==null;)(p.e.f&_n)===0&&K.push(p),p=p.next;var ne=K.length;if(ne>0){var D=(a&Ka)!==0&&d===0?o:null;if(u){for(A=0;A<ne;A+=1)(_e=K[A].a)==null||_e.measure();for(A=0;A<ne;A+=1)(ze=K[A].a)==null||ze.fix()}Du(n,K,D)}}u&&Mo(()=>{var Ke;if(C!==void 0)for(x of C)(Ke=x.a)==null||Ke.apply()}),t.first=n.first&&n.first.e,t.last=b&&b.e;for(var X of i.values())nn(X.e);i.clear()}function bl(t,e,n,i){(i&wo)!==0&&cs(t.v,e),(i&So)!==0?cs(t.i,n):t.i=n}function kl(t,e,n,i,o,r,a,l,c,u,m){var d=(c&wo)!==0,v=(c&Oc)===0,g=d?v?Ua(o,!1,!1):Ni(o):o,p=(c&So)===0?a:Ni(a),_={i:p,v:g,k:r,a:null,e:null,prev:n,next:i};try{if(t===null){var b=document.createDocumentFragment();b.append(t=_i())}return _.e=Pn(()=>l(t,g,p,u),Bc),_.e.prev=n&&n.e,_.e.next=i&&i.e,n===null?m||(e.first=_):(n.next=_,n.e.next=_.e),i!==null&&(i.prev=_,i.e.prev=_.e),_}finally{}}function qo(t,e,n){for(var i=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,r=t.e.nodes_start;r!==null&&r!==i;){var a=Co(r);o.before(r),r=a}}function Cn(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Ft(t,e,n,i,o){var l;var r=(l=e.$$slots)==null?void 0:l[n],a=!1;r===!0&&(r=e.children,a=!0),r===void 0||r(t,a?()=>i:i)}function rr(t,e,...n){var i=t,o=An,r;bi(()=>{o!==(o=e())&&(r&&(nn(r),r=null),r=Pn(()=>o(i,...n)))},Is)}function Lu(t,e,n,i,o,r){var a,l,c=null,u=t,m;bi(()=>{const d=e()||null;var v=Vc;d!==a&&(m&&(d===null?Gs(m,()=>{m=null,l=null}):d===l?xo(m):nn(m)),d&&d!==l&&(m=Pn(()=>{if(c=document.createElementNS(v,d),ds(c,c),i){var g=c.appendChild(_i());i(c,g)}Ve.nodes_end=c,u.before(c)})),a=d,a&&(l=a))},Is)}function wl(t,e,n){Wi(()=>{var i=kn(()=>e(t,n==null?void 0:n())||{});if(i!=null&&i.destroy)return()=>i.destroy()})}function Pu(t,e){var n=void 0,i;bi(()=>{n!==(n=e())&&(i&&(nn(i),i=null),n&&(i=Pn(()=>{Wi(()=>n(t))})))})}function Sl(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Sl(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Tu(){for(var t,e,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Sl(t))&&(i&&(i+=" "),i+=e);return i}function fs(t){return typeof t=="object"?Tu(t):t??""}const ta=[...` 	
\r\f \v\uFEFF`];function zu(t,e,n){var i=t==null?"":""+t;if(e&&(i=i?i+" "+e:e),n){for(var o in n)if(n[o])i=i?i+" "+o:o;else if(i.length)for(var r=o.length,a=0;(a=i.indexOf(o,a))>=0;){var l=a+r;(a===0||ta.includes(i[a-1]))&&(l===i.length||ta.includes(i[l]))?i=(a===0?"":i.substring(0,a))+i.substring(l+1):a=l}}return i===""?null:i}function na(t,e=!1){var n=e?" !important;":";",i="";for(var o in t){var r=t[o];r!=null&&r!==""&&(i+=" "+o+": "+r+n)}return i}function Ho(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Ou(t,e){if(e){var n="",i,o;if(Array.isArray(e)?(i=e[0],o=e[1]):i=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var r=!1,a=0,l=!1,c=[];i&&c.push(...Object.keys(i).map(Ho)),o&&c.push(...Object.keys(o).map(Ho));var u=0,m=-1;const _=t.length;for(var d=0;d<_;d++){var v=t[d];if(l?v==="/"&&t[d-1]==="*"&&(l=!1):r?r===v&&(r=!1):v==="/"&&t[d+1]==="*"?l=!0:v==='"'||v==="'"?r=v:v==="("?a++:v===")"&&a--,!l&&r===!1&&a===0){if(v===":"&&m===-1)m=d;else if(v===";"||d===_-1){if(m!==-1){var g=Ho(t.substring(u,m).trim());if(!c.includes(g)){v!==";"&&d++;var p=t.substring(u,d).trim();n+=" "+p+";"}}u=d+1,m=-1}}}}return i&&(n+=na(i)),o&&(n+=na(o,!0)),n=n.trim(),n===""?null:n}return t==null?null:String(t)}function Me(t,e,n,i,o,r){var a=t.__className;if(a!==n||a===void 0){var l=zu(n,i,r);l==null?t.removeAttribute("class"):e?t.className=l:t.setAttribute("class",l),t.__className=n}else if(r&&o!==r)for(var c in r){var u=!!r[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return r}function Bo(t,e={},n,i){for(var o in n){var r=n[o];e[o]!==r&&(n[o]==null?t.style.removeProperty(o):t.style.setProperty(o,r,i))}}function cn(t,e,n,i){var o=t.__style;if(o!==e){var r=Ou(e,i);r==null?t.removeAttribute("style"):t.style.cssText=r,t.__style=e}else i&&(Array.isArray(i)?(Bo(t,n==null?void 0:n[0],i[0]),Bo(t,n==null?void 0:n[1],i[1],"important")):Bo(t,n,i));return i}function io(t,e,n=!1){if(t.multiple){if(e==null)return;if(!Ks(e))return Hc();for(var i of t.options)i.selected=e.includes(rs(i));return}for(i of t.options){var o=rs(i);if(ou(o,e)){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ml(t){var e=new MutationObserver(()=>{io(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Pr(()=>{e.disconnect()})}function zr(t,e,n=e){var i=!0;vl(t,"change",o=>{var r=o?"[selected]":":checked",a;if(t.multiple)a=[].map.call(t.querySelectorAll(r),rs);else{var l=t.querySelector(r)??t.querySelector("option:not([disabled])");a=l&&rs(l)}n(a)}),Wi(()=>{var o=e();if(io(t,o,i),i&&o===void 0){var r=t.querySelector(":checked");r!==null&&(o=rs(r),n(o))}t.__value=o,i=!1}),Ml(t)}function rs(t){return"__value"in t?t.__value:t.value}const Xi=Symbol("class"),Zi=Symbol("style"),Cl=Symbol("is custom element"),xl=Symbol("is html");function Yt(t,e){var n=Or(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Ku(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function fe(t,e,n,i){var o=Or(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[wc]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Al(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Fu(t,e,n,i,o=!1){var r=Or(t),a=r[Cl],l=!r[xl],c=e||{},u=t.tagName==="OPTION";for(var m in e)m in n||(n[m]=null);n.class?n.class=fs(n.class):n[Xi]&&(n.class=null),n[Zi]&&(n.style??(n.style=null));var d=Al(t);for(const w in n){let S=n[w];if(u&&w==="value"&&S==null){t.value=t.__value="",c[w]=S;continue}if(w==="class"){var v=t.namespaceURI==="http://www.w3.org/1999/xhtml";Me(t,v,S,i,e==null?void 0:e[Xi],n[Xi]),c[w]=S,c[Xi]=n[Xi];continue}if(w==="style"){cn(t,S,e==null?void 0:e[Zi],n[Zi]),c[w]=S,c[Zi]=n[Zi];continue}var g=c[w];if(!(S===g&&!(S===void 0&&t.hasAttribute(w)))){c[w]=S;var p=w[0]+w[1];if(p!=="$$")if(p==="on"){const P={},L="$$"+w;let x=w.slice(2);var _=yu(x);if(hu(x)&&(x=x.slice(0,-7),P.capture=!0),!_&&g){if(S!=null)continue;t.removeEventListener(x,c[L],P),c[L]=null}if(S!=null)if(_)t[`__${x}`]=S,Mn([x]);else{let A=function(R){c[w].call(this,R)};c[L]=ml(x,t,A,P)}else _&&(t[`__${x}`]=void 0)}else if(w==="style")fe(t,w,S);else if(w==="autofocus")Su(t,!!S);else if(!a&&(w==="__value"||w==="value"&&S!=null))t.value=t.__value=S;else if(w==="selected"&&u)Ku(t,S);else{var b=w;l||(b=bu(b));var C=b==="defaultValue"||b==="defaultChecked";if(S==null&&!a&&!C)if(r[w]=null,b==="value"||b==="checked"){let P=t;const L=e===void 0;if(b==="value"){let x=P.defaultValue;P.removeAttribute(b),P.defaultValue=x,P.value=P.__value=L?x:null}else{let x=P.defaultChecked;P.removeAttribute(b),P.defaultChecked=x,P.checked=L?x:!1}}else t.removeAttribute(w);else C||d.includes(b)&&(a||typeof S!="string")?(t[b]=S,b in r&&(r[b]=Tt)):typeof S!="function"&&fe(t,b,S)}}}return c}function ia(t,e,n=[],i=[],o,r=!1){qa(n,i,a=>{var l=void 0,c={},u=t.nodeName==="SELECT",m=!1;if(bi(()=>{var v=e(...a.map(s)),g=Fu(t,l,v,o,r);m&&u&&"value"in v&&io(t,v.value);for(let _ of Object.getOwnPropertySymbols(c))v[_]||nn(c[_]);for(let _ of Object.getOwnPropertySymbols(v)){var p=v[_];_.description===qc&&(!l||p!==l[_])&&(c[_]&&nn(c[_]),c[_]=Pn(()=>Pu(t,()=>p))),g[_]=p}l=g}),u){var d=t;Wi(()=>{io(d,l.value,!0),Ml(d)})}m=!0})}function Or(t){return t.__attributes??(t.__attributes={[Cl]:t.nodeName.includes("-"),[xl]:t.namespaceURI===Rc})}var sa=new Map;function Al(t){var e=sa.get(t.nodeName);if(e)return e;sa.set(t.nodeName,e=[]);for(var n,i=t,o=Element.prototype;o!==i;){n=Ta(i);for(var r in n)n[r].set&&e.push(r);i=yr(i)}return e}function Vi(t,e,n=e){var i=yi(),o=new WeakSet;vl(t,"input",r=>{var a=r?t.defaultValue:t.value;if(a=Wo(t)?Uo(a):a,n(a),vt!==null&&o.add(vt),i&&a!==(a=e())){var l=t.selectionStart,c=t.selectionEnd;t.value=a??"",c!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(c,t.value.length))}}),kn(e)==null&&t.value&&(n(Wo(t)?Uo(t.value):t.value),vt!==null&&o.add(vt)),el(()=>{var r=e();if(t===document.activeElement){var a=js??vt;if(o.has(a))return}Wo(t)&&r===Uo(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function Wo(t){var e=t.type;return e==="number"||e==="range"}function Uo(t){return t===""?null:+t}var Yn,Gi,ws,yo,Dl;const _o=class _o{constructor(e){st(this,yo);st(this,Yn,new WeakMap);st(this,Gi);st(this,ws);Jt(this,ws,e)}observe(e,n){var i=re(this,Yn).get(e)||new Set;return i.add(n),re(this,Yn).set(e,i),Wn(this,yo,Dl).call(this).observe(e,re(this,ws)),()=>{var o=re(this,Yn).get(e);o.delete(n),o.size===0&&(re(this,Yn).delete(e),re(this,Gi).unobserve(e))}}};Yn=new WeakMap,Gi=new WeakMap,ws=new WeakMap,yo=new WeakSet,Dl=function(){return re(this,Gi)??Jt(this,Gi,new ResizeObserver(e=>{for(var n of e){_o.entries.set(n.target,n);for(var i of re(this,Yn).get(n.target)||[])i(n)}}))},ge(_o,"entries",new WeakMap);let ar=_o;var Iu=new ar({box:"border-box"});function $u(t,e,n){var i=Iu.observe(t,()=>n(t[e]));Wi(()=>(kn(()=>n(t[e])),i))}function oa(t,e){return t===e||(t==null?void 0:t[Dn])===e}function un(t={},e,n,i){return Wi(()=>{var o,r;return el(()=>{o=r,r=[],kn(()=>{t!==n(...r)&&(e(t,...r),o&&oa(n(...o),t)&&e(null,...o))})}),()=>{Mo(()=>{r&&oa(n(...r),t)&&e(null,...r)})}}),t}function Gu(t=!1){const e=pt,n=e.l.u;if(!n)return;let i=()=>Ai(e.s);if(t){let o=0,r={};const a=$s(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==r[u]&&(r[u]=c[u],l=!0);return l&&o++,o});i=()=>s(a)}n.b.length&&es(()=>{ra(e,i),Zo(n.b)}),Dt(()=>{const o=kn(()=>n.m.map(yc));return()=>{for(const r of o)typeof r=="function"&&r()}}),n.a.length&&Dt(()=>{ra(e,i),Zo(n.a)})}function ra(t,e){if(t.l.s)for(const n of t.l.s)s(n);e()}function El(t,e,n){if(t==null)return e(void 0),An;const i=kn(()=>t.subscribe(e,n));return i.unsubscribe?()=>i.unsubscribe():i}const Ci=[];function Do(t,e=An){let n=null;const i=new Set;function o(l){if(Cr(t,l)&&(t=l,n)){const c=!Ci.length;for(const u of i)u[1](),Ci.push(u,t);if(c){for(let u=0;u<Ci.length;u+=2)Ci[u][0](Ci[u+1]);Ci.length=0}}}function r(l){o(l(t))}function a(l,c=An){const u=[l,c];return i.add(u),i.size===1&&(n=e(o,r)||An),l(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:a}}function Ll(t){let e;return El(t,n=>e=n)(),e}let qs=!1,lr=Symbol();function Nu(t,e,n){const i=n[e]??(n[e]={store:null,source:Ua(void 0),unsubscribe:An});if(i.store!==t&&!(lr in n))if(i.unsubscribe(),i.store=t??null,t==null)i.source.v=void 0,i.unsubscribe=An;else{var o=!0;i.unsubscribe=El(t,r=>{o?i.source.v=r:y(i.source,r)}),o=!1}return t&&lr in n?Ll(t):s(i.source)}function Ru(){const t={};function e(){Pr(()=>{for(var n in t)t[n].unsubscribe();Xs(t,lr,{enumerable:!1,value:!0})})}return[t,e]}function Vu(t){var e=qs;try{return qs=!1,[t(),qs]}finally{qs=e}}const qu={get(t,e){if(!t.exclude.includes(e))return s(t.version),e in t.special?t.special[e]():t.props[e]},set(t,e,n){if(!(e in t.special)){var i=Ve;try{zn(t.parent_effect),t.special[e]=Ae({get[e](){return t.props[e]}},e,Fa)}finally{zn(i)}}return t.special[e](n),nr(t.version),!0},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},deleteProperty(t,e){return t.exclude.includes(e)||(t.exclude.push(e),nr(t.version)),!0},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function zt(t,e){return new Proxy({props:t,exclude:e,special:{},version:Ni(0),parent_effect:Ve},qu)}const Hu={get(t,e){let n=t.props.length;for(;n--;){let i=t.props[n];if(Qi(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(t,e,n){let i=t.props.length;for(;i--;){let o=t.props[i];Qi(o)&&(o=o());const r=ti(o,e);if(r&&r.set)return r.set(n),!0}return!1},getOwnPropertyDescriptor(t,e){let n=t.props.length;for(;n--;){let i=t.props[n];if(Qi(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const o=ti(i,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Dn||e===Oa)return!1;for(let n of t.props)if(Qi(n)&&(n=n()),n!=null&&e in n)return!0;return!1},ownKeys(t){const e=[];for(let n of t.props)if(Qi(n)&&(n=n()),!!n){for(const i in n)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(n))e.includes(i)||e.push(i)}return e}};function Rt(...t){return new Proxy({props:t},Hu)}function Ae(t,e,n,i){var S;var o=!Bi||(n&Fc)!==0,r=(n&Ic)!==0,a=(n&$c)!==0,l=i,c=!0,u=()=>(c&&(c=!1,l=a?kn(i):i),l),m;if(r){var d=Dn in t||Oa in t;m=((S=ti(t,e))==null?void 0:S.set)??(d&&e in t?P=>t[e]=P:void 0)}var v,g=!1;r?[v,g]=Vu(()=>t[e]):v=t[e],v===void 0&&i!==void 0&&(v=u(),m&&(o&&Ec(),m(v)));var p;if(o?p=()=>{var P=t[e];return P===void 0?u():(c=!0,P)}:p=()=>{var P=t[e];return P!==void 0&&(l=void 0),P===void 0?l:P},o&&(n&Fa)===0)return p;if(m){var _=t.$$legacy;return function(P,L){return arguments.length>0?((!o||!L||_||g)&&m(L?p():P),P):p()}}var b=!1,C=((n&Kc)!==0?$s:Ar)(()=>(b=!1,p()));r&&s(C);var w=Ve;return function(P,L){if(arguments.length>0){const x=L?s(C):o&&r?Ye(P):P;return y(C,x),b=!0,l!==void 0&&(l=x),P}return ki&&b||(w.f&gi)!==0?C.v:s(C)}}function pi(t){pt===null&&ko(),Bi&&pt.l!==null?Uu(pt).m.push(t):Dt(()=>{const e=kn(t);if(typeof e=="function")return e})}function Pl(t){pt===null&&ko(),pi(()=>()=>kn(t))}function Bu(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function Wu(){const t=pt;return t===null&&ko(),(e,n,i)=>{var r;const o=(r=t.s.$$events)==null?void 0:r[e];if(o){const a=Ks(o)?o.slice():[o],l=Bu(e,n,i);for(const c of a)c.call(t.x,l);return!l.defaultPrevented}return!0}}function Uu(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const hn="keyboard-shortcuts-visualization",aa={sections:[{name:"main",gridRatio:3.75,rows:[[{type:"common",label:"Escape",code:"Escape",unicode:"⎋"},{type:"empty",width:.5},{type:"common",label:"F1",code:"F1"},{type:"common",label:"F2",code:"F2"},{type:"common",label:"F3",code:"F3"},{type:"common",label:"F4",code:"F4"},{type:"empty",width:.75},{type:"common",label:"F5",code:"F5"},{type:"common",label:"F6",code:"F6"},{type:"common",label:"F7",code:"F7"},{type:"empty",width:.75},{type:"common",label:"F8",code:"F8"},{type:"common",label:"F9",code:"F9"},{type:"common",label:"F10",code:"F10"},{type:"common",label:"F11",code:"F11"},{type:"common",label:"F12",code:"F12"}],[{type:"common",label:"`",code:"Backquote"},{type:"common",label:"1",code:"Digit1"},{type:"common",label:"2",code:"Digit2"},{type:"common",label:"3",code:"Digit3"},{type:"common",label:"4",code:"Digit4"},{type:"common",label:"5",code:"Digit5"},{type:"common",label:"6",code:"Digit6"},{type:"common",label:"7",code:"Digit7"},{type:"common",label:"8",code:"Digit8"},{type:"common",label:"9",code:"Digit9"},{type:"common",label:"0",code:"Digit0"},{type:"common",label:"-",code:"Minus"},{type:"common",label:"=",code:"Equal"},{type:"common",label:"Backspace",code:"Backspace",width:2,unicode:"⌫"}],[{type:"common",label:"Tab",code:"Tab",width:1.5},{type:"common",label:"Q",code:"KeyQ"},{type:"common",label:"W",code:"KeyW"},{type:"common",label:"E",code:"KeyE"},{type:"common",label:"R",code:"KeyR"},{type:"common",label:"T",code:"KeyT"},{type:"common",label:"Y",code:"KeyY"},{type:"common",label:"U",code:"KeyU"},{type:"common",label:"I",code:"KeyI"},{type:"common",label:"O",code:"KeyO"},{type:"common",label:"P",code:"KeyP"},{type:"common",label:"[",code:"BracketLeft"},{type:"common",label:"]",code:"BracketRight"},{type:"common",label:"\\",code:"Backslash",width:1.5}],[{type:"common",label:"Caps",code:"CapsLock",width:1.75,unicode:"⇪"},{type:"common",label:"A",code:"KeyA"},{type:"common",label:"S",code:"KeyS"},{type:"common",label:"D",code:"KeyD"},{type:"common",label:"F",code:"KeyF"},{type:"common",label:"G",code:"KeyG"},{type:"common",label:"H",code:"KeyH"},{type:"common",label:"J",code:"KeyJ"},{type:"common",label:"K",code:"KeyK"},{type:"common",label:"L",code:"KeyL"},{type:"common",label:";",code:"Semicolon"},{type:"common",label:"'",code:"Quote"},{type:"common",label:"Enter",code:"Enter",width:2.25}],[{type:"common",label:"Shift",code:"ShiftLeft",width:2.25,unicode:"⇧"},{type:"common",label:"Z",code:"KeyZ"},{type:"common",label:"X",code:"KeyX"},{type:"common",label:"C",code:"KeyC"},{type:"common",label:"V",code:"KeyV"},{type:"common",label:"B",code:"KeyB"},{type:"common",label:"N",code:"KeyN"},{type:"common",label:"M",code:"KeyM"},{type:"common",label:",",code:"Comma"},{type:"common",label:".",code:"Period"},{type:"common",label:"/",code:"Slash"},{type:"common",label:"Shift",code:"ShiftRight",width:2.75,unicode:"⇧"}],[{type:"os-specific",width:1.5,os:{macos:{label:"Control",code:"ControlLeft",unicode:"⌃",modifier:"Control"},windows:{label:"Ctrl",code:"ControlLeft",unicode:"Ctrl",modifier:"Control"},linux:{label:"Ctrl",code:"ControlLeft",unicode:"Ctrl",modifier:"Control"}}},{type:"os-specific",width:1.5,os:{macos:{label:"Alt",code:"AltLeft",unicode:"⌥",modifier:"Alt"},windows:{label:"Win",code:"MetaLeft",unicode:"Win",modifier:void 0},linux:{label:"Win",code:"MetaLeft",unicode:"Super",modifier:void 0}}},{type:"os-specific",width:1.5,os:{macos:{label:"Meta",code:"MetaLeft",unicode:"⌘",modifier:"Meta"},windows:{label:"Alt",code:"AltLeft",unicode:"Alt",modifier:"Alt"},linux:{label:"Alt",code:"AltLeft",unicode:"Alt",modifier:"Alt"}}},{type:"common",label:" ",code:"Space",unicode:"⎵",width:6},{type:"os-specific",width:1.5,os:{macos:{label:"Meta",code:"MetaRight",unicode:"⌘",modifier:"Meta"},windows:{label:"Alt",code:"AltRight",unicode:"Alt",modifier:"Alt"},linux:{label:"Alt",code:"AltRight",unicode:"Alt",modifier:"Alt"}}},{type:"os-specific",width:1.5,os:{macos:{label:"Alt",code:"AltRight",unicode:"⌥",modifier:"Alt"},windows:{label:"Win",code:"MetaRight",unicode:"Win",modifier:void 0},linux:{label:"Win",code:"MetaRight",unicode:"Super",modifier:void 0}}},{type:"os-specific",width:1.5,os:{macos:{label:"Control",code:"ControlRight",unicode:"⌃",modifier:"Control"},windows:{label:"Ctrl",code:"ControlRight",unicode:"Ctrl",modifier:"Control"},linux:{label:"Ctrl",code:"ControlRight",unicode:"Ctrl",modifier:"Control"}}}]]},{name:"other",gridRatio:.75,rows:[[{type:"empty"},{type:"empty"},{type:"empty"}],[{type:"common",label:"Insert",code:"Insert",smallText:!0},{type:"common",label:"Home",code:"Home",smallText:!0},{type:"common",label:"PgUp",code:"PageUp",smallText:!0}],[{type:"common",label:"Delete",code:"Delete",smallText:!0},{type:"common",label:"End",code:"End",smallText:!0},{type:"common",label:"PgUp",code:"PageDown",smallText:!0}],[{type:"empty"},{type:"empty"},{type:"empty"}],[{type:"empty"},{type:"common",label:"ArrowUp",code:"ArrowUp",unicode:"↑"},{type:"empty"}],[{type:"common",label:"ArrowLeft",code:"ArrowLeft",unicode:"←"},{type:"common",label:"ArrowDown",code:"ArrowDown",unicode:"↓"},{type:"common",label:"ArrowRight",code:"ArrowRight",unicode:"→"}]]},{name:"num",gridRatio:1,rows:[[{type:"empty"},{type:"empty"},{type:"empty"},{type:"empty"}],[{type:"common",label:"NumLock",code:"NumLock",unicode:"⇭"},{type:"common",label:"/",code:"NumpadDivide"},{type:"common",label:"*",code:"NumpadMultiply",unicode:"×"},{type:"common",label:"-",code:"NumpadSubtract"}],[{type:"common",label:"7",code:"Numpad7"},{type:"common",label:"8",code:"Numpad8"},{type:"common",label:"9",code:"Numpad9"},{type:"common",label:"+",code:"NumpadAdd",height:2}],[{type:"common",label:"4",code:"Numpad4"},{type:"common",label:"5",code:"Numpad5"},{type:"common",label:"6",code:"Numpad6"}],[{type:"common",label:"1",code:"Numpad1"},{type:"common",label:"2",code:"Numpad2"},{type:"common",label:"3",code:"Numpad3"},{type:"common",label:"Enter",code:"Enter",height:2}],[{type:"common",label:"0",code:"Numpad0",width:2},{type:"common",label:".",code:"NumpadDecimal"}]]}]},ju="5";var La;typeof window<"u"&&((La=window.__svelte??(window.__svelte={})).v??(La.v=new Set)).add(ju);let Tl=!1,zl="debug",Ol="none",Kl="activeView",Fl="click",Il=!1;function so(t){Tl=!!t}function Eo(){return Tl}function $l(t){zl=t}function Qu(){return zl}function oo(t){Ol=t}function Di(){return Ol}function la(t){Kl=t==="global"?"global":"activeView"}function ca(){return Kl}function ua(t){Fl=t==="press"?"press":"click"}function ro(){return Fl==="press"}function cr(t){Il=!!t}function Yu(){return Il}const da={debug:10,info:20,warn:30,error:40};function ns(t){if(!Eo())return!1;const e=Qu();return da[t]>=da[e]}function Hs(t){try{return t}catch{return t}}function Gl(){return typeof performance<"u"&&performance.now?performance.now():Date.now()}const ur=new Map,dr={};function Xu(t){Eo()&&ur.set(t,Gl())}const Zu=5;function Ju(t){if(!Eo())return;const e=ur.get(t);if(!e)return;const n=Gl()-e;ur.delete(t);const i=dr[t]||{count:0,totalMs:0,lastMs:0};i.count+=1,i.totalMs+=n,i.lastMs=n,dr[t]=i,(n>=Zu||i.count<=3)&&ns("debug")&&console.debug("[KB][timing]",t,`${n.toFixed(2)}ms`)}function ed(){if(!Eo())return;const t=[];for(const[e,n]of Object.entries(dr)){const i=n.totalMs/Math.max(1,n.count);t.push(`${e}: count=${n.count} avg=${i.toFixed(2)}ms last=${n.lastMs.toFixed(2)}ms total=${n.totalMs.toFixed(2)}ms`)}if(t.length){const e=t.map(n=>{const i=n.match(/avg=([0-9.]+)ms/),o=i?Number.parseFloat(i[1]):0;return{line:n,avg:o}}).sort((n,i)=>i.avg-n.avg).slice(0,8).map(n=>n.line);console.info("[KB][timings] aggregated timings (top "+String(e.length)+`):
`+e.join(`
`))}else console.info("[KB][timings] no timings recorded")}const E={debug:(...t)=>{ns("debug")&&console.debug("[KB]",...Hs(t))},info:(...t)=>{ns("info")&&console.info("[KB]",...Hs(t))},warn:(...t)=>{ns("warn")&&console.warn("[KB]",...Hs(t))},error:(...t)=>{ns("error")&&console.error("[KB]",...Hs(t))},timeStart:Xu,timeEnd:Ju,dumpTimings:ed},td=Object.freeze(Object.defineProperty({__proto__:null,default:E,logger:E},Symbol.toStringTag,{value:"Module"}));function Jn(){const t=Di();return t==="macos"?!0:t==="windows"||t==="linux"?!1:St.Platform.isMacOS}const Nl={Control:"Ctrl",Shift:"Shift",Alt:"Alt",Meta:"Meta",Mod:Jn()?"Meta":"Ctrl"};Jn(),Jn(),Jn(),Jn();function an(t){return Nl[t]??t}function Rl(t){const e=Object.entries(Nl).find(([n,i])=>i===t);return e?e[0]:t}function En(t){return t.map(an)}function nd(t){const e=String(t);return Jn()?e==="Mod"?"Meta":e==="Control"||e==="Ctrl"?"Ctrl":e==="Alt"||e==="Option"?"Alt":e==="Meta"||e==="Cmd"||e==="Win"?"Meta":e==="Shift"?"Shift":e:e==="Mod"||e==="Meta"||e==="Cmd"?"Ctrl":e==="Option"?"Alt":e==="Control"?"Ctrl":e==="Win"?"Meta":e}function Gn(t){return t.map(nd)}function In(t){return t.map(Rl)}function xt(t){const e=Jn()?["Meta","Ctrl","Alt","Shift"]:["Ctrl","Alt","Shift","Meta","Win"];return[...t].sort((n,i)=>{const o=an(n),r=an(i),a=e.indexOf(o),l=e.indexOf(r);return a===-1&&l===-1?n.localeCompare(i):a===-1?1:l===-1?-1:a-l})}function vs(t){const e=Jn()?"Meta":"Ctrl",n=(t||[]).map(a=>String(a)).map(a=>a==="Control"?"Ctrl":a==="Option"?"Alt":a==="Cmd"||a==="Win"?"Meta":a==="Mod"?e:a),i=new Set(n),o=i.has("Meta"),r=i.has("Ctrl");return o&&r?e==="Meta"?(i.delete("Meta"),i.add("Mod"),i.add("Ctrl")):(i.delete("Ctrl"),i.add("Mod"),i.add("Meta")):e==="Meta"&&o?(i.delete("Meta"),i.add("Mod")):e==="Ctrl"&&r&&(i.delete("Ctrl"),i.add("Mod")),xt(Array.from(i))}function Vl(t,e){if(!t||!e)return t===e;if(t.length!==e.length)return!1;const n=new Set(t);for(const i of e)if(!n.has(i))return!1;return!0}function Et(t){const e=t.toLowerCase(),n={space:" ",minus:"-",equal:"=",bracketleft:"[",bracketright:"]",semicolon:";",quote:"'",backquote:"`",comma:",",period:".",slash:"/",backslash:"\\",numpaddivide:"/",numpadmultiply:"*",numpadsubtract:"-",numpadadd:"+",numpaddecimal:".",numpadenter:"enter"};return n[e]?n[e]:e.startsWith("key")?e.slice(3):e.startsWith("digit")?e.slice(5):e}function ql(t,e){return Et(t)===Et(e)}function ao(t,e,n,i){const{strictModifierMatch:o=!0,allowKeyOnly:r=!0,platformize:a=!0}=i||{},l=a?Gn(e):e,c=a?Gn(t.modifiers):t.modifiers,u=xt(l),m=xt(c),d=r&&u.length===0?!0:o?Vl(u,m):u.length===0&&m.length===0||u.length>0&&u.every(g=>m.includes(g)),v=n?ql(n,t.key):!0;return d&&v}var Ss,Ms;class Kr{constructor(){st(this,Ss,G(Ye(aa)));st(this,Ms,G(Ye({})));ge(this,"codeToObsidianModifier",{});this.layout=this.getProcessedLayout(aa),this.initializeKeyStates()}get layout(){return s(re(this,Ss))}set layout(e){y(re(this,Ss),e,!0)}get keyStates(){return s(re(this,Ms))}set keyStates(e){y(re(this,Ms),e,!0)}getProcessedLayout(e){const n=Di(),i=n==="none"?St.Platform.isMacOS?"macos":St.Platform.isLinux?"linux":"windows":n,o=e.sections.map(r=>({...r,rows:r.rows.map(a=>a.map(l=>{if(l.type==="os-specific"&&l.os){const c=l.os[i];return{...l,label:c.label,code:c.code,unicode:c.unicode,logicalModifier:c.modifier}}return l}))}));return{...e,sections:o}}initializeKeyStates(){this.layout.sections.forEach(e=>{e.rows.forEach(n=>{n.forEach(i=>{if(i.type!=="empty"){const o=(i.code||i.label||"").toLowerCase();if(o){const r={displayValue:this.getUnicodeForKey(i),code:i.code||i.label||"",state:"inactive",smallText:i.smallText,weight:0};this.keyStates[o]=r,i.code&&this.assignModifierRole(i)}else E.warn("Invalid key found:",i)}})})})}assignModifierRole(e){const n=e.code||"",i=e.logicalModifier;if(!i){delete this.codeToObsidianModifier[n];return}this.codeToObsidianModifier[n]=i}mapCodeToObsidianModifier(e){if(this.codeToObsidianModifier[e])return this.codeToObsidianModifier[e];const n=e;if(this.codeToObsidianModifier[n])return this.codeToObsidianModifier[n];if(/^Control(Left|Right)$/.test(e))return"Control";if(/^Alt(Left|Right)$/.test(e))return"Alt";if(/^Shift(Left|Right)$/.test(e))return"Shift";if(/^Meta(Left|Right)$/.test(e)){const i=Di();return(i==="macos"?!0:i==="none"?St.Platform.isMacOS:!1)?"Meta":void 0}}getUnicodeForKey(e){if(!e)return"";if(e.unicode)return e.unicode;const n=Di(),i=n==="macos"?!0:n==="none"?St.Platform.isMacOS:!1;return i&&e.mac_unicode?e.mac_unicode:!i&&e.win_unicode?e.win_unicode:e.label||""}calculateAndAssignWeights(e,n=[],i="",o=!1){var c;const r=Array.isArray(e)?e:[],a={};for(const u in this.keyStates)a[u.toLowerCase()]=0;const l=((n==null?void 0:n.length)??0)>0||!!i;for(const u of r){const m=Array.isArray(u.hotkeys)?u.hotkeys:[];for(const d of m){let v=!0;if(o&&l){const b=En(n||[]),C=En(d.modifiers||[]),w=Vl(b,C),S=!i||ql(i,d.key||"");v=w&&S}if(!v)continue;const g=(d.key||"").toLowerCase(),p=this.resolveKeyAliases(g);for(const b of p)if(b in a){a[b]=(a[b]||0)+1;break}const _=Array.isArray(d.modifiers)?d.modifiers:[];for(const b of _){const C=b.toLowerCase();let w=null;const S=Di(),P=S==="macos"?!0:S==="none"?St.Platform.isMacOS:!1;C==="mod"?w=P?"meta":"control":C==="ctrl"||C==="control"?w="control":C==="cmd"||C==="meta"?w=P?"meta":"control":C==="win"?w="meta":C==="alt"||C==="option"?w="alt":C==="shift"&&(w="shift");const L=.25;w?a[w]=(a[w]||0)+L:a[C]=(a[C]||0)+L}}}for(const u in this.keyStates){const m=u.toLowerCase(),d=((c=this.keyStates[u].code)==null?void 0:c.toLowerCase())||"";d.startsWith("control")?this.keyStates[u].weight=a.control||0:d.startsWith("alt")?this.keyStates[u].weight=a.alt||0:d.startsWith("shift")?this.keyStates[u].weight=a.shift||0:d.startsWith("meta")?this.keyStates[u].weight=a.meta||0:this.keyStates[u].weight=a[m]||0}}resolveKeyAliases(e){const n=new Set,i=(e||"").toLowerCase();if(!i)return[];n.add(i);const o={"`":"backquote","-":"minus","=":"equal","[":"bracketleft","]":"bracketright",";":"semicolon","'":"quote",",":"comma",".":"period","/":"slash","\\":"backslash"," ":"space"};i in o&&n.add(o[i]);const r=Object.fromEntries(Object.entries(o).map(([a,l])=>[l,a]));return i in r&&n.add(r[i]),/^[a-z]$/.test(i)&&n.add(`key${i}`),/^key[a-z]$/.test(i)&&n.add(i.slice(3)),/^[0-9]$/.test(i)&&n.add(`digit${i}`),/^digit[0-9]$/.test(i)&&n.add(i.slice(5)),Array.from(n)}getKeyState(e){if(e.type==="empty")return{displayValue:"empty",code:"",state:"empty"};const n=(e.code||e.label||"").toLowerCase();return this.keyStates[n]?this.keyStates[n]:(E.warn(`Key state for ${n} is undefined. Check initialization.`),{displayValue:e.label||"",code:"",state:"inactive"})}toggleKeyActive(e){const n=e.toLowerCase();return this.keyStates[n]?(this.keyStates[n].state=this.keyStates[n].state==="active"?"inactive":"active",this.keyStates[n].state==="active"):(E.warn(`Key state for ${n} is undefined. Check initialization.`),!1)}updateKeyState(e,n,i,o=0){const r=e.toLowerCase();this.keyStates[r]?(this.keyStates[r].state=n?"active":i?"possible":"inactive",this.keyStates[r].weight=o):E.warn(`Key state for ${r} is undefined. Check initialization.`)}updateVisualState(e,n){for(const o in this.keyStates)this.keyStates[o].state="inactive";if(e){const o=e.toLowerCase();this.keyStates[o]&&(this.keyStates[o].state="active")}const i=new Set(In(n));for(const o in this.keyStates){const r=this.keyStates[o].code,a=this.normalizeModifier(r);a&&i.has(a)&&(this.keyStates[o].state="active")}}previewHoverState(e,n){for(const a in this.keyStates)this.keyStates[a].state==="hover"&&(this.keyStates[a].state="inactive");const i=(e||"").toLowerCase(),o=this.resolveKeyAliases(i);for(const a of o){const l=this.keyStates[a];if(l){l.state="hover";break}}const r=new Set((n||[]).map(a=>an(a)));for(const a in this.keyStates){const l=this.keyStates[a].code,c=this.normalizeModifier(l);c&&r.has(c)&&(this.keyStates[a].state="hover")}}normalizeModifier(e){if(!e)return null;const n=e.toLowerCase();return n.startsWith("control")?"Control":n.startsWith("alt")?"Alt":n.startsWith("shift")?"Shift":n.startsWith("meta")?"Meta":null}clearActiveKeys(){for(const e in this.keyStates)this.keyStates[e].state==="active"&&(this.keyStates[e].state="inactive")}resetKeyStates(){for(const e in this.keyStates)this.keyStates[e].weight=0,this.keyStates[e].state="inactive"}}Ss=new WeakMap,Ms=new WeakMap;function id(t){let e=[];const n=t.modifiers;if(Array.isArray(n))e=n;else if(typeof n=="string")e=(n||"").split(",");else if(n&&typeof n=="object"&&"split"in n)try{e=String(n).split(",")}catch{e=[]}return{modifiers:e,key:t.key!==null?t.key:""}}function sd(t,e){var n;try{const i=t.plugins;if(!i)return e;if(typeof i.getPlugin=="function"){const o=i.getPlugin(e);if(o&&typeof o=="object"){const r=((n=o.manifest)==null?void 0:n.name)||o.name||o.displayName;if(typeof r=="string"&&r.length>0)return r}}return e}catch{return e}}function od(t,e){if(typeof e!="string")return!1;const n=e.toLowerCase().trim();return n.length===0?!1:!!(n.startsWith("app:")||n.startsWith("workspace:")||n.startsWith("editor:")||/\b(app|workspace|core|file|pane|editor)\b/.test(n))}function rd(t,e,n){const i=n.id||"",o=n.name||"";let r={all:[],default:[],custom:[]};try{const _=t.hotkeyManager;if(_){const b=_.getDefaultHotkeys&&_.getDefaultHotkeys(i)||[],C=_.customKeys&&_.customKeys[i]||[],w=!!(_.customKeys&&i in _.customKeys),S=(A,R)=>(A||[]).map(Z=>({...id(Z),isCustom:R})),P=S(b,!1),L=S(C,!0);r={all:w?L:P,default:P,custom:L}}else if(e&&typeof e.getHotkeysForCommand=="function"){const b=e.getHotkeysForCommand(i);b&&Array.isArray(b.all)&&(r={all:b.all,default:b.default||[],custom:b.custom||[]})}}catch{}const[a,...l]=i.split(":"),c=l.join(":")||o;let u=a||"";try{t&&(u=sd(t,a))}catch{u=a}const m=(()=>{try{return od(t,i)}catch{return a?a==="app"||a==="workspace"||a==="editor":!1}})(),d=Array.isArray(r.default)?r.default:[],v=Array.isArray(r.custom)?r.custom:[],g=Array.isArray(r.all)?r.all:(()=>{const _=new Map,b=C=>{const S=`${xt(Gn(C.modifiers||[])).join(",")}|${Et(C.key||"")}`;_.set(S,C)};return d.forEach(b),v.forEach(b),Array.from(_.values())})();return{id:i,name:o,hotkeys:g,defaultHotkeys:d,customHotkeys:v,isInternalModule:m,pluginName:u,cmdName:c}}function fa(){const t=globalThis.process;return t!=null&&t.platform?t.platform==="darwin":typeof navigator<"u"&&/Mac|iPhone|iPad/.test(navigator.platform)}function ad(){const t=globalThis.process;return t!=null&&t.platform?t.platform==="win32":typeof navigator<"u"&&/Win/.test(navigator.platform)}function ld(){const t=globalThis.process;return t!=null&&t.platform?t.platform==="linux":typeof navigator<"u"&&/Linux/.test(navigator.platform)}function Kt(t,e){return{modifiers:t,key:e,isCustom:!1}}function va(){const t=[],e="System Shortcuts",n=[{id:"system:undo",name:"Undo",hotkeys:[Kt(["Mod"],"z")]},{id:"system:redo",name:"Redo",hotkeys:fa()?[Kt(["Mod","Shift"],"z")]:[Kt(["Control"],"y")]},{id:"system:cut",name:"Cut",hotkeys:[Kt(["Mod"],"x")]},{id:"system:copy",name:"Copy",hotkeys:[Kt(["Mod"],"c")]},{id:"system:paste",name:"Paste",hotkeys:[Kt(["Mod"],"v")]},{id:"system:zoom-in",name:"Zoom In",hotkeys:[Kt(["Mod"],"=")]},{id:"system:zoom-out",name:"Zoom Out",hotkeys:[Kt(["Mod"],"-")]},{id:"system:zoom-reset",name:"Reset Zoom",hotkeys:[Kt(["Mod"],"0")]}];for(const i of n)t.push({id:i.id,name:i.name,hotkeys:i.hotkeys,defaultHotkeys:i.hotkeys,customHotkeys:[],isInternalModule:!1,pluginName:e,cmdName:i.name});if(ad()||ld()){const i=[{id:"system:copy-insert",name:"Copy (Ctrl+Insert)",hotkeys:[Kt(["Control"],"Insert")]},{id:"system:paste-shift-insert",name:"Paste (Shift+Insert)",hotkeys:[Kt(["Shift"],"Insert")]},{id:"system:cut-shift-delete",name:"Cut (Shift+Delete)",hotkeys:[Kt(["Shift"],"Delete")]},{id:"system:select-char-left",name:"Select Left",hotkeys:[Kt(["Shift"],"ArrowLeft")]},{id:"system:select-word-left",name:"Select Word Left",hotkeys:[Kt(["Control","Shift"],"ArrowLeft")]},{id:"system:select-word-right",name:"Select Word Right",hotkeys:[Kt(["Control","Shift"],"ArrowRight")]}];for(const o of i)t.push({id:o.id,name:o.name,hotkeys:o.hotkeys,defaultHotkeys:o.hotkeys,customHotkeys:[],isInternalModule:!1,pluginName:e,cmdName:o.name})}if(fa()){const i=[{id:"system:move-word-left",name:"Move Word Left",hotkeys:[Kt(["Alt"],"ArrowLeft")]},{id:"system:select-word-left-mac",name:"Select Word Left",hotkeys:[Kt(["Alt","Shift"],"ArrowLeft")]},{id:"system:select-word-right-mac",name:"Select Word Right",hotkeys:[Kt(["Alt","Shift"],"ArrowRight")]}];for(const o of i)t.push({id:o.id,name:o.name,hotkeys:o.hotkeys,defaultHotkeys:o.hotkeys,customHotkeys:[],isInternalModule:!1,pluginName:e,cmdName:o.name})}return t}var en=(t=>(t.All="all",t.Featured="featured",t.Recent="recent",t))(en||{}),Cs;const si=class si{constructor(e){ge(this,"settingsManager");st(this,Cs,Ce(()=>this.settingsManager.settings.commandGroups));ge(this,"writeLocks",new Set);this.settingsManager=e,this.normalizeAllGroups()}get groups(){return s(re(this,Cs))}set groups(e){y(re(this,Cs),e)}static getInstance(e){return si.instance||(si.instance=new si(e)),si.instance}getGroups(){return this.groups}getGroup(e){return this.groups.find(n=>n.id===e)}createGroup(e){const n=this.slugifyUnique(e),i={...this.settingsManager.settings.defaultFilterSettings},o={id:n,name:e,commandIds:[],excludedModules:[],filterSettings:i,defaults:{filters:{...i}}};return this.settingsManager.updateSettings({commandGroups:[...this.groups,o]}),n}removeGroup(e){this.settingsManager.updateSettings({commandGroups:this.groups.filter(n=>n.id!==e)})}duplicateGroup(e,n){const i=this.getGroup(e);if(!i)return;const o=(n==null?void 0:n.trim())||`${i.name} Copy`,r=this.slugifyUnique(o),a={id:r,name:o,commandIds:[...i.commandIds||[]],excludedModules:[...i.excludedModules||[]],filterSettings:{...i.filterSettings}};return this.settingsManager.updateSettings({commandGroups:[...this.groups,a]}),r}addCommandToGroup(e,n){const i=this.groups.map(o=>o.id===e&&!o.commandIds.includes(n)?{...o,commandIds:[...o.commandIds,n]}:o);this.settingsManager.updateSettings({commandGroups:i})}insertCommandInGroup(e,n,i){const o=this.groups.map(r=>{if(r.id===e&&!r.commandIds.includes(n)){const a=[...r.commandIds],l=Math.max(0,Math.min(i,a.length));return a.splice(l,0,n),{...r,commandIds:a}}return r});this.settingsManager.updateSettings({commandGroups:o})}addCommandToGroupAtTop(e,n){this.insertCommandInGroup(e,n,0)}removeCommandFromAllGroups(e){const n=this.groups.map(i=>({...i,commandIds:i.commandIds.filter(o=>o!==e)}));this.settingsManager.updateSettings({commandGroups:n})}getFeaturedCommandsByGroup(e){const n=this.getGroup(e);return(n==null?void 0:n.commandIds.filter(i=>this.settingsManager.settings.featuredCommandIDs.includes(i)))||[]}removeCommandFromGroup(e,n){const i=this.groups.map(o=>o.id===e?{...o,commandIds:o.commandIds.filter(r=>r!==n)}:o);this.settingsManager.updateSettings({commandGroups:i})}renameGroup(e,n){const i=this.groups.map(o=>o.id===e?{...o,name:n}:o);this.settingsManager.updateSettings({commandGroups:i})}isCommandInGroup(e,n){const i=this.getGroup(e);return!!i&&i.commandIds.includes(n)}getGroupSettings(e){const n=this.getGroup(e),i=this.settingsManager.settings.defaultFilterSettings,o=(n==null?void 0:n.filterSettings)||i;return{...i,...o}}setGroupSetting(e,n,i){const o=this.groups.map(r=>r.id===e?{...r,filterSettings:{...r.filterSettings,[n]:i}}:r);this.settingsManager.updateSettings({commandGroups:o})}updateGroupFilterSettings(e,n){var i;try{if(this.writeLocks.has(e)){E.debug("[groups] updateGroupFilterSettings skipped (locked)",{groupId:e});return}const o=this.groups,r=o.findIndex(c=>c.id===e);if(r!==-1){const c=[...o],u=c[r],d={...this.settingsManager.settings.defaultFilterSettings,...u.filterSettings||{},...n};if(this.isEqualFilters(u.filterSettings,d)){E.debug("[groups] updateGroupFilterSettings noop (no change)",{groupId:e});return}const v={...u,filterSettings:d,...((i=u.behavior)==null?void 0:i.onOpen)==="dynamic"?{lastUsedState:{...u.lastUsedState||{},filters:{...d}}}:{}};this.writeLocks.add(e),c[r]=v,this.settingsManager.updateSettings({commandGroups:c}),setTimeout(()=>this.writeLocks.delete(e),0);return}const a=this.settingsManager.settings.defaultFilterSettings,l={...a,...n};if(this.isEqualFilters(a,l)){E.debug("[groups] updateGroupFilterSettings noop (all/defaults no change)");return}this.settingsManager.updateSettings({defaultFilterSettings:l})}catch(o){E.error("[groups] updateGroupFilterSettings failed",{groupId:e,newSettings:n,err:o})}}toggleFilterSetting(e,n){const i=this.groups.map(o=>o.id===e?{...o,filterSettings:{...o.filterSettings,[n]:!o.filterSettings[n]}}:o);this.settingsManager.updateSettings({commandGroups:i})}getExcludedModulesForGroup(e){const n=this.getGroup(e);return(n==null?void 0:n.excludedModules)||[]}toggleExcludedModuleForGroup(e,n){const i=this.groups.map(o=>{if(o.id===e){const a=o.excludedModules.indexOf(n)!==-1?o.excludedModules.filter(l=>l!==n):[...o.excludedModules,n];return{...o,excludedModules:a}}return o});this.settingsManager.updateSettings({commandGroups:i})}moveCommandInGroup(e,n,i){const o=this.groups.map(r=>{if(r.id===e){const a=[...r.commandIds];if(n<0||n>=a.length||i<0||i>=a.length)return r;const[l]=a.splice(n,1);return a.splice(i,0,l),{...r,commandIds:a}}return r});this.settingsManager.updateSettings({commandGroups:o})}setGroupCommandOrder(e,n){const i=this.groups.map(o=>{if(o.id===e){const r=new Set(o.commandIds),a=n.filter(l=>r.has(l));return{...o,commandIds:a}}return o});this.settingsManager.updateSettings({commandGroups:i})}replaceGroupFilters(e,n){try{if(this.writeLocks.has(e)){E.debug("[groups] replaceGroupFilters skipped (locked)",{groupId:e});return}const i=this.settingsManager.settings.defaultFilterSettings,o=this.groups.map(r=>{var a;if(r.id===e){const l={...i,...n};return this.isEqualFilters(r.filterSettings,l)?r:{...r,filterSettings:l,...((a=r.behavior)==null?void 0:a.onOpen)==="dynamic"?{lastUsedState:{...r.lastUsedState||{},filters:{...l}}}:{}}}return r});this.writeLocks.add(e),this.settingsManager.updateSettings({commandGroups:o}),setTimeout(()=>this.writeLocks.delete(e),0)}catch(i){E.error("[groups] replaceGroupFilters failed",{groupId:e,err:i})}}setGroupDefaults(e,n){try{const i=this.settingsManager.settings.defaultFilterSettings,o=this.groups.map(r=>{if(r.id===e){const a=r.defaults,l={...a||{filters:{...r.filterSettings}},...n||{},filters:{...i,...(a==null?void 0:a.filters)||r.filterSettings,...n.filters||{}}};return a&&this.isEqualFilters(a.filters,l.filters)?(E.debug("[groups] setGroupDefaults noop (no change)",{groupId:e}),r):(E.debug("[groups] setGroupDefaults",{groupId:e,filters:l.filters}),{...r,defaults:l})}return r});this.settingsManager.updateSettings({commandGroups:o})}catch(i){E.error("[groups] setGroupDefaults failed",{groupId:e,state:n,err:i})}}applyDefaultsToGroupFilters(e){try{const n=this.getGroup(e),i=n==null?void 0:n.defaults;if(i!=null&&i.filters){const o=this.settingsManager.settings.defaultFilterSettings;this.replaceGroupFilters(e,{...o,...i.filters})}else E.debug("[groups] no defaults to apply",{groupId:e})}catch(n){E.error("[groups] applyDefaultsToGroupFilters failed",{groupId:e,err:n})}}applyDynamicLastUsedToGroupFilters(e){try{if(this.writeLocks.has(e))return;const n=this.getGroup(e),i=n==null?void 0:n.lastUsedState;if(i!=null&&i.filters){const o=this.settingsManager.settings.defaultFilterSettings;this.replaceGroupFilters(e,{...o,...i.filters})}else E.debug("[groups] no lastUsedState to apply",{groupId:e})}catch(n){E.error("[groups] applyDynamicLastUsedToGroupFilters failed",{groupId:e,err:n})}}isEqualFilters(e,n){const i=this.settingsManager.settings.defaultFilterSettings,o=Object.keys(i);for(const r of o)if(!!(e!=null&&e[r])!=!!(n!=null&&n[r]))return!1;return!0}hasUnsavedFilterChanges(e){var n;try{if(e==="all"){const a=this.settingsManager.settings.defaultFilterSettings,l=this.settingsManager.settings.allGroupDefaultFilters;return l?!this.isEqualFilters(a,l):!1}const i=this.getGroup(e);if(!i)return!1;const o=i.filterSettings,r=(n=i.defaults)==null?void 0:n.filters;return r?!this.isEqualFilters(o,r):!1}catch(i){return E.error("[groups] hasUnsavedFilterChanges failed",{groupId:e,err:i}),!1}}saveCurrentFiltersAsDefaults(e){try{if(e==="all"){const i=this.settingsManager.settings.defaultFilterSettings;this.settingsManager.updateSettings({allGroupDefaultFilters:{...i}});return}const n=this.getGroup(e);if(!n){E.warn("[groups] saveCurrentFiltersAsDefaults: group not found",{groupId:e});return}this.setGroupDefaults(e,{filters:{...n.filterSettings}}),E.debug("[groups] saved current filters as defaults",{groupId:e,filters:n.filterSettings})}catch(n){E.error("[groups] saveCurrentFiltersAsDefaults failed",{groupId:e,err:n})}}resetFiltersToDefaults(e){var n;try{if(e==="all"){const o=this.settingsManager.settings.allGroupDefaultFilters;o&&this.settingsManager.updateSettings({defaultFilterSettings:{...o}});return}const i=this.getGroup(e);if(!((n=i==null?void 0:i.defaults)!=null&&n.filters)){E.warn("[groups] resetFiltersToDefaults: no defaults found",{groupId:e});return}this.applyDefaultsToGroupFilters(e),E.debug("[groups] reset filters to defaults",{groupId:e,defaults:i.defaults.filters})}catch(i){E.error("[groups] resetFiltersToDefaults failed",{groupId:e,err:i})}}moveGroup(e,n){const i=[...this.groups];if(e<0||n<0||e>=i.length||n>=i.length)return;const[o]=i.splice(e,1);i.splice(n,0,o),this.settingsManager.updateSettings({commandGroups:i})}setGroupRegisterCommand(e,n){const i=this.groups.map(o=>o.id===e?{...o,registerCommand:!!n}:o);this.settingsManager.updateSettings({commandGroups:i})}normalizeAllGroups(){const e=this.settingsManager.settings.defaultFilterSettings,n=this.groups.map(i=>{const o={...e,...i.filterSettings||{}},r=i.defaults,a=r?{...r,filters:{...e,...r.filters||o}}:void 0,l=i.lastUsedState,c=l?{...l,filters:{...e,...l.filters||o}}:void 0,u={...i,filterSettings:o},m=a?{...u,defaults:a}:u;return c?{...m,lastUsedState:c}:m});try{JSON.stringify(n)!==JSON.stringify(this.groups)&&this.settingsManager.updateSettings({commandGroups:n})}catch{this.settingsManager.updateSettings({commandGroups:n})}}getGroupBehavior(e){var i;if(e==="all")return this.settingsManager.settings.allGroupOnOpen||"default";const n=this.getGroup(e);return((i=n==null?void 0:n.behavior)==null?void 0:i.onOpen)==="dynamic"?"dynamic":"default"}setGroupBehavior(e,n){if(e==="all"){this.settingsManager.updateSettings({allGroupOnOpen:n});return}const i=this.groups.map(o=>{if(o.id===e){const r={...o.behavior||{},onOpen:n};return{...o,behavior:r}}return o});this.settingsManager.updateSettings({commandGroups:i})}setAllGroupDefaults(e){try{const i={...this.settingsManager.settings.defaultFilterSettings,...(e==null?void 0:e.filters)||{}};setTimeout(()=>{this.settingsManager.updateSettings({allGroupDefaultFilters:{...i}})},0)}catch(n){E.error("[groups] setAllGroupDefaults failed",{state:e,err:n})}}applyDefaultsToAllFilters(){var e;try{const n=this.settingsManager.settings.allGroupDefaultFilters||((e=this.settingsManager.settings.allGroupDefaults)==null?void 0:e.filters);if(n){const i=this.settingsManager.settings.defaultFilterSettings,o={...i,...n};if(this.isEqualFilters(i,o))return;this.settingsManager.updateSettings({defaultFilterSettings:o})}else E.debug("[groups] no allGroupDefaults to apply")}catch(n){E.error("[groups] applyDefaultsToAllFilters failed",{err:n})}}slugifyUnique(e){const n=e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").slice(0,60)||"group";let i=n,o=1;const r=new Set(this.groups.map(a=>String(a.id)));for(;r.has(i);)i=`${n}-${o++}`;return i}};Cs=new WeakMap,ge(si,"instance",null);let lo=si;const pa={StrictModifierMatch:!0,ViewWOhotkeys:!0,OnlyCustom:!1,OnlyDuplicates:!1,FeaturedFirst:!1,HighlightCustom:!1,HighlightDuplicates:!1,HighlightBuiltIns:!1,DisplayIDs:!1,ShowPluginBadges:!0,GroupByPlugin:!1,DisplayGroupAssignment:!1,DisplayInternalModules:!0,DisplaySystemShortcuts:!1},Bs={showStatusBarItem:!0,defaultFilterSettings:pa,filters:{isUnifiedAcrossGroups:!1,filterSettings:pa},featuredCommandIDs:[],commandGroups:[],lastOpenedGroupId:"all",pinKeyboardPanel:!1,keyboardCollapsed:!1,enableDeveloperOptions:!1,devLoggingEnabled:!1,keyboardDevTooltipsEnabled:!1,emulatedOS:"none",useBakedKeyNames:!0,allGroupOnOpen:"default",keyListenerScope:"activeView",modifierActivationMode:"click",searchDebounceMs:200,quickViewHeight:360,quickViewWidth:420,quickViewAutoRun:!0,settingsSchemaVersion:1};var xs;const oi=class oi{constructor(e){ge(this,"plugin");st(this,xs,G(Ye(Bs)));ge(this,"saveTimer",null);ge(this,"saveInProgress",!1);ge(this,"pendingAfterSave",!1);this.plugin=e}get settings(){return s(re(this,xs))}set settings(e){y(re(this,xs),e,!0)}static getInstance(e){return oi.instance||(oi.instance=new oi(e)),oi.instance}getSetting(e){return this.settings[e]}async loadSettings(){try{const e=await this.plugin.loadData();if(e&&typeof e=="object"){const i=e;this.settings={...Bs,...i}}else this.settings={...Bs},await this.plugin.saveData(this.settings);const n=Number(this.settings.settingsSchemaVersion??0);if(!n||n<1){Array.isArray(this.settings.commandGroups)||(this.settings.commandGroups=[]),this.settings.settingsSchemaVersion=1;try{await this.plugin.saveData(this.settings)}catch{}}if(so(!!this.settings.devLoggingEnabled),cr(!!this.settings.keyboardDevTooltipsEnabled),oo(this.settings.emulatedOS||"none"),$l("debug"),la(this.settings.keyListenerScope||"activeView"),"chordPreviewMode"in this.settings&&this.settings.modifierActivationMode===void 0){const i=this.settings.chordPreviewMode;typeof i=="boolean"&&(this.settings.modifierActivationMode=i?"press":"click")}ua(this.settings.modifierActivationMode||"click"),Number(this.settings.searchDebounceMs??200)}catch(e){E.error("Failed to Plugin load settings:",e);try{this.settings={...Bs},await this.plugin.saveData(this.settings),E.warn("Settings file was invalid; wrote defaults to repair data.json")}catch(n){E.error("Failed to write default settings after load error:",n)}}}async saveSettings(){try{await this.plugin.saveData(this.settings)}catch(e){E.error("Failed to Plugin save settings:",e)}}scheduleSave(e=150){this.saveTimer&&clearTimeout(this.saveTimer),this.saveTimer=setTimeout(()=>{this.saveTimer=null,this.flushSaveQueue()},e)}async flushSaveQueue(){if(this.saveInProgress){this.pendingAfterSave=!0;return}this.saveInProgress=!0;try{await this.plugin.saveData(this.settings)}catch(e){E.error("Failed to save settings (flush):",e)}finally{this.saveInProgress=!1,this.pendingAfterSave&&(this.pendingAfterSave=!1,this.scheduleSave(50))}}async flushAllSaves(){if(this.saveTimer&&(clearTimeout(this.saveTimer),this.saveTimer=null),this.saveInProgress){this.pendingAfterSave=!0;const e=Date.now();for(;this.saveInProgress&&Date.now()-e<1e3;)await new Promise(n=>setTimeout(n,25))}try{await this.plugin.saveData(this.settings)}catch(e){E.error("Failed to flush settings on unload:",e)}}updateSettings(e){let n=!1;const i={...this.settings};for(const[o,r]of Object.entries(e))i[o]!==r&&(i[o]=r,n=!0);n&&(this.settings=i,"devLoggingEnabled"in e&&(so(!!this.settings.devLoggingEnabled),E.info("Dev logging",this.settings.devLoggingEnabled?"enabled":"disabled")),"keyboardDevTooltipsEnabled"in e&&(cr(!!this.settings.keyboardDevTooltipsEnabled),E.info("Keyboard dev tooltips",this.settings.keyboardDevTooltipsEnabled?"enabled":"disabled")),"emulatedOS"in e&&(oo(this.settings.emulatedOS||"none"),E.info("Emulated OS set to",this.settings.emulatedOS||"none")),"keyListenerScope"in e&&la(this.settings.keyListenerScope||"activeView"),"modifierActivationMode"in e&&ua(this.settings.modifierActivationMode||"click"),"searchDebounceMs"in e&&(Number(this.settings.searchDebounceMs??200),void 0),this.scheduleSave())}get showStatusBarItem(){return this.settings.showStatusBarItem}set showStatusBarItem(e){this.settings.showStatusBarItem=e,this.scheduleSave()}};xs=new WeakMap,ge(oi,"instance",null);let co=oi;var As,Ds;const Un=class Un{constructor(e,n){ge(this,"app");ge(this,"plugin");ge(this,"hotkeyManager");ge(this,"commands",{});ge(this,"hotkeyIndex",{});ge(this,"settingsManager");ge(this,"groupManager");st(this,As,G(Ye(new Set)));ge(this,"recentCommandIds",[]);st(this,Ds,G(Ye(new Set)));this.app=e,this.plugin=n,this.hotkeyManager=ps.getInstance(e),this.settingsManager=co.getInstance(n),this.groupManager=lo.getInstance(this.settingsManager)}get featuredCommandIds(){return s(re(this,As))}set featuredCommandIds(e){y(re(this,As),e,!0)}get subscribers(){return s(re(this,Ds))}set subscribers(e){y(re(this,Ds),e,!0)}static getInstance(e,n){return Un.instance||(Un.instance=new Un(e,n)),Un.instance}initialize(){this.loadCommands(),this.loadFeaturedCommands()}loadCommands(){setTimeout(()=>{E.timeStart("CommandsManager.loadCommands");const n=!!globalThis.__KBA_PROFILING__;n&&console.time("CommandsManager.loadCommands");const i=this.getCommands();this.commands=this.rebuildIndex(i);const o=va();for(const r of o)this.commands[r.id]=r;try{this.notifySubscribers()}catch{}n&&console.timeEnd("CommandsManager.loadCommands"),E.timeEnd("CommandsManager.loadCommands")},0)}getCommands(){return Object.values(this.app.commands.commands)}rebuildIndex(e){const n=!!globalThis.__KBA_PROFILING__;E.timeStart("CommandsManager.rebuildIndex"),n&&console.time("CommandsManager.rebuildIndex");const i={},o=e.reduce((r,a)=>{const l=rd(this.app,this.hotkeyManager,a);r[l.id]=l;try{const c=l.hotkeys||[];for(const u of c){const d=`${xt(Gn(u.modifiers)).join(",")}|${Et(u.key||"")}`;i[d]||(i[d]=[]),i[d].push(l.id)}}catch{}return r},{});return this.hotkeyIndex=i,n&&console.timeEnd("CommandsManager.rebuildIndex"),E.timeEnd("CommandsManager.rebuildIndex"),o}getCommandsIndex(){return this.commands}getCommandsList(){return Object.values(this.commands)}getCommandsByHotkeyKey(e){return(this.hotkeyIndex[e]||[]).map(i=>this.commands[i]).filter(Boolean)}static makeHotkeyKey(e){return`${xt(Gn(e.modifiers)).join(",")}|${Et(e.key||"")}`}ensureSystemShortcutsLoaded(){const e=va();for(const n of e)this.commands[n.id]=n}refreshIndex(){this.loadCommands(),this.notifySubscribers()}subscribe(e){this.subscribers.add(e);try{e(this.getCommandsIndex())}catch{}return()=>{this.subscribers.delete(e)}}notifySubscribers(){const e=this.getCommandsIndex();for(const n of Array.from(this.subscribers))try{n(e)}catch{}}loadFeaturedCommands(){this.featuredCommandIds=new Set(this.settingsManager.getSetting("featuredCommandIDs")||[])}getGroupCommands(e){if(e===String(en.All))return Object.values(this.commands);if(e===String(en.Featured))return Array.from(this.featuredCommandIds).map(i=>this.commands[i]).filter(Boolean);if(e===String(en.Recent))return this.recentCommandIds.map(i=>this.commands[i]).filter(Boolean);const n=this.groupManager.getGroup(e);return n?n.commandIds.map(i=>this.commands[i]).filter(Boolean):[]}toggleFeaturedCommand(e){const n=new Set(this.featuredCommandIds);n.has(e)?n.delete(e):n.add(e),this.featuredCommandIds=n,this.settingsManager.updateSettings({featuredCommandIDs:Array.from(this.featuredCommandIds)})}addRecentCommand(e){this.recentCommandIds=[e,...this.recentCommandIds.filter(n=>n!==e)].slice(0,10)}filterCommands(e,n,i,o){let r=this.groupManager.getGroupSettings(o||en.All);if(o){const d=this.groupManager.getGroup(o);r=(d==null?void 0:d.filterSettings)||r}let a=this.getCommandsForGroup(o);const l=!!(r!=null&&r.ViewWOhotkeys)||!!(r!=null&&r.OnlyCustom)||!!(r!=null&&r.OnlyDuplicates)||(r==null?void 0:r.DisplayInternalModules)===!1;if(!e&&n.length===0&&!i&&!l)return r!=null&&r.FeaturedFirst?this.sortByFeaturedFirst(a):a;const c=e.toLowerCase(),u=n&&n.length>0||!!i;if(u&&(r!=null&&r.StrictModifierMatch))try{const d=Un.makeHotkeyKey({modifiers:n,key:i}),v=this.getCommandsByHotkeyKey(d);if(v.length){const g=new Set(v.map(p=>p.id));a=a.filter(p=>g.has(p.id))}}catch{}const m=a.filter(d=>{if(!r)return!0;const v=c.length===0||`${d.pluginName} ${d.name} ${d.cmdName}`.toLowerCase().includes(c)||r.DisplayIDs&&d.id.toLowerCase().includes(c),g=u?d.hotkeys.some(S=>this.hotkeyMatches(S,n,i,r.StrictModifierMatch||!1)):!0,p=r.ViewWOhotkeys?d.hotkeys.length>0:!0,_=r.DisplayInternalModules?!0:!d.isInternalModule,b=r.DisplaySystemShortcuts?!0:d.pluginName!=="System Shortcuts",C=r.OnlyCustom?d.hotkeys.some(S=>S.isCustom):!0,w=r.OnlyDuplicates?d.hotkeys.some(S=>this.hotkeyManager.isHotkeyDuplicate(d.id,S)):!0;return v&&g&&p&&_&&b&&C&&w});if(r!=null&&r.FeaturedFirst)return this.sortByFeaturedFirst(m);if(r!=null&&r.DisplaySystemShortcuts)try{const d=p=>`${xt(Gn(p.modifiers)).join(",")}|${Et(p.key||"")}`,v=new Set;for(const p of m)if(p.pluginName!=="System Shortcuts")for(const _ of p.hotkeys||[])v.add(d(_));return m.filter(p=>p.pluginName!=="System Shortcuts"?!0:!(p.hotkeys||[]).some(_=>v.has(d(_))))}catch{}return m}getInstalledPluginIDs(){const n=this.app.internalPlugins.getEnabledPlugins().map(r=>{var a;return((a=r.manifest)==null?void 0:a.id)||""}),o=Object.values(this.app.plugins.plugins).map(r=>{var a;return((a=r.manifest)==null?void 0:a.id)||""});return[...n,...o].filter(r=>r!=="")}commandMatchesHotkey(e,n,i,o){const{all:r}=this.hotkeyManager.getHotkeysForCommand(e);return r.some(a=>ao(a,n,i,{strictModifierMatch:o,allowKeyOnly:!0,platformize:!0}))}hotkeyMatches(e,n,i,o){return ao(e,n,i,{strictModifierMatch:o,allowKeyOnly:!0,platformize:!0})}getCommandsForGroup(e){if(!e||e===String(en.All))return Object.values(this.commands);const n=this.groupManager.getGroup(e);return n?(n.commandIds||[]).map(o=>this.commands[o]).filter(Boolean):[]}matchesGroup(e,n){if(!n)return!0;if(n===String(en.Featured))return this.featuredCommandIds.has(e.id);if(n===String(en.Recent))return this.recentCommandIds.includes(e.id);const i=this.groupManager.getGroup(n);return i?i.commandIds.includes(e.id):!0}sortByFeaturedFirst(e){return[...e].sort((n,i)=>{const o=this.featuredCommandIds.has(n.id),r=this.featuredCommandIds.has(i.id);return o&&!r?-1:!o&&r?1:0})}searchCommandsByName(e,n){const i=(e||"").trim().toLowerCase();if(!i)return[];const o=(n==null?void 0:n.excludeIds)||new Set,r=(n==null?void 0:n.limit)??20,a=[];for(const l of Object.values(this.commands)){if(o.has(l.id))continue;if(`${l.pluginName} ${l.name} ${l.cmdName} ${l.id}`.toLowerCase().includes(i)&&(a.push(l),a.length>=r))break}return a}refreshCommands(){this.loadCommands()}};As=new WeakMap,Ds=new WeakMap,ge(Un,"instance",null);let qi=Un;const ri=class ri{constructor(e){ge(this,"app");ge(this,"cmRef");this.app=e}attachCommandsManager(e){this.cmRef=e}static getInstance(e){return ri.instance||(ri.instance=new ri(e)),ri.instance}initialize(){}getCommandsIndex(){return this.cmRef?this.cmRef.getCommandsIndex():{}}getHotkeysForCommand(e){E.timeStart("HotkeyManager.getHotkeysForCommand");const n=this.cmRef;if(n){const d=n.getCommandsIndex()[e];if(d)return{all:d.hotkeys||[],default:d.defaultHotkeys||[],custom:d.customHotkeys||[]}}const i=this.app.hotkeyManager.getDefaultHotkeys(e)||[],o=this.app.hotkeyManager.customKeys[e]||[],r=(m,d)=>m.map(v=>({modifiers:Array.isArray(v.modifiers)?v.modifiers:typeof v.modifiers=="string"?v.modifiers.split(","):[],key:v.key||"",isCustom:d})),a=r(i,!1),l=r(o,!0),c=new Map;a.forEach(m=>{const d=this.hotkeyToUniqueKey(m);c.set(d,m)}),l.forEach(m=>{const d=this.hotkeyToUniqueKey(m);c.set(d,m)});const u=Array.from(c.values());return E.timeEnd("HotkeyManager.getHotkeysForCommand"),{all:u,default:a,custom:l}}hotkeyToUniqueKey(e){return`${[...e.modifiers].sort().join(",")}|${e.key}`}isHotkeyDuplicate(e,n){const i=this.cmRef;if(!i)return!1;const o=qi.makeHotkeyKey({modifiers:n.modifiers||[],key:n.key||""}),r=i.getCommandsByHotkeyKey(o);return r&&r.length>0?r.some(a=>a.id!==e):!1}commandMatchesHotkey(e,n,i){const{all:o}=this.getHotkeysForCommand(e);return o.some(r=>this.hotkeyMatches(r,n,i))}hotkeyMatches(e,n,i){return ao(e,n,i,{strictModifierMatch:!0,allowKeyOnly:!0,platformize:!0})}renderHotkey(e){return[...xt(Gn(e.modifiers)),e.key].join(" ")}searchHotkeys(e,n,i){const o=this.cmRef;if(o){const r=(e||"").toLowerCase();if(i||n!=null&&n.length){const l=qi.makeHotkeyKey({modifiers:n,key:i});return o.getCommandsByHotkeyKey(l).filter(u=>r?u.name.toLowerCase().includes(r)||u.id.toLowerCase().includes(r):!0)}const a=o.getCommandsIndex();return Object.values(a).filter(l=>r?l.name.toLowerCase().includes(r)||l.id.toLowerCase().includes(r):!0)}return[]}};ge(ri,"instance",null);let ps=ri;var Es,Ls,Ps,Ts,zs,Os;class Fr{constructor(e,n){ge(this,"hotkeyManager");ge(this,"visualKeyboardManager");ge(this,"recognizedModifiers",new Set(["Control","Shift","Alt","Meta","Mod"]));st(this,Es,G(""));st(this,Ls,G(Ye([])));st(this,Ps,G(""));st(this,Ts,G(null));st(this,zs,G(null));st(this,Os,Ce(()=>xt(this.activeModifiers)));this.hotkeyManager=ps.getInstance(e),this.visualKeyboardManager=n}get activeKey(){return s(re(this,Es))}set activeKey(e){y(re(this,Es),e,!0)}get activeModifiers(){return s(re(this,Ls))}set activeModifiers(e){y(re(this,Ls),e,!0)}get lastVKClickRaw(){return s(re(this,Ps))}set lastVKClickRaw(e){y(re(this,Ps),e,!0)}get lastPhysicalRaw(){return s(re(this,Ts))}set lastPhysicalRaw(e){y(re(this,Ts),e,!0)}setActiveKey(e){this.activeKey=e}clearActiveKey(){this.activeKey=""}get ActiveKey(){return this.activeKey}set ActiveKey(e){this.activeKey=e}get ActiveModifiers(){return this.activeModifiers}set ActiveModifiers(e){this.activeModifiers=Array.from(new Set(e))}get state(){return{activeKey:this.activeKey,activeModifiers:this.activeModifiers}}set state(e){this.activeKey=e.activeKey,this.activeModifiers=e.activeModifiers}reset(){this.activeKey="",this.activeModifiers=[]}handleKeyClick(e){this.lastVKClickRaw=e||"";const n=this.visualKeyboardManager.mapCodeToObsidianModifier(e);if(n&&this.isModifier(n)){this.toggleModifier(n);return}const i=this.normalizeKeyIdentifier(e);this.isModifier(i)?this.toggleModifier(i):this.activeKey=this.activeKey===i?"":i}handleKeyDown(e){if(E.debug("[keys] store.handleKeyDown",{key:e.key,code:e.code}),e.key==="Backspace"){if(this.activeKey!=="")this.activeKey="";else if(this.activeModifiers.length>0){const i=xt(this.activeModifiers);i.pop(),this.activeModifiers=i}E.debug("[keys] backspace applied",this.state);return}const n=e.code;this.handleKeyClick(n),E.debug("[keys] after handleKeyClick",this.state)}handlePhysicalKeyDown(e,n){if(E.debug("[keys] store.handlePhysicalKeyDown",{key:e.key,code:e.code}),this.lastPhysicalRaw={key:e.key||"",code:e.code||""},e.repeat){E.debug("[keys] ignored repeat keydown");return}if(ro()){const r=[];e.ctrlKey&&r.push(an("Control")),e.metaKey&&r.push(an("Meta")),e.altKey&&r.push(an("Alt")),e.shiftKey&&r.push("Shift"),this.activeModifiers=Array.from(new Set(r));const a=this.normalizeKeyIdentifier(e.code||e.key);n!=null&&n.inActiveView&&!this.isModifier(a)&&(this.activeKey===a?(this.activeKey="",E.debug("[keys] hold mode: cleared activeKey (toggle)",this.state)):(this.activeKey=a,E.debug("[keys] hold mode: set activeKey (keydown)",this.state))),E.debug("[keys] hold mode: modifiers updated",this.state);return}const i=this.visualKeyboardManager.mapCodeToObsidianModifier(e.code||e.key);if(i){const r=an(i),a=this.activeModifiers.includes(r);this.activeModifiers=a?this.activeModifiers.filter(l=>l!==r):[...this.activeModifiers,r],E.debug("[keys] toggled modifier",{m:r,on:!a,state:this.state});return}const o=this.normalizeKeyIdentifier(e.code||e.key);if(this.isModifier(o)){const r=an(o),a=this.activeModifiers.includes(r);this.activeModifiers=a?this.activeModifiers.filter(l=>l!==r):[...this.activeModifiers,r],E.debug("[keys] toggled modifier (normalized)",{m:r,on:!a,state:this.state});return}this.activeKey===o?(this.activeKey="",E.debug("[keys] cleared activeKey (toggle)",this.state)):(this.activeKey=o,E.debug("[keys] set activeKey (toggle)",this.state))}handlePhysicalKeyUp(e,n){if(E.debug("[keys] store.handlePhysicalKeyUp (toggle/chord)",{key:e.key,code:e.code}),ro()){const i=[];e.ctrlKey&&i.push(an("Control")),e.metaKey&&i.push(an("Meta")),e.altKey&&i.push(an("Alt")),e.shiftKey&&i.push("Shift"),this.activeModifiers=Array.from(new Set(i))}}isModifier(e){return this.recognizedModifiers.has(e)}toggleModifier(e){const n=an(e),i=new Set(this.activeModifiers);i.has(n)?i.delete(n):i.add(n),this.activeModifiers=Array.from(i)}normalizeKeyIdentifier(e){return{ControlLeft:"Control",ControlRight:"Control",AltLeft:"Alt",AltRight:"Alt",ShiftLeft:"Shift",ShiftRight:"Shift",MetaLeft:"Meta",MetaRight:"Meta"}[e]||e}getDisplayKey(){const e=this.visualKeyboardManager.keyStates[this.activeKey.toLowerCase()];return e?e.displayValue:this.activeKey.length===1?this.activeKey.toUpperCase():this.activeKey}getDevRawInputs(){return{vk:this.lastVKClickRaw,physical:this.lastPhysicalRaw,normalizedActiveKey:this.activeKey,normalizedActiveModifiers:this.activeModifiers}}recordPhysicalRaw(e){this.lastPhysicalRaw={key:e.key||"",code:e.code||""}}get _devLastCmd(){return s(re(this,zs))}set _devLastCmd(e){y(re(this,zs),e,!0)}devSetLastCommand(e){try{const n=(e.hotkeys||[]).map(o=>({modifiers:o.modifiers||[],key:o.key||""})),i=n.map(o=>({modifiers:xt(o.modifiers),key:(o.key||"").toLowerCase()}));this._devLastCmd={id:e.id,name:e.name,raw:n,normalized:i}}catch{this._devLastCmd={id:e.id,name:e.name,raw:[],normalized:[]}}}getDevLastCommand(){return this._devLastCmd}filterCommands(e){return this.hotkeyManager.searchHotkeys(e,this.activeModifiers,this.activeKey)}get sortedModifiers(){return s(re(this,Os))}set sortedModifiers(e){y(re(this,Os),e)}}Es=new WeakMap,Ls=new WeakMap,Ps=new WeakMap,Ts=new WeakMap,zs=new WeakMap,Os=new WeakMap;const fr=Math.min,Pi=Math.max,uo=Math.round,Ln=t=>({x:t,y:t}),cd={left:"right",right:"left",bottom:"top",top:"bottom"},ud={start:"end",end:"start"};function ma(t,e,n){return Pi(t,fr(e,n))}function Lo(t,e){return typeof t=="function"?t(e):t}function mi(t){return t.split("-")[0]}function Po(t){return t.split("-")[1]}function Hl(t){return t==="x"?"y":"x"}function Bl(t){return t==="y"?"height":"width"}const dd=new Set(["top","bottom"]);function ei(t){return dd.has(mi(t))?"y":"x"}function Wl(t){return Hl(ei(t))}function fd(t,e,n){n===void 0&&(n=!1);const i=Po(t),o=Wl(t),r=Bl(o);let a=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=fo(a)),[a,fo(a)]}function vd(t){const e=fo(t);return[vr(t),e,vr(e)]}function vr(t){return t.replace(/start|end/g,e=>ud[e])}const ha=["left","right"],ga=["right","left"],pd=["top","bottom"],md=["bottom","top"];function hd(t,e,n){switch(t){case"top":case"bottom":return n?e?ga:ha:e?ha:ga;case"left":case"right":return e?pd:md;default:return[]}}function gd(t,e,n,i){const o=Po(t);let r=hd(mi(t),n==="start",i);return o&&(r=r.map(a=>a+"-"+o),e&&(r=r.concat(r.map(vr)))),r}function fo(t){return t.replace(/left|right|bottom|top/g,e=>cd[e])}function yd(t){return{top:0,right:0,bottom:0,left:0,...t}}function _d(t){return typeof t!="number"?yd(t):{top:t,right:t,bottom:t,left:t}}function vo(t){const{x:e,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:e,right:e+i,bottom:n+o,x:e,y:n}}function ya(t,e,n){let{reference:i,floating:o}=t;const r=ei(e),a=Wl(e),l=Bl(a),c=mi(e),u=r==="y",m=i.x+i.width/2-o.width/2,d=i.y+i.height/2-o.height/2,v=i[l]/2-o[l]/2;let g;switch(c){case"top":g={x:m,y:i.y-o.height};break;case"bottom":g={x:m,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:d};break;case"left":g={x:i.x-o.width,y:d};break;default:g={x:i.x,y:i.y}}switch(Po(e)){case"start":g[a]-=v*(n&&u?-1:1);break;case"end":g[a]+=v*(n&&u?-1:1);break}return g}const bd=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:r=[],platform:a}=n,l=r.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:o}),{x:m,y:d}=ya(u,i,c),v=i,g={},p=0;for(let _=0;_<l.length;_++){const{name:b,fn:C}=l[_],{x:w,y:S,data:P,reset:L}=await C({x:m,y:d,initialPlacement:i,placement:v,strategy:o,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});m=w??m,d=S??d,g={...g,[b]:{...g[b],...P}},L&&p<=50&&(p++,typeof L=="object"&&(L.placement&&(v=L.placement),L.rects&&(u=L.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:o}):L.rects),{x:m,y:d}=ya(u,v,c)),_=-1)}return{x:m,y:d,placement:v,strategy:o,middlewareData:g}};async function Ul(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:r,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:m="viewport",elementContext:d="floating",altBoundary:v=!1,padding:g=0}=Lo(e,t),p=_d(g),b=l[v?d==="floating"?"reference":"floating":d],C=vo(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(b)))==null||n?b:b.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:u,rootBoundary:m,strategy:c})),w=d==="floating"?{x:i,y:o,width:a.floating.width,height:a.floating.height}:a.reference,S=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),P=await(r.isElement==null?void 0:r.isElement(S))?await(r.getScale==null?void 0:r.getScale(S))||{x:1,y:1}:{x:1,y:1},L=vo(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:S,strategy:c}):w);return{top:(C.top-L.top+p.top)/P.y,bottom:(L.bottom-C.bottom+p.bottom)/P.y,left:(C.left-L.left+p.left)/P.x,right:(L.right-C.right+p.right)/P.x}}const kd=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:o,middlewareData:r,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:m=!0,crossAxis:d=!0,fallbackPlacements:v,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:_=!0,...b}=Lo(t,e);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const C=mi(o),w=ei(l),S=mi(l)===l,P=await(c.isRTL==null?void 0:c.isRTL(u.floating)),L=v||(S||!_?[fo(l)]:vd(l)),x=p!=="none";!v&&x&&L.push(...gd(l,_,p,P));const A=[l,...L],R=await Ul(e,b),Z=[];let V=((i=r.flip)==null?void 0:i.overflows)||[];if(m&&Z.push(R[C]),d){const j=fd(o,a,P);Z.push(R[j[0]],R[j[1]])}if(V=[...V,{placement:o,overflows:Z}],!Z.every(j=>j<=0)){var oe,N;const j=(((oe=r.flip)==null?void 0:oe.index)||0)+1,K=A[j];if(K&&(!(d==="alignment"?w!==ei(K):!1)||V.every(X=>ei(X.placement)===w?X.overflows[0]>0:!0)))return{data:{index:j,overflows:V},reset:{placement:K}};let ne=(N=V.filter(D=>D.overflows[0]<=0).sort((D,X)=>D.overflows[1]-X.overflows[1])[0])==null?void 0:N.placement;if(!ne)switch(g){case"bestFit":{var I;const D=(I=V.filter(X=>{if(x){const ye=ei(X.placement);return ye===w||ye==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ye=>ye>0).reduce((ye,ve)=>ye+ve,0)]).sort((X,ye)=>X[1]-ye[1])[0])==null?void 0:I[0];D&&(ne=D);break}case"initialPlacement":ne=l;break}if(o!==ne)return{reset:{placement:ne}}}return{}}}},wd=new Set(["left","top"]);async function Sd(t,e){const{placement:n,platform:i,elements:o}=t,r=await(i.isRTL==null?void 0:i.isRTL(o.floating)),a=mi(n),l=Po(n),c=ei(n)==="y",u=wd.has(a)?-1:1,m=r&&c?-1:1,d=Lo(e,t);let{mainAxis:v,crossAxis:g,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof p=="number"&&(g=l==="end"?p*-1:p),c?{x:g*m,y:v*u}:{x:v*u,y:g*m}}const Md=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:o,y:r,placement:a,middlewareData:l}=e,c=await Sd(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:o+c.x,y:r+c.y,data:{...c,placement:a}}}}},Cd=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:o}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:C,y:w}=b;return{x:C,y:w}}},...c}=Lo(t,e),u={x:n,y:i},m=await Ul(e,c),d=ei(mi(o)),v=Hl(d);let g=u[v],p=u[d];if(r){const b=v==="y"?"top":"left",C=v==="y"?"bottom":"right",w=g+m[b],S=g-m[C];g=ma(w,g,S)}if(a){const b=d==="y"?"top":"left",C=d==="y"?"bottom":"right",w=p+m[b],S=p-m[C];p=ma(w,p,S)}const _=l.fn({...e,[v]:g,[d]:p});return{..._,data:{x:_.x-n,y:_.y-i,enabled:{[v]:r,[d]:a}}}}}};function To(){return typeof window<"u"}function Ui(t){return jl(t)?(t.nodeName||"").toLowerCase():"#document"}function dn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Vn(t){var e;return(e=(jl(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function jl(t){return To()?t instanceof Node||t instanceof dn(t).Node:!1}function wn(t){return To()?t instanceof Element||t instanceof dn(t).Element:!1}function On(t){return To()?t instanceof HTMLElement||t instanceof dn(t).HTMLElement:!1}function _a(t){return!To()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof dn(t).ShadowRoot}const xd=new Set(["inline","contents"]);function Ns(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=Sn(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!xd.has(o)}const Ad=new Set(["table","td","th"]);function Dd(t){return Ad.has(Ui(t))}const Ed=[":popover-open",":modal"];function zo(t){return Ed.some(e=>{try{return t.matches(e)}catch{return!1}})}const Ld=["transform","translate","scale","rotate","perspective"],Pd=["transform","translate","scale","rotate","perspective","filter"],Td=["paint","layout","strict","content"];function Ir(t){const e=$r(),n=wn(t)?Sn(t):t;return Ld.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Pd.some(i=>(n.willChange||"").includes(i))||Td.some(i=>(n.contain||"").includes(i))}function zd(t){let e=ni(t);for(;On(e)&&!Hi(e);){if(Ir(e))return e;if(zo(e))return null;e=ni(e)}return null}function $r(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Od=new Set(["html","body","#document"]);function Hi(t){return Od.has(Ui(t))}function Sn(t){return dn(t).getComputedStyle(t)}function Oo(t){return wn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ni(t){if(Ui(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_a(t)&&t.host||Vn(t);return _a(e)?e.host:e}function Ql(t){const e=ni(t);return Hi(e)?t.ownerDocument?t.ownerDocument.body:t.body:On(e)&&Ns(e)?e:Ql(e)}function Yl(t,e,n){var i;e===void 0&&(e=[]);const o=Ql(t),r=o===((i=t.ownerDocument)==null?void 0:i.body),a=dn(o);return r?(pr(a),e.concat(a,a.visualViewport||[],Ns(o)?o:[],[])):e.concat(o,Yl(o,[]))}function pr(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Xl(t){const e=Sn(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=On(t),r=o?t.offsetWidth:n,a=o?t.offsetHeight:i,l=uo(n)!==r||uo(i)!==a;return l&&(n=r,i=a),{width:n,height:i,$:l}}function Zl(t){return wn(t)?t:t.contextElement}function Ti(t){const e=Zl(t);if(!On(e))return Ln(1);const n=e.getBoundingClientRect(),{width:i,height:o,$:r}=Xl(e);let a=(r?uo(n.width):n.width)/i,l=(r?uo(n.height):n.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Kd=Ln(0);function Jl(t){const e=dn(t);return!$r()||!e.visualViewport?Kd:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Fd(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==dn(t)?!1:e}function ms(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),r=Zl(t);let a=Ln(1);e&&(i?wn(i)&&(a=Ti(i)):a=Ti(t));const l=Fd(r,n,i)?Jl(r):Ln(0);let c=(o.left+l.x)/a.x,u=(o.top+l.y)/a.y,m=o.width/a.x,d=o.height/a.y;if(r){const v=dn(r),g=i&&wn(i)?dn(i):i;let p=v,_=pr(p);for(;_&&i&&g!==p;){const b=Ti(_),C=_.getBoundingClientRect(),w=Sn(_),S=C.left+(_.clientLeft+parseFloat(w.paddingLeft))*b.x,P=C.top+(_.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,m*=b.x,d*=b.y,c+=S,u+=P,p=dn(_),_=pr(p)}}return vo({width:m,height:d,x:c,y:u})}function Ko(t,e){const n=Oo(t).scrollLeft;return e?e.left+n:ms(Vn(t)).left+n}function ec(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-Ko(t,n),o=n.top+e.scrollTop;return{x:i,y:o}}function Id(t){let{elements:e,rect:n,offsetParent:i,strategy:o}=t;const r=o==="fixed",a=Vn(i),l=e?zo(e.floating):!1;if(i===a||l&&r)return n;let c={scrollLeft:0,scrollTop:0},u=Ln(1);const m=Ln(0),d=On(i);if((d||!d&&!r)&&((Ui(i)!=="body"||Ns(a))&&(c=Oo(i)),On(i))){const g=ms(i);u=Ti(i),m.x=g.x+i.clientLeft,m.y=g.y+i.clientTop}const v=a&&!d&&!r?ec(a,c):Ln(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+m.x+v.x,y:n.y*u.y-c.scrollTop*u.y+m.y+v.y}}function $d(t){return Array.from(t.getClientRects())}function Gd(t){const e=Vn(t),n=Oo(t),i=t.ownerDocument.body,o=Pi(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=Pi(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-n.scrollLeft+Ko(t);const l=-n.scrollTop;return Sn(i).direction==="rtl"&&(a+=Pi(e.clientWidth,i.clientWidth)-o),{width:o,height:r,x:a,y:l}}const ba=25;function Nd(t,e){const n=dn(t),i=Vn(t),o=n.visualViewport;let r=i.clientWidth,a=i.clientHeight,l=0,c=0;if(o){r=o.width,a=o.height;const m=$r();(!m||m&&e==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}const u=Ko(i);if(u<=0){const m=i.ownerDocument,d=m.body,v=getComputedStyle(d),g=m.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,p=Math.abs(i.clientWidth-d.clientWidth-g);p<=ba&&(r-=p)}else u<=ba&&(r+=u);return{width:r,height:a,x:l,y:c}}const Rd=new Set(["absolute","fixed"]);function Vd(t,e){const n=ms(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,r=On(t)?Ti(t):Ln(1),a=t.clientWidth*r.x,l=t.clientHeight*r.y,c=o*r.x,u=i*r.y;return{width:a,height:l,x:c,y:u}}function ka(t,e,n){let i;if(e==="viewport")i=Nd(t,n);else if(e==="document")i=Gd(Vn(t));else if(wn(e))i=Vd(e,n);else{const o=Jl(t);i={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return vo(i)}function tc(t,e){const n=ni(t);return n===e||!wn(n)||Hi(n)?!1:Sn(n).position==="fixed"||tc(n,e)}function qd(t,e){const n=e.get(t);if(n)return n;let i=Yl(t,[]).filter(l=>wn(l)&&Ui(l)!=="body"),o=null;const r=Sn(t).position==="fixed";let a=r?ni(t):t;for(;wn(a)&&!Hi(a);){const l=Sn(a),c=Ir(a);!c&&l.position==="fixed"&&(o=null),(r?!c&&!o:!c&&l.position==="static"&&!!o&&Rd.has(o.position)||Ns(a)&&!c&&tc(t,a))?i=i.filter(m=>m!==a):o=l,a=ni(a)}return e.set(t,i),i}function Hd(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const a=[...n==="clippingAncestors"?zo(e)?[]:qd(e,this._c):[].concat(n),i],l=a[0],c=a.reduce((u,m)=>{const d=ka(e,m,o);return u.top=Pi(d.top,u.top),u.right=fr(d.right,u.right),u.bottom=fr(d.bottom,u.bottom),u.left=Pi(d.left,u.left),u},ka(e,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Bd(t){const{width:e,height:n}=Xl(t);return{width:e,height:n}}function Wd(t,e,n){const i=On(e),o=Vn(e),r=n==="fixed",a=ms(t,!0,r,e);let l={scrollLeft:0,scrollTop:0};const c=Ln(0);function u(){c.x=Ko(o)}if(i||!i&&!r)if((Ui(e)!=="body"||Ns(o))&&(l=Oo(e)),i){const g=ms(e,!0,r,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else o&&u();r&&!i&&o&&u();const m=o&&!i&&!r?ec(o,l):Ln(0),d=a.left+l.scrollLeft-c.x-m.x,v=a.top+l.scrollTop-c.y-m.y;return{x:d,y:v,width:a.width,height:a.height}}function jo(t){return Sn(t).position==="static"}function wa(t,e){if(!On(t)||Sn(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Vn(t)===n&&(n=n.ownerDocument.body),n}function nc(t,e){const n=dn(t);if(zo(t))return n;if(!On(t)){let o=ni(t);for(;o&&!Hi(o);){if(wn(o)&&!jo(o))return o;o=ni(o)}return n}let i=wa(t,e);for(;i&&Dd(i)&&jo(i);)i=wa(i,e);return i&&Hi(i)&&jo(i)&&!Ir(i)?n:i||zd(t)||n}const Ud=async function(t){const e=this.getOffsetParent||nc,n=this.getDimensions,i=await n(t.floating);return{reference:Wd(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function jd(t){return Sn(t).direction==="rtl"}const Qd={convertOffsetParentRelativeRectToViewportRelativeRect:Id,getDocumentElement:Vn,getClippingRect:Hd,getOffsetParent:nc,getElementRects:Ud,getClientRects:$d,getDimensions:Bd,getScale:Ti,isElement:wn,isRTL:jd},Fo=Md,Io=Cd,$o=kd,Yd=(t,e,n)=>{const i=new Map,o={platform:Qd,...n},r={...o.platform,_c:i};return bd(t,e,{...o,platform:r})};let Xd=0;function Zd(){return Math.random().toString(36).substring(2,9)+Xd++}function Qo(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join(" ")}function Jd(){const t=new Map;return{emit(e,n){const i=t.get(e);if(i)for(const o of i)o(n)},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var i;t.set(e,((i=t.get(e))==null?void 0:i.filter(o=>o!==n))||[])}}}function ic(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Sa(t,e){const n=ic(t);return Math.round(e*n)/n}function ef(){}function Go(t={}){const e=Ye(t.elements??{}),n=Ce(()=>Si(t.placement,"bottom")),i=Ce(()=>Si(t.strategy,"absolute")),o=Ce(()=>Si(t.middleware,()=>[],!0)),r=Ce(()=>Si(t.transform,!0)),a=Ce(()=>Si(t.open,!0)),l=Ce(()=>Si(t.onOpenChange,ef)),c=Ce(()=>t.whileElementsMounted),u=Ce(()=>t.nodeId),m=Ce(()=>{const C={position:s(i),left:"0px",top:"0px"};if(!e.floating)return Qo(C);const w=Sa(e.floating,p.x),S=Sa(e.floating,p.y);return s(r)?Qo({...C,transform:`translate(${w}px, ${S}px)`,...ic(e.floating)>=1.5&&{willChange:"transform"}}):Qo({position:s(i),left:`${w}px`,top:`${S}px`})}),d=Jd(),v=Ye({}),g=(C,w,S)=>{v.openEvent=C?w:void 0,d.emit("openchange",{open:C,event:w,reason:S}),s(l)(C,w,S)},p=Ye({x:0,y:0,strategy:s(i),placement:s(n),middlewareData:{},isPositioned:!1}),_=Ye({data:v,events:d,elements:e,onOpenChange:g,floatingId:Zd(),get nodeId(){return s(u)},get x(){return p.x},get y(){return p.y},get placement(){return p.placement},get strategy(){return p.strategy},get middlewareData(){return p.middlewareData},get isPositioned(){return p.isPositioned},get open(){return s(a)}}),b=async()=>{if(!e.floating||!e.reference)return;const C={placement:s(n),strategy:s(i),middleware:s(o)},w=await Yd(e.reference,e.floating,C);p.x=w.x,p.y=w.y,p.placement=w.placement,p.strategy=w.strategy,p.middlewareData=w.middlewareData,p.isPositioned=!0};return es(()=>{!t.elements||!t.elements.reference||(e.reference=t.elements.reference)}),es(()=>{!t.elements||!t.elements.floating||(e.floating=t.elements.floating)}),es(()=>{s(a)||!p.isPositioned||(p.isPositioned=!1)}),es(()=>{if(!(!e.floating||!e.reference)){if(!s(c)){b();return}return s(c)(e.reference,e.floating,b)}}),{update:b,context:_,elements:e,get x(){return p.x},get y(){return p.y},get placement(){return p.placement},get strategy(){return p.strategy},get middlewareData(){return p.middlewareData},get isPositioned(){return p.isPositioned},get open(){return s(a)},get floatingStyles(){return s(m)}}}class tf{constructor(){ge(this,"groups",new Map);ge(this,"GRACE_PERIOD",500)}shouldShowImmediately(e){const n=this.groups.get(e);return!n||!n.activeGroup?!1:Date.now()-n.lastShowTime<this.GRACE_PERIOD}onTooltipShow(e){const n=this.groups.get(e)||{activeGroup:null,lastShowTime:0,groupTimeout:null};n.groupTimeout&&(clearTimeout(n.groupTimeout),n.groupTimeout=null),n.activeGroup=e,n.lastShowTime=Date.now(),this.groups.set(e,n)}onTooltipHide(e){const n=this.groups.get(e);n&&(n.groupTimeout&&clearTimeout(n.groupTimeout),n.groupTimeout=setTimeout(()=>{n.activeGroup=null,n.lastShowTime=0},this.GRACE_PERIOD),this.groups.set(e,n))}dispose(){for(const e of this.groups.values())e.groupTimeout&&clearTimeout(e.groupTimeout);this.groups.clear()}}const Ws=new tf,mr={ACTION_ICONS:"action-icons",KEYBOARD_KEYS:"keyboard-keys"};var nf=T('<div role="tooltip" aria-hidden="false"> <div class="floating-arrow svelte-m3ugo3"></div></div>'),sf=T('<span class="floating-tooltip-trigger svelte-m3ugo3"><!></span> <!>',1);function mn(t,e){sn(e,!0);const n=Ae(e,"placement",3,"top"),i=Ae(e,"delay",3,500),o=Ae(e,"disabled",3,!1),r=Ae(e,"maxWidth",3,"300px"),a=Ae(e,"class",3,""),l=Ae(e,"style",3,"");let c=G(!1),u=null,m=null,d=G(null);const v=Go({placement:n(),middleware:[Fo(8),$o(),Io({padding:8})]});function g(){if(o())return;_();const oe=e.group&&Ws.shouldShowImmediately(e.group)?0:i();oe>0?u=setTimeout(()=>{y(c,!0),setTimeout(()=>{v.elements.floating&&(v.elements.floating.classList.remove("exiting"),v.elements.floating.classList.add("tooltip-visible"))},10),e.group&&Ws.onTooltipShow(e.group)},oe):(y(c,!0),setTimeout(()=>{v.elements.floating&&(v.elements.floating.classList.remove("exiting"),v.elements.floating.classList.add("tooltip-visible"))},10),e.group&&Ws.onTooltipShow(e.group))}function p(){_(),v.elements.floating&&(v.elements.floating.classList.remove("tooltip-visible"),v.elements.floating.classList.add("exiting")),m=setTimeout(()=>{y(c,!1),e.group&&Ws.onTooltipHide(e.group),setTimeout(()=>{v.elements.floating&&(v.elements.floating.classList.remove("exiting"),v.elements.floating.classList.remove("tooltip-visible"))},10)},100)}function _(){u&&(clearTimeout(u),u=null),m&&(clearTimeout(m),m=null)}function b(){g()}function C(){p()}function w(){g()}function S(){p()}const P=Ce(()=>()=>{var K;const V=(K=v.middlewareData)==null?void 0:K.arrow;if(!V)return{display:"none"};const{x:oe,y:N}=V,I=v.placement.split("-")[0],j={top:"bottom",right:"left",bottom:"top",left:"right"}[I];return{left:oe!=null?`${oe}px`:"",top:N!=null?`${N}px`:"",right:"",bottom:"",[j]:"-4px"}});var L=sf(),x=De(L),A=h(x);rr(A,()=>e.children??An),un(x,V=>v.elements.reference=V,()=>{var V;return(V=v==null?void 0:v.elements)==null?void 0:V.reference});var R=k(x,2);{var Z=V=>{var oe=nf();let N;var I=h(oe),j=k(I);let K;un(j,ne=>y(d,ne),()=>s(d)),un(oe,ne=>v.elements.floating=ne,()=>{var ne;return(ne=v==null?void 0:v.elements)==null?void 0:ne.floating}),B((ne,D,X)=>{N=cn(oe,v.floatingStyles,N,ne),Me(oe,1,`floating floating-tooltip ${a()??""}`,"svelte-m3ugo3"),ae(I,`${e.content??""} `),fe(j,"data-side",D),K=cn(j,"",K,X)},[()=>({"max-width":r()}),()=>v.placement.split("-")[0],()=>({left:s(P)().left,top:s(P)().top,right:s(P)().right,bottom:s(P)().bottom})]),$e("mouseenter",oe,()=>_()),$e("mouseleave",oe,p),M(V,oe)};W(R,V=>{s(c)&&e.content&&V(Z)})}B(()=>cn(x,l())),$e("mouseenter",x,b),$e("mouseleave",x,C),$e("focus",x,w),$e("blur",x,S),M(t,L),on()}var of=T('<button aria-label="Empty key" disabled></button>'),rf=(t,e,n)=>e(n()),af=T("<button> </button>"),lf=(t,e,n)=>e(n()),cf=T("<button> </button>");function uf(t,e){sn(e,!0);const n=Ae(e,"key",19,()=>({label:"",unicode:"",width:1,height:1,type:"empty"})),i=Ae(e,"maxWeightSteps",3,5),o=ln("visualKeyboardManager"),r=ln("activeKeysStore"),a=ln("isPhysicalListenerActive"),l=Ce(()=>o.getKeyState(n())),c=Ce(()=>s(l).displayValue),u=Ce(Yu),m=Ce(()=>(()=>{if(!s(u)||s(c)==="empty"||!n().code)return"";const K=s(l).weight||0;let ne=s(c);return K>0?ne+=` • ${K} command${K>1?"s":""}`:ne+=" • No commands assigned",ne})()),d=Ce(()=>n().width||1),v=Ce(()=>n().height||1);function g(K){return`span ${Math.max(1,Math.round(K*4))}`}function p(K){return`span ${Math.max(1,Math.round(K))}`}function _(K){const D=Math.max(...Object.values(o.keyStates).map(X=>X.weight||0))/i();return Math.min(Math.floor(K/D)+1,i())}function b(K){if(!K)return 0;const ne=10,D=(100-ne)/Math.max(1,i()-1);return Math.min(Math.round(ne+(K-1)*D),100)}function C(K){const ne=K.code||K.label||"";(async()=>{const{default:D}=await Promise.resolve().then(()=>td);D.debug("Clicked key:",ne)})(),r.handleKeyClick(ne),o.updateVisualState(r.activeKey,r.activeModifiers)}let w=G(!1),S=G(!1),P=G(""),L=null,x=null;function A(){s(w)||(y(P,r.ActiveKey,!0),x=K=>{(K.key==="Alt"||K.key==="AltGraph")&&R(!0)},window.addEventListener("keyup",x)),y(w,!0),r.ActiveKey=n().code||n().label||""}function R(K=!0){K?r.ActiveKey=s(P):(r.clearActiveKey(),y(P,"")),y(w,!1),x&&(window.removeEventListener("keyup",x),x=null)}function Z(K){if(y(S,!0),!o.mapCodeToObsidianModifier(n().code||n().label||"")){if(a!=null&&a())return;K.altKey&&A(),L=D=>{a!=null&&a()||s(S)&&(D.key==="Alt"||D.key==="AltGraph")&&A()},window.addEventListener("keydown",L,!0)}}function V(){y(S,!1),s(w)&&R(!0),L&&(window.removeEventListener("keydown",L,!0),L=null)}var oe=et(),N=De(oe);{var I=K=>{var ne=of();let D;B((X,ye)=>{D=Me(ne,1,"kb-layout-key svelte-qh98tu",null,D,X),cn(ne,ye)},[()=>({empty:s(l).state==="empty"}),()=>`grid-row: ${p(s(v))}; grid-column: ${g(s(d))};`]),M(K,ne)},j=K=>{var ne=et(),D=De(ne);{var X=ve=>{{let _e=Ce(()=>`grid-row: ${p(s(v))}; grid-column: ${g(s(d))}; display: flex; align-items: center; justify-content: center;`);mn(ve,{get content(){return s(m)},placement:"top",delay:500,get disabled(){return s(w)},get group(){return mr.KEYBOARD_KEYS},get style(){return s(_e)},children:(ze,Ke)=>{var tt=af();let ot;tt.__click=[rf,C,n];var Lt=h(tt);B((Ut,Mt,Ot)=>{ot=Me(tt,1,"kb-layout-key svelte-qh98tu",null,ot,Ut),fe(tt,"data-key-id",n().code||s(c)),fe(tt,"data-weight",Mt),cn(tt,Ot),ae(Lt,s(c))},[()=>({"is-active":s(l).state==="active","is-hover":s(l).state==="hover","has-hotkey":s(l).state==="possible","small-text":n().smallText}),()=>s(l).weight&&_(s(l).weight)?_(s(l).weight):0,()=>`${s(l).state==="active"?"background-color: var(--interactive-accent);":(s(l).state==="inactive"||s(l).state==="possible")&&s(l).weight?`background-color: rgb(from var(--color-red) r g b / ${b(_(s(l).weight))}%);`:""} width: 100%; height: 100%;`]),$e("mouseenter",tt,Z),$e("mouseleave",tt,V),M(ze,tt)},$$slots:{default:!0}})}},ye=ve=>{var _e=cf();let ze;_e.__click=[lf,C,n];var Ke=h(_e);B((tt,ot,Lt)=>{ze=Me(_e,1,"kb-layout-key svelte-qh98tu",null,ze,tt),fe(_e,"data-key-id",n().code||s(c)),fe(_e,"data-weight",ot),cn(_e,Lt),ae(Ke,s(c))},[()=>({"is-active":s(l).state==="active","is-hover":s(l).state==="hover","has-hotkey":s(l).state==="possible","small-text":n().smallText}),()=>s(l).weight&&_(s(l).weight)?_(s(l).weight):0,()=>`grid-row: ${p(s(v))}; grid-column: ${g(s(d))}; ${s(l).state==="active"?"background-color: var(--interactive-accent);":(s(l).state==="inactive"||s(l).state==="possible")&&s(l).weight?`background-color: rgb(from var(--color-red) r g b / ${b(_(s(l).weight))}%);`:""}`]),$e("mouseenter",_e,Z),$e("mouseleave",_e,V),M(ve,_e)};W(D,ve=>{s(u)&&s(m)?ve(X):ve(ye,!1)})}M(K,ne)};W(N,K=>{s(c)==="empty"?K(I):K(j,!1)})}M(t,oe),on()}Mn(["click"]);var df=(t,e)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e())},ff=T('<div role="menu" tabindex="-1" aria-hidden="false"><!></div>'),vf=T('<div role="button" tabindex="0" class="floating-dropdown-trigger svelte-1vb3i4m"><!></div> <!>',1);function hr(t,e){sn(e,!0);let n=Ae(e,"open",15,!1),i=Ae(e,"placement",3,"bottom-start"),o=Ae(e,"minWidth",3,"220px"),r=Ae(e,"maxWidth",3,"none"),a=Ae(e,"class",3,""),l=Ae(e,"hoverTrigger",3,!1),c=Ae(e,"hoverDelay",3,200);const u=Wu();let m=null,d=null;const v=Go({placement:i(),middleware:[Fo(8),$o(),Io({padding:8})]});function g(I){if(!n())return;const j=I.target,K=v.elements.reference,ne=v.elements.floating;K&&ne&&K instanceof HTMLElement&&ne instanceof HTMLElement&&!K.contains(j)&&!ne.contains(j)&&(x(),u("clickOutside",{event:I}),u("close"))}function p(){if(l())return;n()?(x(),u("close")):(n(!0),L(),u("open"))}function _(){l()&&(S(),c()>0?d=setTimeout(()=>{n(!0),L(),u("open")},c()):(n(!0),L(),u("open")))}function b(){l()&&(S(),d=setTimeout(()=>{x(),u("close")},100))}function C(){l()&&S()}function w(){l()&&(S(),d=setTimeout(()=>{x(),u("close")},100))}function S(){d&&(clearTimeout(d),d=null)}function P(I){I.key==="Escape"&&n()&&(I.preventDefault(),I.stopPropagation(),x(),u("close"))}function L(){A(),setTimeout(()=>{v.elements.floating&&(v.elements.floating.classList.remove("dropdown-exiting"),v.elements.floating.classList.add("dropdown-visible"))},10),m=setTimeout(()=>{},200)}function x(){A(),v.elements.floating&&(v.elements.floating.classList.remove("dropdown-visible"),v.elements.floating.classList.add("dropdown-exiting")),m=setTimeout(()=>{n(!1),setTimeout(()=>{v.elements.floating&&(v.elements.floating.classList.remove("dropdown-exiting"),v.elements.floating.classList.remove("dropdown-visible"))},10)},150)}function A(){m&&(clearTimeout(m),m=null)}Dt(()=>{if(n())return document.addEventListener("click",g,{capture:!0}),document.addEventListener("keydown",P),()=>{document.removeEventListener("click",g,{capture:!0}),document.removeEventListener("keydown",P)}});var R=vf(),Z=De(R);Z.__click=p,Z.__keydown=[df,p];var V=h(Z);rr(V,()=>e.trigger??An),un(Z,I=>v.elements.reference=I,()=>{var I;return(I=v==null?void 0:v.elements)==null?void 0:I.reference});var oe=k(Z,2);{var N=I=>{var j=ff();let K;var ne=h(j);rr(ne,()=>e.content??An),un(j,D=>v.elements.floating=D,()=>{var D;return(D=v==null?void 0:v.elements)==null?void 0:D.floating}),B(D=>{K=cn(j,v.isPositioned?v.floatingStyles:"position: absolute; top: 0; left: 0; z-index: 200000;",K,D),Me(j,1,`floating floating-dropdown ${a()??""}`,"svelte-1vb3i4m"),fe(j,"data-placement",v.placement)},[()=>({"min-width":o(),"max-width":r()})]),$e("mouseenter",j,C),$e("mouseleave",j,w),M(I,j)};W(oe,I=>{n()&&I(N)})}$e("mouseenter",Z,_),$e("mouseleave",Z,b),M(t,R),on()}Mn(["click","keydown"]);jc();/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const pf={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var mf=xu("<svg><!><!></svg>");function Vt(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]),i=zt(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);sn(e,!1);let o=Ae(e,"name",8,void 0),r=Ae(e,"color",8,"currentColor"),a=Ae(e,"size",8,24),l=Ae(e,"strokeWidth",8,2),c=Ae(e,"absoluteStrokeWidth",8,!1),u=Ae(e,"iconNode",24,()=>[]);const m=(...p)=>p.filter((_,b,C)=>!!_&&C.indexOf(_)===b).join(" ");Gu();var d=mf();ia(d,(p,_)=>({...pf,...i,width:a(),height:a(),stroke:r(),"stroke-width":p,class:_}),[()=>(Ai(c()),Ai(l()),Ai(a()),kn(()=>c()?Number(l())*24/Number(a()):l())),()=>(Ai(o()),Ai(n),kn(()=>m("lucide-icon","lucide",o()?`lucide-${o()}`:"",n.class)))]);var v=h(d);at(v,1,u,Nt,(p,_)=>{var b=Ce(()=>bc(s(_),2));let C=()=>s(b)[0],w=()=>s(b)[1];var S=et(),P=De(S);Lu(P,C,!0,(L,x)=>{ia(L,()=>({...w()}))}),M(p,S)});var g=k(v);Ft(g,e,"default",{}),M(t,d),on()}function hf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"m6 9 6 6 6-6"}]];Vt(t,Rt({name:"chevron-down"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function sc(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["circle",{cx:"12",cy:"12",r:"10"}],["circle",{cx:"12",cy:"12",r:"1"}]];Vt(t,Rt({name:"circle-dot"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function gf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M10 2v2"}],["path",{d:"M14 2v2"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1"}],["path",{d:"M6 2v2"}]];Vt(t,Rt({name:"coffee"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function Ma(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M12 10v6"}],["path",{d:"M9 13h6"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"}]];Vt(t,Rt({name:"folder-plus"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function yf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]];Vt(t,Rt({name:"funnel"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function _f(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"}],["path",{d:"M9 18c-4.51 2-5-2-7-2"}]];Vt(t,Rt({name:"github"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function xi(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];Vt(t,Rt({name:"info"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function bf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M13 21h8"}],["path",{d:"m15 5 4 4"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];Vt(t,Rt({name:"pencil-line"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function is(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M12 17v5"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"}]];Vt(t,Rt({name:"pin"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function Us(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];Vt(t,Rt({name:"plus"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function kf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];Vt(t,Rt({name:"refresh-cw"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function ss(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];Vt(t,Rt({name:"rotate-ccw"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function wf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];Vt(t,Rt({name:"save"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function Sf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];Vt(t,Rt({name:"search"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function Mf(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915"}],["circle",{cx:"12",cy:"12",r:"3"}]];Vt(t,Rt({name:"settings"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function Ca(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"}]];Vt(t,Rt({name:"star"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}function hs(t,e){const n=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.536.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Vt(t,Rt({name:"x"},()=>n,{get iconNode(){return i},children:(o,r)=>{var a=et(),l=De(a);Ft(l,e,"default",{}),M(o,a)},$$slots:{default:!0}}))}var Cf=(t,e,n)=>{y(e,!s(e)),n.updateSettings({keyboardCollapsed:s(e)})},xf=(t,e)=>y(e,s(e)==="filtered"?"all":"filtered",!0),Af=T('<button class="scope-toggle svelte-1ayvfeq" aria-label="Toggle heatmap scope"><span class="scope-label svelte-1ayvfeq">Show:</span> <span class="scope-value svelte-1ayvfeq"> </span></button>'),Df=T('<button class="dev-gear svelte-1ayvfeq" aria-haspopup="true" title="Developer options"><!></button>'),Ef=(t,e)=>{const n=t.currentTarget.checked;e.updateSettings({devLoggingEnabled:n})},Lf=(t,e)=>{const n=t.currentTarget.checked;e.updateSettings({useBakedKeyNames:n})},Pf=(t,e)=>y(e,!s(e)),Tf=(t,e)=>{const n=t.currentTarget.value;e.updateSettings({emulatedOS:n})},zf=T('<div role="menu"><div class="dev-item svelte-1ayvfeq"><label><input type="checkbox"/> <span>Dev logging</span></label></div> <div class="dev-item svelte-1ayvfeq"><label><input type="checkbox"/> <span>Use baked key names</span></label></div> <div class="dev-item svelte-1ayvfeq"><button class="link svelte-1ayvfeq"> </button></div> <div class="dev-item svelte-1ayvfeq"><label class="inline svelte-1ayvfeq" for="kbd-emu-os-select">Emulated OS:</label> <select id="kbd-emu-os-select" class="svelte-1ayvfeq"><option>None</option><option>Windows</option><option>macOS</option><option>Linux</option></select></div></div>'),Of=(t,e,n)=>{y(e,!s(e)),n.updateSettings({pinKeyboardPanel:s(e)})},Kf=()=>window.open("https://github.com/cogscides/obsidian-keyboard-analyzer","_blank"),Ff=()=>window.open("https://ko-fi.com/S6S5E6K74","_blank"),If=T('<div class="dev-row svelte-1ayvfeq"><span class="k svelte-1ayvfeq">Raw VK key:</span> <span class="v svelte-1ayvfeq"> </span></div> <div class="dev-row svelte-1ayvfeq"><span class="k svelte-1ayvfeq">Raw physical:</span> <span class="v svelte-1ayvfeq"> </span></div>',1),$f=T('<div class="dev-inspector svelte-1ayvfeq" aria-live="polite"><div class="dev-row svelte-1ayvfeq"><span class="k svelte-1ayvfeq">Active key:</span><span class="v svelte-1ayvfeq"> </span></div> <div class="dev-row svelte-1ayvfeq"><span class="k svelte-1ayvfeq">Modifiers:</span><span class="v svelte-1ayvfeq"> </span></div> <!></div>'),Gf=T("<div></div>"),Nf=T('<div class="keyboard-surface svelte-1ayvfeq"><div id="keyboard-layout" class="svelte-1ayvfeq"></div></div>'),Rf=T('<div><div class="keyboard-toolbar svelte-1ayvfeq" role="toolbar" aria-label="Keyboard controls"><div class="toolbar-left svelte-1ayvfeq"><button class="panel-toggle svelte-1ayvfeq"><span>⌄</span> <span class="toggle-label svelte-1ayvfeq">Keyboard</span></button> <!></div> <div class="toolbar-right svelte-1ayvfeq"><!> <button class="pin-toggle svelte-1ayvfeq"><!> <span class="pin-label"> </span></button> <button class="github-badge svelte-1ayvfeq" aria-label="GitHub repository" title="Open GitHub repository"><!> <span class="sr-only">GitHub</span></button> <button class="donation-badge svelte-1ayvfeq" aria-label="Donate" title="Support development"><div style="padding-right: 6px;"><!></div> Donate</button></div></div> <div class="panel-content svelte-1ayvfeq"><!> <!></div></div>');function Vf(t,e){sn(e,!0);const n=Ae(e,"visibleCommands",19,()=>[]),i=Ae(e,"strictModifierMatch",3,!1),o=Ae(e,"selectedGroupID",3,""),r=ln("keyboard-analyzer-plugin"),a=ln("visualKeyboardManager"),l=ln("activeKeysStore"),c=r.settingsManager,u=r.commandsManager,m=Ye(a.layout);function d(Te){return Te.rows.reduce((je,Ct)=>{const lt=Ct.reduce((ee,le)=>ee+(le.width||1),0);return Math.max(je,lt)},0)*4}Dt(()=>{const Te=s(C)==="all"?u.getCommandsForGroup(en.All):n();a.calculateAndAssignWeights(Te,l.ActiveModifiers,l.ActiveKey,i())});const v=m.sections.map(Te=>`${Te.gridRatio}fr`).join(" "),g=`'${m.sections.map(Te=>Te.name).join(" ")}'`,p=m.sections.reduce((Te,je)=>(Te[je.name]=d(je),Te),{});let _=G(Ye(!!c.getSetting("keyboardCollapsed"))),b=G(Ye(!!c.getSetting("pinKeyboardPanel"))),C=G("filtered"),w=G(!1),S=G(!1);const P=Ce(()=>!!c.settings.enableDeveloperOptions),L=Ce(()=>!!c.settings.devLoggingEnabled);let x=Ce(()=>c.settings.emulatedOS||"none");var A=Rf(),R=h(A),Z=h(R),V=h(Z);V.__click=[Cf,_,c];var oe=h(V),N=k(V,2);{var I=Te=>{var je=Af();je.__click=[xf,C];var Ct=k(h(je),2),lt=h(Ct);B(()=>{fe(je,"aria-pressed",s(C)==="all"),fe(je,"title",s(C)==="filtered"?"Heatmap matches current filters/search":"Heatmap counts all commands"),ae(lt,s(C)==="filtered"?"Filtered":"All")}),M(Te,je)};W(N,Te=>{!s(_)&&o()!==String(en.All)&&Te(I)})}var j=k(Z,2),K=h(j);{var ne=Te=>{hr(Te,{placement:"bottom-end",class:"dev-dropdown",get open(){return s(w)},set open(lt){y(w,lt,!0)},trigger:lt=>{var ee=Df(),le=h(ee);Mf(le,{size:16}),B(()=>fe(ee,"aria-expanded",s(w))),M(lt,ee)},content:lt=>{var ee=zf(),le=h(ee),ue=h(le),de=h(ue);de.__input=[Ef,c];var Xe=k(le,2),qe=h(Xe),mt=h(qe);mt.__input=[Lf,c];var _t=k(Xe,2),At=h(_t);At.__click=[Pf,S];var $t=h(At),Zt=k(_t,2),q=k(h(Zt),2);q.__input=[Tf,c];var be=h(q);be.value=be.__value="none";var Ee=k(be);Ee.value=Ee.__value="windows";var Qe=k(Ee);Qe.value=Qe.__value="macos";var rt=k(Qe);rt.value=rt.__value="linux",B(ct=>{Yt(de,s(L)),Yt(mt,ct),ae($t,`${s(S)?"Hide":"Show"} Active Keys inspector`)},[()=>!!c.settings.useBakedKeyNames]),zr(q,()=>s(x),ct=>y(x,ct)),M(lt,ee)},$$slots:{trigger:!0,content:!0}})};W(K,Te=>{s(P)&&Te(ne)})}var D=k(K,2);D.__click=[Of,b,c];var X=h(D);is(X,{size:16});var ye=k(X,2),ve=h(ye),_e=k(D,2);_e.__click=[Kf];var ze=h(_e);_f(ze,{size:16});var Ke=k(_e,2);Ke.__click=[Ff];var tt=h(Ke),ot=h(tt);gf(ot,{size:16});var Lt=k(R,2),Ut=h(Lt);{var Mt=Te=>{var je=$f(),Ct=h(je),lt=k(h(Ct)),ee=h(lt),le=k(Ct,2),ue=k(h(le)),de=h(ue),Xe=k(le,2);_l(Xe,()=>l,qe=>{var mt=If();const _t=Ce(()=>l.getDevRawInputs());var At=De(mt),$t=k(h(At),2),Zt=h($t),q=k(At,2),be=k(h(q),2),Ee=h(be);B(()=>{ae(Zt,s(_t).vk||"—"),ae(Ee,s(_t).physical?`${s(_t).physical.code||"—"} (${s(_t).physical.key||""})`:"—")}),M(qe,mt)}),B((qe,mt)=>{ae(ee,qe),ae(de,mt)},[()=>l.getDisplayKey()||"—",()=>l.ActiveModifiers.length?l.ActiveModifiers.join(" + "):"—"]),M(Te,je)};W(Ut,Te=>{s(S)&&Te(Mt)})}var Ot=k(Ut,2);{var It=Te=>{var je=Nf(),Ct=h(je);let lt;at(Ct,21,()=>m.sections,Nt,(ee,le)=>{var ue=Gf();let de;at(ue,21,()=>s(le).rows,Nt,(Xe,qe)=>{var mt=et(),_t=De(mt);at(_t,17,()=>s(qe),Nt,(At,$t)=>{uf(At,{get key(){return s($t)}})}),M(Xe,mt)}),B(Xe=>{Me(ue,1,fs(s(le).name),"svelte-1ayvfeq"),de=cn(ue,"",de,Xe)},[()=>({"grid-template-columns":`repeat(${p[s(le).name]}, 1fr)`})]),M(ee,ue)}),B(ee=>{fe(Ct,"data-scope",s(C)),lt=cn(Ct,"",lt,ee)},[()=>({"grid-template-columns":v,"grid-template-areas":g})]),M(Te,je)};W(Ot,Te=>{s(_)||Te(It)})}B(()=>{Me(A,1,`keyboard-panel ${s(_)?"collapsed":""} ${s(b)?"pinned":""}`,"svelte-1ayvfeq"),fe(V,"aria-label",s(_)?"Expand keyboard":"Collapse keyboard"),fe(V,"aria-expanded",!s(_)),fe(V,"title",s(_)?"Show keyboard":"Hide keyboard"),Me(oe,1,`chevron ${s(_)?"is-collapsed":""}`,"svelte-1ayvfeq"),fe(D,"aria-label",s(b)?"Unpin keyboard panel":"Pin keyboard panel"),fe(D,"aria-pressed",s(b)),fe(D,"title",s(b)?"Unpin from top":"Pin to top"),ae(ve,s(b)?"Unpin":"Pin")}),M(t,A),on()}Mn(["click","input"]);function zi(t){const e=i=>{const o=i.target;if(!t||i.defaultPrevented||t.contains(o))return;const r={originalEvent:i};t.dispatchEvent(new CustomEvent("click_outside",{detail:r})),t.dispatchEvent(new CustomEvent("onclick_outside",{detail:r}))},n=i=>{const o=i.target;if(!t||i.defaultPrevented||t.contains(o))return;const r={originalEvent:i};t.dispatchEvent(new CustomEvent("click_outside",{detail:r})),t.dispatchEvent(new CustomEvent("onclick_outside",{detail:r}))};return document.addEventListener("pointerdown",e,!0),document.addEventListener("click",n,!0),{destroy(){document.removeEventListener("pointerdown",e,!0),document.removeEventListener("click",n,!0)}}}function qf(){const t=Di();return t==="macos"?!0:t==="windows"||t==="linux"?!1:St.Platform.isMacOS}function Gr(t){const e=String(t);return qf()?e==="Ctrl"||e==="Control"?"⌃":e==="Shift"?"⇧":e==="Alt"||e==="Option"?"⌥":e==="Meta"||e==="Cmd"||e==="Win"||e==="Mod"?"⌘":e:e==="Ctrl"||e==="Control"||e==="Mod"?"Ctrl":e==="Shift"?"Shift":e==="Alt"||e==="Option"?"Alt":e==="Meta"||e==="Cmd"||e==="Win"?"Win":e}function Hf(t){const e=(t||"").trim();return e?e.length===1?e.toUpperCase():e.startsWith("Key")&&e.length===4?e.slice(3).toUpperCase():e.startsWith("Digit")&&e.length===6?e.slice(5):e:""}function Nr(t){const e=Hf(t),n=e.toLowerCase(),i={backspace:"⌫",delete:"Delete",del:"Delete",enter:"Enter",return:"Enter",tab:"Tab",escape:"Esc",esc:"Esc",space:"␣"," ":"␣",pageup:"Page Up",pagedown:"Page Down",home:"Home",end:"End",insert:"Ins",capslock:"Caps Lock",contextmenu:"Context Menu",context:"Context Menu",menu:"Context Menu",win:"Win",arrowup:"↑",arrowdown:"↓",arrowleft:"←",arrowright:"→",up:"↑",down:"↓",left:"←",right:"→",numpadenter:"Enter",numpaddivide:"÷",divide:"÷",numpadmultiply:"×",multiply:"×",numpadsubtract:"−",subtract:"−",numpadadd:"+",add:"+"};if(n in i)return i[n];const o={backquote:"`",minus:"-",equal:"=",bracketleft:"[",bracketright:"]",backslash:"\\",semicolon:";",quote:"'",comma:",",period:".",slash:"/"};return n in o?o[n]:e}function po(t){const e=xt(Gn(t.modifiers||[])).map(Gr),n=Nr(t.key||"");return[...e,n].filter(Boolean).join(" ")}function Bf(t,e,n){if(t.key==="Escape"){if(t.stopPropagation(),t.preventDefault(),s(e)){y(e,!1);return}n()}}function Wf(t,e,n){if(!e()||e()==="all")return;const i=n.getGroup(e());i&&n.setGroupDefaults(e(),{filters:i.filterSettings})}function Uf(t,e,n){!e()||e()==="all"||n.applyDefaultsToGroupFilters(e())}function jf(t,e,n){var i;try{const o=(i=e==null?void 0:e.settings)==null?void 0:i.defaultFilterSettings;if(!o||typeof o!="object")return;n.setAllGroupDefaults({filters:{...o}})}catch(o){console.error("[groups] failed to set All defaults",o)}}function Qf(t,e,n,i,o){var a,l;!e()||e()==="all"||!confirm("Delete this group? This cannot be undone.")||(n.removeGroup(e()),(l=(a=i.plugin).syncPerGroupCommands)==null||l.call(a),o()())}function Yf(t,e,n,i){var r,a;const o=e.createGroup("New Group");o&&n(o),(a=(r=i.plugin).syncPerGroupCommands)==null||a.call(r)}function Xf(t,e,n,i){var r,a;if(!e()||e()==="all")return;const o=n.duplicateGroup(e());o&&e(o),(a=(r=i.plugin).syncPerGroupCommands)==null||a.call(r)}function Zf(t,e){var n;(t.key==="Escape"||t.key==="Enter"||t.key===" ")&&(t.preventDefault(),(n=e())==null||n())}var Jf=T("<option> </option>"),ev=(t,e)=>y(e,!s(e)),tv=T('<li draggable="true"><span class="kb-dnd-handle svelte-16yspta">≡</span> <span class="kb-dnd-label svelte-16yspta"> </span> <div class="kb-reorder-controls svelte-16yspta"><button class="kb-btn small svelte-16yspta" aria-label="Move up" title="Move up">↑</button> <button class="kb-btn small svelte-16yspta" aria-label="Move down" title="Move down">↓</button></div></li>'),nv=T('<ul class="kb-group-reorder svelte-16yspta"></ul>'),iv=(t,e)=>e("default"),sv=(t,e)=>e("dynamic"),ov=(t,e)=>e.applyDefaultsToAllFilters(),rv=T('<div class="kb-group-behavior svelte-16yspta"><fieldset class="kb-fieldset"><legend class="u-muted small svelte-16yspta">On open</legend> <div class="kb-row svelte-16yspta"><label class="kb-radio svelte-16yspta"><input type="radio" name="onopen"/> Default settings</label> <label class="kb-radio svelte-16yspta"><input type="radio" name="onopen"/> Last used (dynamic)</label></div></fieldset> <div class="kb-row wrap svelte-16yspta"><button class="kb-btn" title="Save current filters as All Commands defaults">Use current filters as defaults</button> <button class="kb-btn" title="Apply saved All Commands defaults to current filters">Reset filters to defaults</button></div></div>'),av=(t,e)=>t.key==="Enter"&&e(),lv=(t,e)=>e("default"),cv=(t,e)=>e("dynamic"),uv=(t,e)=>e(t.currentTarget.checked),dv=T('<button class="kb-icon clear svelte-16yspta" aria-label="Clear search" title="Clear"><!></button>'),fv=(t,e,n)=>e(s(n)),vv=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n))),pv=T('<span class="hk svelte-16yspta"> </span>'),mv=T('<span class="hk u-muted svelte-16yspta">no hotkey</span>'),hv=T('<li class="kb-cmd-option svelte-16yspta" role="option" aria-selected="false" tabindex="0"><span class="label svelte-16yspta"> </span> <!></li>'),gv=T('<ul id="kb-cmd-search-list" class="kb-cmd-dropdown svelte-16yspta" role="listbox"></ul>'),yv=T('<div class="kb-cmd-empty u-muted small svelte-16yspta">No matching commands</div>'),_v=T('<div class="kb-cmd-search svelte-16yspta"><label class="u-muted small svelte-16yspta" for="kb-cmd-search-input">Add commands</label> <div class="kb-cmd-search-input svelte-16yspta"><input id="kb-cmd-search-input" class="kb-input svelte-16yspta" type="text" placeholder="Search commands to add..." role="combobox" aria-autocomplete="list" aria-haspopup="listbox" aria-controls="kb-cmd-search-list"/> <!></div> <!></div>'),bv=T('<div class="u-muted">No commands in this group yet.</div>'),kv=T('<span class="hk svelte-16yspta"> </span>'),wv=T('<span class="hk u-muted svelte-16yspta">no hotkey</span>'),Sv=(t,e,n,i)=>e.removeCommandFromGroup(n(),s(i).id),Mv=T('<button class="kb-icon rm-icon svelte-16yspta" title="Remove from group" aria-label="Remove from group"><!></button>'),Cv=T('<li><span class="kb-dnd-handle svelte-16yspta">≡</span> <span class="kb-dnd-label svelte-16yspta"> </span> <span class="kb-hk-list svelte-16yspta"><!></span> <!></li>'),xv=T('<ul class="kb-dnd-list svelte-16yspta"></ul> <div class="u-muted small svelte-16yspta">Drag items to reorder. Changes save automatically.</div>',1),Av=T(`<div class="kb-group-meta svelte-16yspta"><label class="u-muted small svelte-16yspta" for="kb-group-name">Name</label> <div class="kb-row svelte-16yspta"><input id="kb-group-name" class="kb-input svelte-16yspta" type="text"/> <button class="kb-btn danger svelte-16yspta" aria-label="Delete group">Delete</button></div></div> <div class="kb-group-behavior svelte-16yspta"><fieldset class="kb-fieldset"><legend class="u-muted small svelte-16yspta">On open</legend> <div class="kb-row svelte-16yspta"><label class="kb-radio svelte-16yspta"><input type="radio" name="onopen"/> Default settings</label> <label class="kb-radio svelte-16yspta"><input type="radio" name="onopen"/> Last used (dynamic)</label></div></fieldset> <div class="kb-row wrap svelte-16yspta"><button class="kb-btn" title="Save current filters as this group's defaults">Use current filters as defaults</button> <button class="kb-btn" title="Apply saved defaults to current filters">Reset filters to defaults</button></div></div> <div class="kb-group-commands"><span class="u-muted small svelte-16yspta">Command palette</span> <div class="kb-row svelte-16yspta"><label class="kb-radio svelte-16yspta"><input type="checkbox"/> </label></div></div> <!> <!>`,1),Dv=T('<section class="kb-main svelte-16yspta"><!></section>'),Ev=T('<div class="kb-modal-backdrop svelte-16yspta" role="button" tabindex="0" aria-label="Close dialog"></div> <div class="kb-modal svelte-16yspta" role="dialog" aria-modal="true" aria-label="Manage groups"><div class="kb-modal-header svelte-16yspta"><h3>Manage Groups</h3> <button class="kb-close svelte-16yspta" aria-label="Close">×</button></div> <div class="kb-modal-body stack svelte-16yspta"><div class="kb-controls-row svelte-16yspta"><label class="u-muted small svelte-16yspta" for="kb-group-dropdown">Group</label> <select id="kb-group-dropdown" class="kb-input svelte-16yspta" title="Select group"><option>All Commands</option><!></select> <button class="kb-btn" title="Create new group">+ New</button> <button class="kb-btn" title="Duplicate selected group">Duplicate</button> <button class="kb-btn" title="Reorder groups"> </button></div> <!></div></div>',1);function Lv(t,e){sn(e,!0);let n=Ae(e,"selectedGroupId",15,"all"),i=Ae(e,"onClose",11,()=>{});const o=e.plugin??ln("keyboard-analyzer-plugin"),r=o.groupManager,a=o.commandsManager,l=o.settingsManager,c=o.hotkeyManager,u=Ce(()=>r.getGroups()),m=Ce(()=>{var q;return((q=r.getGroup(n()||""))==null?void 0:q.name)||""});let d=G("");Dt(()=>{y(d,s(m),!0)});const v=Ce(()=>a.getGroupCommands(n()||""));let g=G(""),p=G(!1),_=G(Ye([]));const b=20;let C=G(null),w=null;function S(q){var Ee;const be=(Ee=q.hotkeys)==null?void 0:Ee[0];return be?l.settings.useBakedKeyNames?po(be):c.renderHotkey(be):""}function P(){const q=(s(g)||"").trim();if(!n()||n()==="all"){y(_,[],!0),y(p,!1);return}const be=new Set((s(v)||[]).map(Qe=>Qe.id));let Ee;if(q)Ee=a.searchCommandsByName(q,{excludeIds:be,limit:b});else{const Qe=a.getCommandsList();Ee=[];for(const rt of Qe)be.has(rt.id)||Ee.push(rt)}y(_,Ee,!0),y(p,!0)}function L(){w&&clearTimeout(w),w=setTimeout(P,180)}function x(){var q;y(g,""),y(_,[],!0),y(p,!1),(q=s(C))==null||q.focus()}function A(){!n()||n()==="all"||((s(g)||"").trim().length===0&&P(),y(p,!0))}function R(q){!n()||n()==="all"||(r.addCommandToGroup(n(),q.id),y(_,s(_).filter(be=>be.id!==q.id),!0))}const Z=Ce(()=>r.getGroupBehavior(n()||"all")||"default");function V(q){n()&&r.setGroupBehavior(n(),q)}const oe=Ce(()=>{if(!n()||n()==="all")return!1;const q=r.getGroup(n());return!!(q!=null&&q.registerCommand)});function N(q){var be;!n()||n()==="all"||(r.setGroupRegisterCommand(n(),!!q),(be=o.syncPerGroupCommands)==null||be.call(o))}let I=G(null),j=G(null),K=G(!1);function ne(q){y(I,q,!0)}function D(q,be){q.preventDefault();const Qe=q.currentTarget.getBoundingClientRect(),rt=q.clientY>Qe.top+Qe.height/2;y(j,be,!0),y(K,rt)}function X(){y(j,null)}function ye(){if(s(I)===null||n()==="all"||!n())return;if(s(j)===null){y(I,null);return}let q=s(j)+(s(K)?1:0);s(I)<q&&(q-=1),q<0&&(q=0),r.moveCommandInGroup(n(),s(I),q),y(I,null),y(j,null)}let ve=G(null),_e=G(null),ze=G(!1),Ke=G(!1);function tt(q){y(ve,q,!0)}function ot(q,be){q.preventDefault();const Qe=q.currentTarget.getBoundingClientRect();y(_e,be,!0),y(ze,q.clientY>Qe.top+Qe.height/2)}function Lt(){y(_e,null)}function Ut(){if(s(ve)===null||s(_e)===null){y(ve,null),y(_e,null);return}let q=s(_e)+(s(ze)?1:0);s(ve)<q&&(q-=1),q<0&&(q=0),q!==s(ve)&&r.moveGroup(s(ve),q),y(ve,null),y(_e,null)}function Mt(){var be,Ee;if(!n()||n()==="all")return;const q=(s(d)||"").trim();q&&q!==s(m)&&(r.renameGroup(n(),q),(Ee=(be=e.plugin).syncPerGroupCommands)==null||Ee.call(be))}var Ot=Ev(),It=De(Ot);It.__click=function(...q){var be;(be=i())==null||be.apply(this,q)},It.__keydown=[Zf,i];var Te=k(It,2),je=h(Te),Ct=k(h(je),2);Ct.__click=function(...q){var be;(be=i())==null||be.apply(this,q)};var lt=k(je,2),ee=h(lt),le=k(h(ee),2),ue=h(le);ue.value=ue.__value="all";var de=k(ue);at(de,17,()=>s(u),q=>q.id,(q,be)=>{var Ee=Jf(),Qe=h(Ee),rt={};B(ct=>{ae(Qe,s(be).name),rt!==(rt=ct)&&(Ee.value=(Ee.__value=ct)??"")},[()=>String(s(be).id)]),M(q,Ee)});var Xe=k(le,2);Xe.__click=[Yf,r,n,e];var qe=k(Xe,2);qe.__click=[Xf,n,r,e];var mt=k(qe,2);mt.__click=[ev,Ke];var _t=h(mt),At=k(ee,2);{var $t=q=>{var be=nv();at(be,23,()=>s(u),Ee=>Ee.id,(Ee,Qe,rt)=>{var ct=tv(),z=k(h(ct),2),f=h(z),O=k(z,2),H=h(O);H.__click=()=>r.moveGroup(s(rt),Math.max(0,s(rt)-1));var ie=k(H,2);ie.__click=()=>r.moveGroup(s(rt),Math.min(s(u).length-1,s(rt)+1)),B(ce=>{Me(ct,1,ce,"svelte-16yspta"),ae(f,s(Qe).name)},[()=>`kb-group-li ${String(s(Qe).id)===n()?"is-active":""} ${s(_e)===s(rt)?s(ze)?"insert-after":"insert-before":""}`]),$e("dragstart",ct,()=>tt(s(rt))),$e("dragover",ct,ce=>ot(ce,s(rt))),$e("dragleave",ct,Lt),$e("drop",ct,Ut),M(Ee,ct)}),M(q,be)},Zt=q=>{var be=Dv(),Ee=h(be);{var Qe=ct=>{var z=rv(),f=h(z),O=k(h(f),2),H=h(O),ie=h(H);ie.__change=[iv,V];var ce=k(H,2),pe=h(ce);pe.__change=[sv,V];var ke=k(f,2),He=h(ke);He.__click=[jf,l,r];var Le=k(He,2);Le.__click=[ov,r],B(()=>{Yt(ie,s(Z)==="default"),Yt(pe,s(Z)==="dynamic")}),M(ct,z)},rt=ct=>{var z=Av(),f=De(z),O=k(h(f),2),H=h(O);H.__keydown=[av,Mt];var ie=k(H,2);ie.__click=[Qf,n,r,e,i];var ce=k(f,2),pe=h(ce),ke=k(h(pe),2),He=h(ke),Le=h(He);Le.__change=[lv,V];var Ge=k(He,2),Q=h(Ge);Q.__change=[cv,V];var xe=k(pe,2),Be=h(xe);Be.__click=[Wf,n,r];var te=k(Be,2);te.__click=[Uf,n,r];var ht=k(ce,2),Ze=k(h(ht),2),we=h(Ze),Fe=h(we);Fe.__change=[uv,N];var gt=k(Fe),ut=k(ht,2);{var bt=dt=>{var nt=_v(),Ne=k(h(nt),2),Re=h(Ne);Re.__input=L,Re.__keydown=[Bf,p,x],un(Re,se=>y(C,se),()=>s(C));var ft=k(Re,2);{var me=se=>{var Pe=dv();Pe.__click=x;var he=h(Pe);hs(he,{size:14}),M(se,Pe)};W(ft,se=>{s(g)&&se(me)})}var yt=k(Ne,2);{var qt=se=>{var Pe=gv();at(Pe,21,()=>s(_),he=>he.id,(he,Y)=>{var U=hv();U.__click=[fv,R,Y],U.__keydown=[vv,R,Y];var $=h(U),F=h($),J=k($,2);{var Oe=Se=>{var We=pv(),it=h(We);B(Bt=>ae(it,Bt),[()=>S(s(Y))]),M(Se,We)},Ie=Se=>{var We=mv();M(Se,We)};W(J,Se=>{s(Y).hotkeys&&s(Y).hotkeys.length>0?Se(Oe):Se(Ie,!1)})}B(()=>{fe(U,"title",`${s(Y).pluginName}: ${s(Y).name}`),ae(F,`${s(Y).pluginName??""}: ${s(Y).name??""}`)}),M(he,U)}),M(se,Pe)},Ht=se=>{var Pe=et(),he=De(Pe);{var Y=U=>{var $=yv();M(U,$)};W(he,U=>{s(p)&&s(g).trim().length>0&&U(Y)},!0)}M(se,Pe)};W(yt,se=>{s(p)&&s(_).length>0?se(qt):se(Ht,!1)})}wl(nt,se=>zi==null?void 0:zi(se)),B(()=>fe(Re,"aria-expanded",s(p))),$e("click_outside",nt,()=>y(p,!1)),$e("focus",Re,A),Vi(Re,()=>s(g),se=>y(g,se)),M(dt,nt)};W(ut,dt=>{n()!=="all"&&dt(bt)})}var Pt=k(ut,2);{var jt=dt=>{var nt=bv();M(dt,nt)},kt=dt=>{var nt=xv(),Ne=De(nt);at(Ne,23,()=>s(v),Re=>Re.id,(Re,ft,me)=>{var yt=Cv(),qt=k(h(yt),2),Ht=h(qt),se=k(qt,2),Pe=h(se);{var he=F=>{var J=et(),Oe=De(J);at(Oe,17,()=>s(ft).hotkeys,Nt,(Ie,Se)=>{var We=kv(),it=h(We);B(Bt=>ae(it,Bt),[()=>l.settings.useBakedKeyNames?po(s(Se)):c.renderHotkey(s(Se))]),M(Ie,We)}),M(F,J)},Y=F=>{var J=wv();M(F,J)};W(Pe,F=>{var J;(J=s(ft).hotkeys)!=null&&J.length?F(he):F(Y,!1)})}var U=k(se,2);{var $=F=>{var J=Mv();J.__click=[Sv,r,n,ft];var Oe=h(J);hs(Oe,{size:14}),M(F,J)};W(U,F=>{n()!=="all"&&F($)})}B(()=>{Me(yt,1,`kb-dnd-item ${s(j)===s(me)?s(K)?"insert-after":"insert-before":""}`,"svelte-16yspta"),fe(yt,"draggable",n()!=="all"),fe(yt,"aria-grabbed",s(I)===s(me)),ae(Ht,`${s(ft).pluginName??""}: ${s(ft).name??""}`)}),$e("dragstart",yt,()=>ne(s(me))),$e("dragover",yt,F=>D(F,s(me))),$e("dragleave",yt,X),$e("drop",yt,ye),M(Re,yt)}),M(dt,nt)};W(Pt,dt=>{s(v).length===0?dt(jt):dt(kt,!1)})}B(()=>{Yt(Le,s(Z)==="default"),Yt(Q,s(Z)==="dynamic"),Yt(Fe,s(oe)),ae(gt,` Register “Open: ${s(m)??""}”`)}),$e("blur",H,Mt),Vi(H,()=>s(d),dt=>y(d,dt)),M(ct,z)};W(Ee,ct=>{!n()||n()==="all"?ct(Qe):ct(rt,!1)})}M(q,be)};W(At,q=>{s(Ke)?q($t):q(Zt,!1)})}B(()=>{qe.disabled=!n()||n()==="all",fe(mt,"aria-pressed",s(Ke)),ae(_t,s(Ke)?"Done":"Reorder")}),zr(le,n),M(t,Ot),on()}Mn(["click","keydown","change","input"]);function Pv(t,e){y(e,!0)}function Tv(t,e,n){if(!(!e||!n()))try{e.saveCurrentFiltersAsDefaults(n()),E.debug("[GroupSelector] saved current filters as defaults",{selectedGroup:n()})}catch(i){E.error("[GroupSelector] failed to save current filters as defaults",i)}}function zv(t,e,n){if(!(!e||!n()))try{e.resetFiltersToDefaults(n()),E.debug("[GroupSelector] reset filters to defaults",{selectedGroup:n()})}catch(i){E.error("[GroupSelector] failed to reset filters to defaults",i)}}var Ov=T('<label class="u-muted svelte-11i0lms" for="kb-group-select">Group</label>'),Kv=(t,e,n)=>e()(n()),Fv=T("<option> </option>"),Iv=T('<div class="changes-actions svelte-11i0lms"><button class="btn-save svelte-11i0lms" aria-label="Save current settings as group defaults" title="Save current filter settings as defaults for this group"><!> Save</button> <button class="btn-reset svelte-11i0lms" aria-label="Reset to group defaults" title="Reset filter settings to saved defaults"><!> Reset</button></div>'),$v=T('<!> <button class="btn-manage svelte-11i0lms" aria-label="Manage groups">Manage</button>',1),Gv=T('<div class="kb-group-selector svelte-11i0lms"><!> <div class="row svelte-11i0lms"><select id="kb-group-select" class="dropdown svelte-11i0lms"><option>All Commands</option><!></select> <!></div> <!></div>');function oc(t,e){sn(e,!0);let n=Ae(e,"selectedGroup",15,"all"),i=Ae(e,"compact",11,!1),o=Ae(e,"onChange",11,x=>{});function r(){try{return ln("keyboard-analyzer-plugin")}catch(x){E.error("[GroupSelector] failed to resolve plugin from context",x);return}}const a=e.plugin??r(),l=a==null?void 0:a.groupManager;let c=G(!1);const u=Ce(()=>{var x;if(!l||!n())return!1;try{return l.groups,(x=a==null?void 0:a.settingsManager)==null||x.settings,l.hasUnsavedFilterChanges(n())}catch(A){return E.error("[GroupSelector] hasUnsavedChanges check failed",A),!1}});function m(){y(c,!1)}var d=Gv(),v=h(d);{var g=x=>{var A=Ov();M(x,A)};W(v,x=>{i()||x(g)})}var p=k(v,2),_=h(p);_.__change=[Kv,o,n];var b=h(_);b.value=b.__value="all";var C=k(b);at(C,17,()=>{var x;return((x=l==null?void 0:l.getGroups)==null?void 0:x.call(l))||[]},x=>x.id,(x,A)=>{var R=Fv(),Z=h(R),V={};B(()=>{ae(Z,s(A).name),V!==(V=s(A).id)&&(R.value=(R.__value=s(A).id)??"")}),M(x,R)});var w=k(_,2);{var S=x=>{var A=$v(),R=De(A);{var Z=oe=>{var N=Iv(),I=h(N);I.__click=[Tv,l,n];var j=h(I);wf(j,{size:14});var K=k(I,2);K.__click=[zv,l,n];var ne=h(K);ss(ne,{size:14}),M(oe,N)};W(R,oe=>{s(u)&&oe(Z)})}var V=k(R,2);V.__click=[Pv,c],M(x,A)};W(w,x=>{!i()&&a&&x(S)})}var P=k(p,2);{var L=x=>{Lv(x,{get plugin(){return a},get selectedGroupId(){return n()},onClose:m})};W(P,x=>{s(c)&&a&&x(L)})}B(()=>fe(d,"data-compact",i()?"true":"false")),zr(_,n),M(t,d),on()}Mn(["change","click"]);const $n={StrictModifierMatch:"StrictModifierMatch",ViewWOhotkeys:"ViewWOhotkeys",OnlyCustom:"OnlyCustom",OnlyDuplicates:"OnlyDuplicates",DisplayInternalModules:"DisplayInternalModules",DisplaySystemShortcuts:"DisplaySystemShortcuts"},Nv={FeaturedFirst:"FeaturedFirst",GroupByPlugin:"GroupByPlugin",HighlightCustom:"HighlightCustom",HighlightDuplicates:"HighlightDuplicates",DisplayIDs:"DisplayIDs",HighlightBuiltIns:"HighlightBuiltIns",ShowPluginBadges:"ShowPluginBadges"},mo=Do(!1);function Rv(){mo.update(t=>!t)}function Vv(t,e,n,i){var o;e()===""?s(n).reset():e(""),(o=i())==null||o.focus()}function qv(t,e,n){var o;const i=!e();E.debug("[keys] toggle listener",{from:e(),to:i}),e(i),(o=n())==null||o.focus()}function Hv(t,e,n){y(e,!0),n.refreshCommands(),setTimeout(()=>{y(e,!1)},1e3)}function xa(t,e,n,i,o,r,a){if(t.key==="Escape"&&(s(e)||s(n))){y(e,!1),y(n,!1),t.stopPropagation();return}if(i()){t.stopPropagation(),t.preventDefault();return}if(t.key==="Backspace"&&String(o()||"").trim()===""){if(s(r).activeKey)s(r).clearActiveKey();else if(s(r).activeModifiers.length>0){const l=[...s(r).sortedModifiers];l.pop(),s(r).ActiveModifiers=l}a(),t.preventDefault(),t.stopPropagation();return}a()}var Bv=(t,e,n)=>e(s(n)),Wv=T('<kbd class="modifier setting-hotkey"> </kbd>'),Uv=(t,e)=>s(e).handleKeyClick(s(e).activeKey),jv=T('<kbd class="modifier setting-hotkey"> </kbd>'),Qv=T("<button><!></button>"),Yv=T('<button id="hotkey-filter-button" aria-label="Filter Commands"><!></button>'),Xv=(t,e,n)=>e($n.StrictModifierMatch,!s(n).StrictModifierMatch),Zv=(t,e,n)=>e($n.ViewWOhotkeys,!s(n).ViewWOhotkeys),Jv=(t,e,n)=>e($n.OnlyCustom,!s(n).OnlyCustom),ep=(t,e,n)=>e($n.OnlyDuplicates,!s(n).OnlyDuplicates),tp=(t,e,n)=>e($n.DisplaySystemShortcuts,!s(n).DisplaySystemShortcuts),np=T('<div class="popup-filter-menu"><div class="setting-item mod-toggle"><div><input type="checkbox" tabindex="0" id="filter-StrictModifierMatch"/></div> <div class="setting-item-name popup-filter-title"> <span class="info-icon"><!></span></div></div> <div class="setting-item mod-toggle"><div><input type="checkbox" tabindex="0" id="filter-ViewWOhotkeys"/></div> <div class="setting-item-name popup-filter-title"> <span class="info-icon"><!></span></div></div> <div class="setting-item mod-toggle"><div><input type="checkbox" tabindex="0" id="filter-OnlyCustom"/></div> <div class="setting-item-name popup-filter-title"> <span class="info-icon"><!></span></div></div> <div class="setting-item mod-toggle"><div><input type="checkbox" tabindex="0" id="filter-OnlyDuplicates"/></div> <div class="setting-item-name popup-filter-title"> <span class="info-icon"><!></span></div></div> <div class="setting-item mod-toggle"><div><input type="checkbox" tabindex="0" id="filter-DisplaySystemShortcuts"/></div> <div class="setting-item-name popup-filter-title"> <span class="info-icon"><!></span></div></div></div>'),ip=T('<button id="hotkey-view-button" aria-label="View Options">View</button>'),sp=(t,e,n,i)=>e(s(n),!s(i)[s(n)]),op=(t,e,n,i)=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n),!s(i)[s(n)]))},rp=T('<div class="setting-item mod-toggle"><div role="button" tabindex="0"><input type="checkbox" tabindex="0"/></div> <div class="setting-item-name"> <span class="info-icon"><!></span></div></div>'),ap=T('<div class="popup-filter-menu"></div>'),lp=T('<span class="counts-line"><span class="n"> </span> <span class="label">keys</span> <span>|</span> <span class="n"> </span> <span class="label">cmds</span></span>'),cp=T("<span>Hotkeys not found</span>"),up=T('<button id="hotkey-edit-button" style="margin-right: 6px;"><!></button>'),dp=T('<button id="hotkey-refresh-button" aria-label="Refresh Commands"><!></button>'),fp=T('<!>  <div class="hotkey-settings-container"><div><div class="modifiers-wrapper"><!> <!></div> <div class="hotkey-search-container"><input type="text" placeholder="Filter..."/> <div class="meta-search-wrapper"><!> <button class="clear-icon icon" aria-label="Clear text or reset keys" title="Clear text or reset keys"><!></button></div></div></div> <!> <!>  <div class="community-plugin-search-summary u-muted"><!></div> <!> <!></div>',1);function vp(t,e){sn(e,!0);let n=Ae(e,"inputHTML",15),i=Ae(e,"searchCommandsCount",11,0),o=Ae(e,"searchHotkeysCount",11,0),r=Ae(e,"keyboardListenerIsActive",15,!1),a=Ae(e,"selectedGroup",15,""),l=Ae(e,"onSearch",11,()=>{}),c=Ae(e,"search",15,"");const u=e.plugin.settingsManager,m=e.plugin.commandsManager,d=e.plugin.groupManager,v={StrictModifierMatch:"Strict modifiers filtration",ViewWOhotkeys:"Only with hotkeys",OnlyCustom:"Only custom hotkeys",OnlyDuplicates:"Only duplicates",FeaturedFirst:"Featured first",HighlightCustom:"Highlight custom keys",HighlightDuplicates:"Highlight duplicates",HighlightBuiltIns:"Highlight built-in modules",DisplayIDs:"Display command IDs",ShowPluginBadges:"Show plugin badges",GroupByPlugin:"Group by plugin",DisplayGroupAssignment:"Show group assignment",DisplayInternalModules:"Display internal modules",DisplaySystemShortcuts:"Include system shortcuts"},g={StrictModifierMatch:"Match modifiers exactly. Example: Ctrl+K won't match Ctrl+Shift+K.",ViewWOhotkeys:"Show only commands that have at least one hotkey assigned.",OnlyCustom:"Show only commands that have at least one user-set hotkey.",OnlyDuplicates:"Show only commands where at least one hotkey is duplicated.",FeaturedFirst:"Pin featured commands to the top of results.",HighlightCustom:"Visually mark hotkeys customized by you.",HighlightDuplicates:"Highlight when the same hotkey is used by multiple commands.",HighlightBuiltIns:"Subtly mark built-in (internal) plugin groups in commands list.",DisplayIDs:"Show internal command IDs and allow searching by ID.",ShowPluginBadges:"Show a compact plugin label before each command (flat list).",GroupByPlugin:"Group commands by their plugin.",DisplayGroupAssignment:"Display which group a command belongs to.",DisplayInternalModules:"Include commands from Obsidian’s built-in modules (e.g., File Explorer).",DisplaySystemShortcuts:"List common OS/editor defaults like Copy/Paste, Undo/Redo, Zoom."},p=Ce(()=>(d.groups,u.settings.defaultFilterSettings,d.getGroupSettings(a())));Dt(()=>{s(p),a()});const _=ln("activeKeysStore");let b=G(!1),C=G(!1),w=G(!1),S=G(!1),P=G(!1);const L=Ce(()=>_);Dt(()=>{const ee=mo.subscribe(le=>y(P,le,!0));return()=>ee()});let x=null,A=G(Ye({search:"",activeKey:"",selectedGroup:"",modifiersSig:""}));function R(ee,le){var ue;try{if(!!((ue=d.getGroupSettings(a()))!=null&&ue[ee])===!!le)return}catch{}E.debug("SearchMenu setFilterSetting called",{selectedGroup:a(),setting:ee,value:le}),d.updateGroupFilterSettings(a(),{[ee]:le}),E.debug("SearchMenu after updateGroupFilterSettings",{selectedGroup:a(),persisted:d.getGroupSettings(a())}),Z()}function Z(){try{const ee=En(s(L).activeModifiers),le={search:String(c()??""),activeKey:String(s(L).activeKey??""),selectedGroup:String(a()??""),modifiersSig:ee.join("+")};if(le.search===s(A).search&&le.activeKey===s(A).activeKey&&le.selectedGroup===s(A).selectedGroup&&le.modifiersSig===s(A).modifiersSig)return;y(A,le,!0),l()(le.search,ee,le.activeKey,le.selectedGroup)}catch{}}function V(){x&&clearTimeout(x);const ee=Number(u.settings.searchDebounceMs??200);x=setTimeout(()=>{Z()},Number.isNaN(ee)?200:Math.max(0,Math.min(2e3,ee)))}function oe(ee){const le=Rl(ee);s(L).handleKeyClick(le),Z()}Dt(()=>{const ee=a();queueMicrotask(()=>{a()===ee&&Z()})});var N=fp(),I=De(N);oc(I,{get selectedGroup(){return a()},set selectedGroup(ee){a(ee)}});var j=k(I,2);j.__keydown=[xa,b,w,r,c,L,Z];var K=h(j);let ne;var D=h(K),X=h(D);at(X,17,()=>s(L).sortedModifiers,Nt,(ee,le)=>{var ue=Wv();ue.__click=[Bv,oe,le];var de=h(ue);B(Xe=>ae(de,Xe),[()=>u.settings.useBakedKeyNames?Gr(s(le)):s(le)]),M(ee,ue)});var ye=k(X,2);{var ve=ee=>{var le=jv();le.__click=[Uv,L];var ue=h(le);B(de=>ae(ue,de),[()=>u.settings.useBakedKeyNames?Nr(s(L).activeKey):s(L).getDisplayKey()]),M(ee,le)};W(ye,ee=>{s(L).activeKey&&ee(ve)})}var _e=k(D,2),ze=h(_e);ze.__keydown=[xa,b,w,r,c,L,Z],ze.__input=V,un(ze,ee=>n(ee),()=>n());var Ke=k(ze,2),tt=h(Ke);{let ee=Ce(()=>r()?"Deactivate key listener (Esc)":"Activate key listener");mn(tt,{get content(){return s(ee)},placement:"bottom",delay:500,children:(le,ue)=>{var de=Qv();de.__click=[qv,r,n];var Xe=h(de);sc(Xe,{size:16}),B(qe=>{Me(de,1,`keyboard-icon icon ${r()?"pulse":""}`),fe(de,"aria-label",qe),fe(de,"aria-pressed",r())},[()=>r()?"Press Esc to deactivate key listener":`Press ${En(["Mod"])[0]}+F or long press to activate key listener`]),M(le,de)},$$slots:{default:!0}})}var ot=k(tt,2);ot.__click=[Vv,c,L,n];var Lt=h(ot);hs(Lt,{size:16});var Ut=k(K,2);hr(Ut,{placement:"bottom-start",class:"filter-dropdown",get open(){return s(w)},set open(ue){y(w,ue,!0)},trigger:ue=>{var de=Yv(),Xe=h(de);yf(Xe,{size:16}),B(()=>{Me(de,1,fs(s(w)?"is-active":"")),fe(de,"aria-pressed",s(w))}),M(ue,de)},content:ue=>{var de=np(),Xe=h(de),qe=h(Xe);let mt;qe.__click=[Xv,R,p];var _t=h(qe),At=k(qe,2),$t=h(At),Zt=k($t),q=h(Zt);mn(q,{get content(){return g.StrictModifierMatch},placement:"top",delay:300,children:(Ne,Re)=>{xi(Ne,{size:14})},$$slots:{default:!0}});var be=k(Xe,2),Ee=h(be);let Qe;Ee.__click=[Zv,R,p];var rt=h(Ee),ct=k(Ee,2),z=h(ct),f=k(z),O=h(f);mn(O,{get content(){return g.ViewWOhotkeys},placement:"top",delay:300,children:(Ne,Re)=>{xi(Ne,{size:14})},$$slots:{default:!0}});var H=k(be,2),ie=h(H);let ce;ie.__click=[Jv,R,p];var pe=h(ie),ke=k(ie,2),He=h(ke),Le=k(He),Ge=h(Le);mn(Ge,{get content(){return g.OnlyCustom},placement:"top",delay:300,children:(Ne,Re)=>{xi(Ne,{size:14})},$$slots:{default:!0}});var Q=k(H,2),xe=h(Q);let Be;xe.__click=[ep,R,p];var te=h(xe),ht=k(xe,2),Ze=h(ht),we=k(Ze),Fe=h(we);mn(Fe,{get content(){return g.OnlyDuplicates},placement:"top",delay:300,children:(Ne,Re)=>{xi(Ne,{size:14})},$$slots:{default:!0}});var gt=k(Q,2),ut=h(gt);let bt;ut.__click=[tp,R,p];var Pt=h(ut),jt=k(ut,2),kt=h(jt),dt=k(kt),nt=h(dt);mn(nt,{get content(){return g.DisplaySystemShortcuts},placement:"top",delay:300,children:(Ne,Re)=>{xi(Ne,{size:14})},$$slots:{default:!0}}),B((Ne,Re,ft,me,yt)=>{mt=Me(qe,1,"checkbox-container",null,mt,Ne),Yt(_t,s(p).StrictModifierMatch),ae($t,`${v.StrictModifierMatch} `),fe(Zt,"title",g.StrictModifierMatch),Qe=Me(Ee,1,"checkbox-container",null,Qe,Re),Yt(rt,s(p).ViewWOhotkeys),ae(z,`${v.ViewWOhotkeys} `),ce=Me(ie,1,"checkbox-container",null,ce,ft),Yt(pe,s(p).OnlyCustom),ae(He,`${v.OnlyCustom} `),Be=Me(xe,1,"checkbox-container",null,Be,me),Yt(te,s(p).OnlyDuplicates),ae(Ze,`${v.OnlyDuplicates} `),bt=Me(ut,1,"checkbox-container",null,bt,yt),Yt(Pt,s(p).DisplaySystemShortcuts),ae(kt,`${v.DisplaySystemShortcuts} `)},[()=>({"is-enabled":s(p).StrictModifierMatch}),()=>({"is-enabled":s(p).ViewWOhotkeys}),()=>({"is-enabled":s(p).OnlyCustom}),()=>({"is-enabled":s(p).OnlyDuplicates}),()=>({"is-enabled":s(p).DisplaySystemShortcuts})]),M(ue,de)},$$slots:{trigger:!0,content:!0}});var Mt=k(Ut,2);hr(Mt,{placement:"bottom-start",class:"view-dropdown",get open(){return s(b)},set open(ue){y(b,ue,!0)},trigger:ue=>{var de=ip();B(()=>{Me(de,1,fs(s(b)?"is-active":"")),fe(de,"aria-pressed",s(b))}),M(ue,de)},content:ue=>{var de=ap();at(de,21,()=>Object.values(Nv),Nt,(Xe,qe)=>{var mt=rp(),_t=h(mt);let At;_t.__click=[sp,R,qe,p],_t.__keydown=[op,R,qe,p];var $t=h(_t),Zt=k(_t,2),q=h(Zt),be=k(q),Ee=h(be);{let Qe=Ce(()=>g[s(qe)]||s(qe));mn(Ee,{get content(){return s(Qe)},placement:"top",delay:300,children:(rt,ct)=>{xi(rt,{size:14})},$$slots:{default:!0}})}B(Qe=>{At=Me(_t,1,"checkbox-container",null,At,Qe),Yt($t,s(p)[s(qe)]),fe($t,"id",`view-${s(qe)}`),ae(q,`${(v[s(qe)]||s(qe))??""} `)},[()=>({"is-enabled":s(p)[s(qe)]})]),M(Xe,mt)}),M(ue,de)},$$slots:{trigger:!0,content:!0}});var Ot=k(Mt,2),It=h(Ot);{var Te=ee=>{var le=lp(),ue=h(le),de=h(ue),Xe=k(ue,6),qe=h(Xe);B(()=>{ae(de,o()),ae(qe,i())}),M(ee,le)},je=ee=>{var le=cp();M(ee,le)};W(It,ee=>{i()!==0?ee(Te):ee(je,!1)})}var Ct=k(Ot,2);{let ee=Ce(()=>s(P)?"Exit Edit mode":"Enter Edit mode");mn(Ct,{get content(){return s(ee)},placement:"bottom",delay:500,children:(le,ue)=>{var de=up();de.__click=[Rv];var Xe=h(de);bf(Xe,{size:16}),B(()=>{Me(de,1,`clear-icon icon ${s(P)?"is-active":""}`),fe(de,"aria-pressed",s(P)),fe(de,"aria-label",s(P)?"Exit Edit mode":"Enter Edit mode")}),M(le,de)},$$slots:{default:!0}})}var lt=k(Ct,2);mn(lt,{content:"Refresh commands",placement:"bottom",delay:500,children:(ee,le)=>{var ue=dp();ue.__click=[Hv,S,m];var de=h(ue);kf(de,{size:16}),B(()=>Me(ue,1,`clear-icon icon ${s(S)?"animation-is-active":""}`)),M(ee,ue)},$$slots:{default:!0}}),B(ee=>ne=Me(K,1,"search-wrapper",null,ne,ee),[()=>({"is-focused":s(C)})]),$e("focus",ze,()=>y(C,!0)),$e("blur",ze,()=>y(C,!1)),Vi(ze,c),M(t,N),on()}Mn(["keydown","click","input"]);var pp=(t,e)=>y(e,""),mp=T('<button class="kb-clear svelte-14o9361" title="Clear" aria-label="Clear search"><!></button>'),hp=(t,e,n)=>e(String(s(n).id)),gp=T('<label class="kb-row svelte-14o9361"><input type="checkbox" class="svelte-14o9361"/> <span class="svelte-14o9361"> </span></label>'),yp=(t,e)=>t.key==="Enter"&&e(),_p=T('<div class="kb-popover floating floating-popover svelte-14o9361" role="dialog" aria-label="Add to group"><div class="floating-arrow"></div> <div class="kb-popover-header svelte-14o9361"><div class="kb-input-wrap svelte-14o9361"><input type="text" placeholder="Search groups..." class="kb-input svelte-14o9361"/> <!></div></div> <div class="kb-popover-body svelte-14o9361"></div> <div class="kb-popover-footer svelte-14o9361"><input type="text" placeholder="New group name" class="kb-input svelte-14o9361"/> <button class="kb-btn svelte-14o9361">Create & Add</button></div></div>');function Aa(t,e){sn(e,!0);const n=Ae(e,"onClose",3,()=>{}),o=ln("keyboard-analyzer-plugin").groupManager;let r=G(""),a=G(""),l=G(null),c=G(null);const u=Go({placement:"bottom-start",middleware:[Fo(8),$o(),Io({padding:8})]});pi(()=>{s(l)&&s(l).parentElement instanceof HTMLElement&&(u.elements.reference=s(l).parentElement)});function m(){const N=s(r).trim().toLowerCase(),I=o.getGroups();return N?I.filter(j=>j.name.toLowerCase().includes(N)):I}function d(N){o.isCommandInGroup(N,e.commandId)?o.removeCommandFromGroup(N,e.commandId):o.addCommandToGroup(N,e.commandId)}function v(){const N=s(a).trim();if(!N)return;const I=o.createGroup(N);I&&o.addCommandToGroup(String(I),e.commandId),y(a,""),y(r,"")}function g(N){var j;const I=N.target;s(l)&&!s(l).contains(I)&&!((j=s(l).parentElement)!=null&&j.contains(I))&&n()()}function p(N){N.key==="Escape"&&(N.preventDefault(),N.stopPropagation(),n()())}const _=Ce(()=>()=>{var D;const N=(D=u.middlewareData)==null?void 0:D.arrow;if(!N)return{display:"none"};const{x:I,y:j}=N,K=u.placement.split("-")[0],ne={top:"bottom",right:"left",bottom:"top",left:"right"}[K];return{left:I!=null?`${I}px`:"",top:j!=null?`${j}px`:"",right:"",bottom:"",[ne]:"-4px"}});pi(()=>{document.addEventListener("click",g,{capture:!0}),document.addEventListener("keydown",p)}),Pl(()=>{document.removeEventListener("click",g,{capture:!0}),document.removeEventListener("keydown",p)});var b=_p(),C=h(b);let w;un(C,N=>y(c,N),()=>s(c));var S=k(C,2),P=h(S),L=h(P),x=k(L,2);{var A=N=>{var I=mp();I.__click=[pp,r];var j=h(I);hs(j,{size:14}),M(N,I)};W(x,N=>{s(r)&&N(A)})}var R=k(S,2);at(R,21,m,N=>N.id,(N,I)=>{var j=gp(),K=h(j);K.__change=[hp,d,I];var ne=k(K,2),D=h(ne);B(X=>{Yt(K,X),ae(D,s(I).name)},[()=>o.isCommandInGroup(String(s(I).id),e.commandId)]),M(N,j)});var Z=k(R,2),V=h(Z);V.__keydown=[yp,v];var oe=k(V,2);oe.__click=v,un(b,N=>y(l,N),()=>s(l)),B((N,I)=>{cn(b,u.floatingStyles),fe(C,"data-side",N),w=cn(C,"",w,I)},[()=>u.placement.split("-")[0],()=>({left:s(_)().left,top:s(_)().top,right:s(_)().right,bottom:s(_)().bottom})]),Vi(L,()=>s(r),N=>y(r,N)),Vi(V,()=>s(a),N=>y(a,N)),M(t,b),on()}Mn(["click","change","keydown"]);const Rs=Do(null),Da=Rs,ji=Do([]),Nn=Do(new Map);function gs(t){return{modifiers:xt(t.modifiers||[]),key:Et(t.key||"")}}function ho(t){return(t||[]).map(gs)}function Ys(t,e){const n=Array.isArray(t)?t:(t||"").split(",").filter(Boolean);return{modifiers:xt(n),key:Et(e||"")}}function Ei(t){return`${vs(t.modifiers).join(",")}|${Et(t.key)}`}function Oi(t){const e=t.modifiers||[],n=Et(t.key||"");return`${e.length?e.join("+")+"+":""}${n}`}function bp(t){const e=vs(t.modifiers||[]),n=Et(t.key||"");return`${e.length?e.join("+")+"+":""}${n}`}function ai(t,e=!1){const n=e?bp:Oi;return`[${(t||[]).map(n).join(", ")}]`}function rc(t){const e=Et(t||"");return e.length===1&&e>="a"&&e<="z"?e.toUpperCase():e}function Vs(t){const e=t.hotkeyManager;return{set:!!e&&typeof e.setHotkeys=="function",remove:!!e&&typeof e.removeHotkeys=="function",save:!!e&&typeof e.save=="function",bake:!!e&&typeof e.bake=="function"}}async function Yo(t,e,n,i){var w;const o=Vs(t);if(!o.set||!o.save||!o.bake)throw new Error("Hotkey APIs unavailable");const r=t.hotkeyManager,l=e.getCommandsIndex()[n],c=l!=null&&l.customHotkeys?ho(l.customHotkeys):[],u=c.length?c:null,m=((l==null?void 0:l.defaultHotkeys)||[]).map(gs),d=Ys(i.modifiers,i.key);E.debug(`[hotkeys] assign:start id=${n} new=${Oi(d)} defaults=${ai(m)} custom=${ai(c)}`);const v=l!=null&&l.customHotkeys&&l.customHotkeys.length?l.customHotkeys:(l==null?void 0:l.defaultHotkeys)||[],g=new Map;for(const S of v){const P=gs(S);g.set(Ei(P),P)}const p=Ys(i.modifiers,i.key),_=Ei(p);g.set(_,p);const b=Array.from(g.values()),C=b.map(S=>({modifiers:vs(S.modifiers),key:rc(S.key)})).reduce((S,P)=>{const L=`${P.modifiers.join(",")}|${Et(P.key)}`;return S.some(x=>`${x.modifiers.join(",")}|${Et(x.key)}`===L)||S.push(P),S},[]);E.debug(`[hotkeys] assign:apply id=${n} add=${Oi(p)} next=${ai(b)} persisted=${ai(C,!0)}`),r.setHotkeys(n,C),r.save(),typeof r.load=="function"&&r.load(),r.bake();try{const S=new Set(((l==null?void 0:l.defaultHotkeys)||[]).map(A=>{const R=Ys(A.modifiers,A.key);return`${vs(R.modifiers).join(",")}|${Et(R.key)}`})),P=new Set((C||[]).map(A=>`${A.modifiers.join(",")}|${Et(A.key)}`)),L=S.size===P.size&&[...S].every(A=>P.has(A)),x=!!(r!=null&&r.customKeys&&n in r.customKeys);L&&!x&&(r.customKeys&&(r.customKeys[n]=C),r.save(),typeof r.load=="function"&&r.load(),r.bake())}catch{}Rs.set({id:n,prevCustom:u});try{const S=((w=e.getCommandsIndex()[n])==null?void 0:w.name)||n;ji.update(P=>[`${Oi(p)} — ${S}`,...P].slice(0,20)),Nn.update(P=>{const L=new Map(P);return L.has(n)||L.set(n,{id:n,prevCustom:u,name:S}),L})}catch{}e.refreshIndex(),setTimeout(()=>{try{e.refreshIndex()}catch{}},100)}async function kp(t,e,n){var u;const i=Vs(t);if(!i.remove||!i.save||!i.bake)throw new Error("Hotkey APIs unavailable");const o=t.hotkeyManager,a=e.getCommandsIndex()[n],l=a!=null&&a.customHotkeys?ho(a.customHotkeys):[],c=l.length?l:null;E.debug(`[hotkeys] restore:start id=${n} prevCustom=${ai(l)}`),o.removeHotkeys(n),o.save(),typeof o.load=="function"&&o.load(),o.bake(),Rs.set({id:n,prevCustom:c}),e.refreshIndex(),setTimeout(()=>{try{e.refreshIndex()}catch{}},100),E.info(`[hotkeys] restore:done id=${n}`);try{const m=((u=e.getCommandsIndex()[n])==null?void 0:u.name)||n;ji.update(d=>[`defaults — ${m}`,...d].slice(0,20)),Nn.update(d=>{const v=new Map(d);return v.has(n)||v.set(n,{id:n,prevCustom:c,name:m}),v})}catch{}}async function wp(t,e,n,i){var S,P;const o=Vs(t);if(!o.set||!o.save||!o.bake)throw new Error("Hotkey APIs unavailable");const r=t.hotkeyManager,l=e.getCommandsIndex()[n],c=l!=null&&l.customHotkeys?ho(l.customHotkeys):[],u=c.length?c:null,m=((l==null?void 0:l.defaultHotkeys)||[]).map(gs),d=l!=null&&l.customHotkeys&&l.customHotkeys.length?ho(l.customHotkeys):m,v="modifiers"in i?Ys(i.modifiers,i.key):gs(i),g=Ei(v),p=new Map;for(const L of d){const x=Ei(L);x!==g&&p.set(x,L)}const _=Array.from(p.values()),b=m.map(L=>Ei(L)).sort(),C=_.map(L=>Ei(L)).sort(),w=b.length===C.length&&b.every((L,x)=>L===C[x]);if(E.debug(`[hotkeys] remove:start id=${n} target=${Oi(v)} base=${ai(d)} next=${ai(_)} equalsDefaults=${String(w)}`),w){if(!o.remove)throw new Error("Remove API unavailable");r.removeHotkeys(n)}else{const L=_.map(x=>({modifiers:vs(x.modifiers),key:rc(x.key)})).reduce((x,A)=>{const R=`${A.modifiers.join(",")}|${Et(A.key)}`;return x.some(Z=>`${Z.modifiers.join(",")}|${Et(Z.key)}`===R)||x.push(A),x},[]);r.setHotkeys(n,L);try{if(L.length===0){const x=()=>{try{const A=r.getHotkeys&&r.getHotkeys(n)||[];return Array.isArray(A)&&A.length>0}catch{return!0}};if(x()&&(r.customKeys&&(r.customKeys[n]=[]),r.save(),typeof r.load=="function"&&r.load(),r.bake()),x()){try{(S=r.setHotkeys)==null||S.call(r,n,null)}catch{}r.save(),typeof r.load=="function"&&r.load(),r.bake()}x()&&(r.customKeys&&(r.customKeys[n]=null),r.save(),typeof r.load=="function"&&r.load(),r.bake())}}catch{}}r.save(),typeof r.load=="function"&&r.load(),r.bake(),Rs.set({id:n,prevCustom:u}),e.refreshIndex(),setTimeout(()=>{try{e.refreshIndex()}catch{}},100),E.info(`[hotkeys] remove:done id=${n}`);try{const L=((P=e.getCommandsIndex()[n])==null?void 0:P.name)||n;ji.update(x=>[`− ${Oi(v)} — ${L}`,...x].slice(0,20)),Nn.update(x=>{const A=new Map(x);return A.has(n)||A.set(n,{id:n,prevCustom:u,name:L}),A})}catch{}}async function Sp(t,e){const n=Vs(t);if(!n.save||!n.bake)return 0;const i=t.hotkeyManager,o=Ll(Nn);if(!o||o.size===0)return 0;let r=0;for(const[a,l]of o.entries())try{if(l.prevCustom&&l.prevCustom.length)i.setHotkeys(a,l.prevCustom);else{if(!n.remove)continue;i.removeHotkeys(a)}r++}catch{}i.save(),typeof i.load=="function"&&i.load(),i.bake(),e.refreshIndex(),setTimeout(()=>{try{e.refreshIndex()}catch{}},100),Nn.set(new Map),Rs.set(null);try{ji.update(a=>[`undo-all n=${r}`,...a].slice(0,20))}catch{}return r}async function Mp(t,e,n){var a;const i=Vs(t);if(!i.save||!i.bake)return!1;let o;if(Nn.update(l=>(o=l.get(n),l)),!o)return!1;const r=t.hotkeyManager;if(o.prevCustom&&o.prevCustom.length)r.setHotkeys(n,o.prevCustom);else{if(!i.remove)return!1;r.removeHotkeys(n)}r.save(),typeof r.load=="function"&&r.load(),r.bake(),e.refreshIndex(),Nn.update(l=>{const c=new Map(l);return c.delete(n),c});try{const l=((a=e.getCommandsIndex()[n])==null?void 0:a.name)||n;ji.update(c=>[`revert — ${l}`,...c].slice(0,20))}catch{}return!0}var Cp=(t,e)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e.onCancel()),xp=T('<div class="kba-chord svelte-i5od7f"> </div>'),Ap=T('<div class="kba-conflict-item svelte-i5od7f"> <span class="u-muted svelte-i5od7f"> </span></div>'),Dp=T('<div class="kba-conflicts svelte-i5od7f"><div class="kba-conflicts-title svelte-i5od7f">Conflicts:</div> <!></div>'),Ep=T('<div class="kba-note u-muted svelte-i5od7f">“Pin and confirm” will pin this command and all conflicting ones.</div>'),Lp=T('<button class="mod-cta svelte-i5od7f">Pin and confirm</button>'),Pp=T('<div class="kba-modal-backdrop svelte-i5od7f" role="button" tabindex="0"></div> <div class="kba-modal svelte-i5od7f" role="dialog" aria-modal="true"><div class="kba-modal-header svelte-i5od7f"><h3> </h3></div> <div class="kba-modal-body svelte-i5od7f"><!> <div class="kba-message"> </div> <!> <!></div> <div class="kba-modal-footer svelte-i5od7f"><!> <button class="mod-cta svelte-i5od7f">Confirm</button> <button>Cancel</button></div></div>',1);function Ea(t,e){sn(e,!0);let n=Ae(e,"conflicts",19,()=>[]);var i=Pp(),o=De(i);o.__click=function(...A){var R;(R=e.onCancel)==null||R.apply(this,A)},o.__keydown=[Cp,e];var r=k(o,2),a=h(r),l=h(a),c=h(l),u=k(a,2),m=h(u);{var d=A=>{var R=xp(),Z=h(R);B(()=>ae(Z,e.chord)),M(A,R)};W(m,A=>{e.chord&&A(d)})}var v=k(m,2),g=h(v),p=k(v,2);{var _=A=>{var R=Dp(),Z=k(h(R),2);at(Z,17,n,Nt,(V,oe)=>{var N=Ap(),I=h(N),j=k(I),K=h(j);B(()=>{ae(I,`${s(oe).name??""} `),ae(K,`(${s(oe).id??""})`)}),M(V,N)}),M(A,R)};W(p,A=>{n().length&&A(_)})}var b=k(p,2);{var C=A=>{var R=Ep();M(A,R)};W(b,A=>{e.onConfirmPin&&A(C)})}var w=k(u,2),S=h(w);{var P=A=>{var R=Lp();R.__click=function(...Z){var V;(V=e.onConfirmPin)==null||V.apply(this,Z)},M(A,R)};W(S,A=>{e.onConfirmPin&&A(P)})}var L=k(S,2);L.__click=function(...A){var R;(R=e.onConfirm)==null||R.apply(this,A)};var x=k(L,2);x.__click=function(...A){var R;(R=e.onCancel)==null||R.apply(this,A)},B(()=>{fe(r,"aria-label",e.title),ae(c,e.title),ae(g,e.message)}),M(t,i),on()}Mn(["click","keydown"]);async function Tp(t,e,n){await Sp(e.app,n)}async function zp(t,e){var n,i,o,r,a,l,c;E.debug("[hotkeys] openVaultFolder: invoked");try{const u=e.app.vault.adapter,m=u==null?void 0:u.basePath,d=(n=e.app)==null?void 0:n.openWithDefaultApp;if(E.debug("[hotkeys] openVaultFolder: adapter/basePath/opener",{hasAdapter:!!u,basePath:m,hasOpener:typeof d=="function"}),!m){E.warn("[hotkeys] openVaultFolder: missing basePath on adapter");return}if(typeof d!="function"){E.warn("[hotkeys] openVaultFolder: app.openWithDefaultApp not available");return}const v=m.includes("\\")?"\\":"/",g=m.replace(/[\\/]+$/,""),p=`${g}${v}.obsidian`,_=`${p}${v}hotkeys.json`;E.debug("[hotkeys] openVaultFolder: trying .obsidian dir",p);try{await d.call(e.app,p),E.info("[hotkeys] openVaultFolder: opened .obsidian directory");try{const b=(o=(i=globalThis==null?void 0:globalThis.require)==null?void 0:i.call(globalThis,"electron"))==null?void 0:o.shell;if(b!=null&&b.showItemInFolder)b.showItemInFolder(_),E.info("[hotkeys] openVaultFolder: reveal via shell.showItemInFolder(hotkeys.json)");else if(b!=null&&b.openPath){const C=await b.openPath(p);E.info("[hotkeys] openVaultFolder: shell.openPath(.obsidian) =>",C||"ok")}}catch(b){E.warn("[hotkeys] openVaultFolder: electron shell fallback failed",{err:b})}return}catch(b){E.warn("[hotkeys] openVaultFolder: failed opening .obsidian, try hotkeys.json",{err:b})}try{await d.call(e.app,_),E.info("[hotkeys] openVaultFolder: opened hotkeys.json");try{const b=(a=(r=globalThis==null?void 0:globalThis.require)==null?void 0:r.call(globalThis,"electron"))==null?void 0:a.shell;b!=null&&b.showItemInFolder&&(b.showItemInFolder(_),E.info("[hotkeys] openVaultFolder: reveal via shell.showItemInFolder(hotkeys.json)"))}catch(b){E.warn("[hotkeys] openVaultFolder: electron shell fallback 2 failed",{err:b})}return}catch(b){E.warn("[hotkeys] openVaultFolder: failed opening hotkeys.json, fallback to vault root",{err:b})}try{await d.call(e.app,g),E.info("[hotkeys] openVaultFolder: opened vault root");try{const b=(c=(l=globalThis==null?void 0:globalThis.require)==null?void 0:l.call(globalThis,"electron"))==null?void 0:c.shell;if(b!=null&&b.openPath){const C=await b.openPath(g);E.info("[hotkeys] openVaultFolder: shell.openPath(vaultRoot) =>",C||"ok")}}catch(b){E.warn("[hotkeys] openVaultFolder: electron shell fallback 3 failed",{err:b})}return}catch(b){E.error("[hotkeys] openVaultFolder: failed opening vault root",{err:b})}}catch(u){E.error("[hotkeys] openVaultFolder: fatal error",{err:u})}}function Op(t,e,n){const i=new Set;for(const o of s(e))i.add(o.pluginName);y(n,i,!0)}function Kp(t,e){y(e,new Set,!0)}var Fp=T(`<div class="empty-title svelte-lcrtz2">This group is empty</div> <div class="empty-subtitle svelte-lcrtz2">Add commands from the “All Commands” list using the folder icon, or
            manage groups.</div>`,1),Ip=T('<div class="empty-title svelte-lcrtz2">No matching commands</div> <div class="empty-subtitle svelte-lcrtz2">Try a different term or adjust filters.</div>',1),$p=T('<ul class="empty-hints svelte-lcrtz2"><li class="svelte-lcrtz2">Press Esc to clear keys</li> <li class="svelte-lcrtz2">Use the Filter button to tweak results</li> <li class="svelte-lcrtz2">Include built-ins if hidden</li></ul>'),Gp=T('<div class="empty-state svelte-lcrtz2" role="status" aria-live="polite"><div class="empty-icon svelte-lcrtz2"><!></div> <!> <!></div>'),Np=(t,e,n)=>e(s(n).pluginName),Rp=T("<button> </button>"),Vp=(t,e,n)=>e(s(n).id),qp=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),Hp=T('<div class="pin-icon icon svelte-lcrtz2" role="button" tabindex="0" title="Unpin from top"><!></div>'),Bp=T('<small class="svelte-lcrtz2"> </small>'),Wp=(t,e,n)=>e(s(n).id),Up=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),jp=T('<span class="row-action-icon setting-restore-hotkey-button svelte-lcrtz2" role="button" tabindex="0"><!></span>'),Qp=(t,e,n,i)=>{t.stopPropagation(),e(s(n).id,s(i))},Yp=(t,e,n,i)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id,s(i))),Xp=T('<span class="chip-remove svelte-lcrtz2" role="button" tabindex="0" title="Remove this hotkey">×</span>'),Zp=T('<span role="button" tabindex="0"> <!></span>'),Jp=T('<span class="kbanalizer-setting-hotkey setting-hotkey mod-active svelte-lcrtz2"> </span>'),em=(t,e,n)=>e(s(n).id),tm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),nm=T('<span class="row-action-icon setting-add-hotkey-button svelte-lcrtz2" role="button" tabindex="0" aria-label="Customize this command" title="Customize this command"><!></span>'),im=T('<div><div class="setting-item-info svelte-lcrtz2"><div class="setting-item-name svelte-lcrtz2"><!> <span> </span> <div class="action-icons svelte-lcrtz2"><!></div></div> <!></div> <div class="kbanalizer-setting-item-control setting-item-control svelte-lcrtz2"><!> <div class="setting-command-hotkeys svelte-lcrtz2"><!> <!></div></div></div>'),sm=T('<div class="pinned-container svelte-lcrtz2"><div class="pinned-header svelte-lcrtz2">Pinned</div> <!></div>'),om=(t,e,n)=>e(s(n).pluginName),rm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).pluginName)),am=T('<span class="plugin-badge built-in svelte-lcrtz2">built-in</span>'),lm=(t,e,n)=>e(s(n).id),cm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),um=T('<div class="pin-icon icon svelte-lcrtz2" role="button" tabindex="0"><!></div>'),dm=(t,e,n)=>e(s(n).id),fm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),vm=(t,e,n)=>e(t,s(n).id),pm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(t,s(n).id)),mm=T('<small class="svelte-lcrtz2"> </small>'),hm=(t,e,n)=>e(s(n).id),gm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),ym=T('<span class="row-action-icon setting-restore-hotkey-button svelte-lcrtz2" role="button" tabindex="0"><!></span>'),_m=(t,e,n,i)=>e(s(n),s(i)),bm=(t,e,n,i)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n),s(i))),km=(t,e,n,i)=>{t.stopPropagation(),e(s(n).id,s(i))},wm=(t,e,n,i)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id,s(i))),Sm=T('<span class="chip-remove svelte-lcrtz2" role="button" tabindex="0" title="Remove this hotkey">×</span>'),Mm=T('<span role="button" tabindex="0"> <!></span>'),Cm=T('<span class="kbanalizer-setting-hotkey setting-hotkey mod-active svelte-lcrtz2"> </span>'),xm=(t,e,n)=>e(s(n).id),Am=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),Dm=T('<span class="row-action-icon setting-add-hotkey-button svelte-lcrtz2" role="button" tabindex="0" aria-label="Customize this command" title="Customize this command"><!></span>'),Em=T('<div><div class="setting-item-info svelte-lcrtz2"><div class="setting-item-name svelte-lcrtz2"><span> </span> <div class="action-icons svelte-lcrtz2"><!> <div class="star-icon icon svelte-lcrtz2" role="button" tabindex="0"><!></div> <div class="menu-anchor svelte-lcrtz2"><div class="folder-plus-icon icon svelte-lcrtz2" title="Add to group" role="button" tabindex="0"><!></div> <!></div></div></div> <!></div> <div class="kbanalizer-setting-item-control setting-item-control svelte-lcrtz2"><!> <div class="setting-command-hotkeys svelte-lcrtz2"><!> <!></div></div></div>'),Lm=T('<div class="plugin-group-body svelte-lcrtz2"></div>'),Pm=T('<div class="plugin-group svelte-lcrtz2"><div role="button" tabindex="0"><span><!></span> <span class="plugin-name svelte-lcrtz2"> </span> <!> <span class="plugin-meta u-muted svelte-lcrtz2"> </span></div> <!></div>'),Tm=T('<!> <div class="plugin-groups-toolbar svelte-lcrtz2"><button class="btn-filter svelte-lcrtz2">Collapse all</button> <button class="btn-filter svelte-lcrtz2">Expand all</button></div> <!>',1),zm=(t,e,n)=>e(s(n).pluginName),Om=T("<button> </button>"),Km=(t,e,n)=>e(s(n).id),Fm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),Im=T('<div class="pin-icon icon svelte-lcrtz2" role="button" tabindex="0" title="Unpin from top"><!></div>'),$m=T('<small class="svelte-lcrtz2"> </small>'),Gm=(t,e,n)=>e(s(n).id),Nm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),Rm=T('<span class="row-action-icon setting-restore-hotkey-button svelte-lcrtz2" role="button" tabindex="0"><!></span>'),Vm=(t,e,n,i)=>{t.stopPropagation(),e(s(n).id,s(i))},qm=(t,e,n,i)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id,s(i))),Hm=T('<span class="chip-remove svelte-lcrtz2" role="button" tabindex="0" title="Remove this hotkey">×</span>'),Bm=T('<span role="button" tabindex="0"> <!></span>'),Wm=T('<span class="kbanalizer-setting-hotkey setting-hotkey mod-active svelte-lcrtz2"> </span>'),Um=(t,e,n)=>e(s(n).id),jm=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),Qm=T('<span class="row-action-icon setting-add-hotkey-button svelte-lcrtz2" role="button" tabindex="0" aria-label="Customize this command" title="Customize this command"><!></span>'),Ym=T('<div><div class="setting-item-info svelte-lcrtz2"><div class="setting-item-name svelte-lcrtz2"><!> <span> </span> <div class="action-icons svelte-lcrtz2"><!></div></div> <!></div> <div class="kbanalizer-setting-item-control setting-item-control svelte-lcrtz2"><!> <div class="setting-command-hotkeys svelte-lcrtz2"><!> <!></div></div></div>'),Xm=T('<div class="pinned-container svelte-lcrtz2"><div class="pinned-header svelte-lcrtz2">Pinned</div> <!></div>'),Zm=(t,e,n)=>e(s(n).pluginName),Jm=T("<button> </button>"),eh=(t,e,n)=>e(s(n).id),th=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),nh=T('<div class="pin-icon icon svelte-lcrtz2" role="button" tabindex="0"><!></div>'),ih=(t,e,n)=>e(s(n).id),sh=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),oh=T('<div class="star-icon icon svelte-lcrtz2" role="button" tabindex="0"><!></div>'),rh=(t,e,n)=>e(t,s(n).id),ah=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(t,s(n).id)),lh=T('<div class="folder-plus-icon icon svelte-lcrtz2" title="Add to group" role="button" tabindex="0"><!></div>'),ch=T('<small class="svelte-lcrtz2"> </small>'),uh=(t,e,n)=>e(s(n).id),dh=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),fh=T('<span class="row-action-icon setting-restore-hotkey-button svelte-lcrtz2" role="button" tabindex="0" aria-label="Restore default" title="Restore default"><!></span>'),vh=(t,e,n,i)=>e(s(n),s(i)),ph=(t,e,n,i)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n),s(i))),mh=(t,e,n,i)=>{t.stopPropagation(),e(s(n).id,s(i))},hh=(t,e,n,i)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id,s(i))),gh=T('<span class="chip-remove svelte-lcrtz2" role="button" tabindex="0" title="Remove this hotkey">×</span>'),yh=T('<span role="button" tabindex="0"> <!></span>'),_h=T('<span class="kbanalizer-setting-hotkey setting-hotkey mod-active svelte-lcrtz2"> </span>'),bh=(t,e,n)=>e(s(n).id),kh=(t,e,n)=>(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),e(s(n).id)),wh=T('<span class="row-action-icon setting-add-hotkey-button svelte-lcrtz2" role="button" tabindex="0" aria-label="Customize this command" title="Customize this command"><!></span>'),Sh=T('<div><div class="setting-item-info svelte-lcrtz2"><div class="setting-item-name svelte-lcrtz2"><!> <span> </span> <div class="action-icons svelte-lcrtz2"><!> <!> <div class="menu-anchor svelte-lcrtz2"><!> <!></div></div></div> <!></div> <div class="kbanalizer-setting-item-control setting-item-control svelte-lcrtz2"><!> <div class="setting-command-hotkeys svelte-lcrtz2"><!> <!></div></div></div>'),Mh=T("<!> <!>",1),Ch=(t,e,n)=>e(s(n)),xh=T('<strong class="svelte-lcrtz2"> </strong>'),Ah=(t,e,n,i)=>Mp(e.app,n,s(i)),Dh=T('<li class="svelte-lcrtz2"><button class="linkish svelte-lcrtz2"><em class="svelte-lcrtz2"> </em></button> — <!> <button class="btn-banner svelte-lcrtz2" title="Revert this change">Revert</button></li>'),Eh=T('<button class="btn-banner svelte-lcrtz2" title="Clear revert list and exit Edit mode">Keep changes</button>'),Lh=T('<button class="btn-banner is-accent svelte-lcrtz2" title="Undo all hotkey changes">Undo all</button>'),Ph=T('<div class="hotkey-update-banner is-fixed svelte-lcrtz2" role="status" aria-live="polite"><div class="banner-row notice-row svelte-lcrtz2"><div class="banner-text svelte-lcrtz2"><strong class="svelte-lcrtz2">Edit mode is ON</strong> — This editor is beta/unstable. For safety, prefer the built‑in Hotkeys settings for assignments. Important: back up your vault’s <code class="svelte-lcrtz2">.obsidian/hotkeys.json</code> before using Edit mode.</div></div> <div class="banner-row controls-row svelte-lcrtz2"><details class="changes-toggle svelte-lcrtz2"><summary class="svelte-lcrtz2">Latest changes</summary> <ul class="log-list svelte-lcrtz2"></ul></details> <div class="banner-actions svelte-lcrtz2"><button class="btn-banner svelte-lcrtz2" title="Open your vault folder in the system file explorer">Open vault folder</button> <!> <!></div></div></div>'),Th=T('<div id="hotkeys-wrapper" class="markdown-preview-sizer markdown-preview-section hotkey-settings-container svelte-lcrtz2"><div class="hotkey-list-container svelte-lcrtz2"><!></div> <!></div> <!> <!>',1);function zh(t,e){sn(e,!0);const[n,i]=Ru(),o=()=>Nu(Da,"$lastHotkeyChange",n);let r=G(Ye([])),a=G(""),l=G(Ye(new Set));pi(()=>{const z=ji.subscribe(O=>{y(r,O,!0),y(a,(O==null?void 0:O[0])||"",!0)}),f=Nn.subscribe(O=>{y(l,new Set(O.keys()),!0)});return()=>{try{z==null||z(),f==null||f()}catch{}}});let c=Ae(e,"filteredCommands",27,()=>Ye([])),u=Ae(e,"selectedGroup",11,"all");const m=ln("keyboard-analyzer-plugin"),d=m.settingsManager,v=m.groupManager,g=m.commandsManager,p=m.hotkeyManager,_=ln("visualKeyboardManager"),b=ln("activeKeysStore");let C=G(0);pi(()=>{const z=m.commandsManager.subscribe(()=>{nr(C)});return()=>{try{z==null||z()}catch{}}});const w=Ce(()=>(v.groups,v.getGroupSettings(u()))),S=Ce(()=>{var f;if(!u()||u()==="all")return!1;const z=v.getGroup(u());return!z||(((f=z.commandIds)==null?void 0:f.length)||0)===0});function P(z){return d.settings.useBakedKeyNames?po(z):p.renderHotkey(z)}const L=Ce(()=>new Set(d.settings.featuredCommandIDs||[]));function x(z,f){var ke,He;const O=(f||"").trim(),H=z||"";if(!O)return H;const ie=H.toLowerCase(),ce=`${O.toLowerCase()}: `;return(((ke=s(w))==null?void 0:ke.GroupByPlugin)||((He=s(w))==null?void 0:He.ShowPluginBadges))&&ie.startsWith(ce)?H.slice(ce.length).trim():H}function A(z){var f;(f=e.onStarClick)==null||f.call(e,z)}function R(z){var f;(f=e.onPluginNameClick)==null||f.call(e,z)}function Z(z,f){var O;f&&b.devSetLastCommand(f),(O=e.onDuplicateHotkeyClick)==null||O.call(e,z)}let V=G(!1);Dt(()=>{const z=mo.subscribe(f=>y(V,f,!0));return()=>z()}),Dt(()=>{!s(V)&&s(ve).size>0&&y(ve,new Set,!0)});let oe=G(null),N=G(""),I=G(null),j=G(null);function K(z){y(oe,z,!0),y(N,"Press hotkey..."),window.addEventListener("keydown",X,!0),window.addEventListener("keypress",D,!0),window.addEventListener("keyup",D,!0)}function ne(){window.removeEventListener("keydown",X,!0),window.removeEventListener("keypress",D,!0),window.removeEventListener("keyup",D,!0),y(oe,null),y(N,"")}function D(z){z.preventDefault(),z.stopPropagation()}async function X(z){if(z.preventDefault(),z.stopPropagation(),z.key==="Escape"){ne();return}if(z.key==="Shift"||z.key==="Control"||z.key==="Alt"||z.key==="Meta"){y(N,"Press hotkey...");return}const f=[];z.metaKey&&f.push("Meta"),z.ctrlKey&&f.push("Ctrl"),z.altKey&&f.push("Alt"),z.shiftKey&&f.push("Shift");const O=xt(f),H=Et((z.code||"").toLowerCase());y(N,`${O.join(" ")}${O.length?" ":""}${H}`);const ie=s(oe);if(ne(),!!ie)try{const ce=qi.makeHotkeyKey({modifiers:O,key:H}),pe=g.getCommandsByHotkeyKey(ce).filter(ke=>ke&&ke.id!==ie);pe.length>0?y(I,{id:ie,chord:s(N),mods:O,key:H,conflicts:pe},!0):await Yo(m.app,g,ie,{modifiers:O,key:H})}catch(ce){E.error("[hotkeys] assign: error",{err:ce})}}async function ye(z){try{const f=g.getCommandsIndex()[z];if(!f)return;y(j,{id:z,name:f.name},!0)}catch(f){E.error("[hotkeys] restore: prep error",{err:f})}}let ve=G(Ye(new Set));function _e(z){const f=new Set(s(ve));f.has(z)?f.delete(z):f.add(z),y(ve,f,!0)}function ze(z){return s(ve).has(z)}function Ke(z){const f=new Set(s(ve));for(const O of z)f.add(O);y(ve,f,!0)}const tt=Ce(()=>{s(C);const z=g.getCommandsIndex();return Array.from(s(ve)).map(f=>z[f]).filter(Boolean)});async function ot(z,f){await wp(m.app,g,z,f)}function Lt(z){try{const f=document.getElementById(`cmd-row-${z}`);f&&(f.scrollIntoView({behavior:"smooth",block:"center"}),f.classList.add("flash"),setTimeout(()=>f.classList.remove("flash"),800))}catch{}}function Ut(){try{Nn.set(new Map)}catch{}try{Da.set(null)}catch{}try{mo.set(!1)}catch{}}function Mt(z){return((z==null?void 0:z.pluginName)||"")==="System Shortcuts"}function Ot(z){return Mt(z)?!1:(z.customHotkeys||[]).length>0}function It(z){const f=z.defaultHotkeys||[];return f.length===0?"Restore default":`Restore default (${f.map(H=>P(H)).join(", ")})`}function Te(z){const f=En(z.modifiers);_.updateVisualState(b.ActiveKey,b.ActiveModifiers),_.previewHoverState(z.key,f)}function je(){_.updateVisualState(b.ActiveKey,b.ActiveModifiers)}const Ct=z=>z.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");let lt=G(Ye(new Set));function ee(z){const f=new Set(s(lt));f.has(z)?f.delete(z):f.add(z),y(lt,f,!0)}function le(z){return s(lt).has(z)}let ue=G(null);function de(z,f){z.stopPropagation();const O=s(ue)===f;y(ue,O?null:f,!0)}const Xe=Ce(()=>{s(w);const z=new Map;for(const O of c().filter(H=>!s(ve).has(H.id))){const H=O.pluginName||"Unknown",ie=z.get(H)||[];ie.push(O),z.set(H,ie)}const f=Array.from(z.entries()).map(([O,H])=>{var ce;(ce=s(w))!=null&&ce.FeaturedFirst&&(H=[...H].sort((pe,ke)=>{const He=g.featuredCommandIds.has(pe.id),Le=g.featuredCommandIds.has(ke.id);return He&&!Le?-1:!He&&Le?1:0}));const ie=H.some(pe=>pe.isInternalModule);return{pluginName:O,commands:H,isBuiltIn:ie}});return f.sort((O,H)=>O.pluginName.localeCompare(H.pluginName)),f});var qe=Th(),mt=De(qe),_t=h(mt),At=h(_t);{var $t=z=>{var f=Gp(),O=h(f),H=h(O);Sf(H,{size:28});var ie=k(O,2);{var ce=Le=>{var Ge=Fp();M(Le,Ge)},pe=Le=>{var Ge=Ip();M(Le,Ge)};W(ie,Le=>{s(S)?Le(ce):Le(pe,!1)})}var ke=k(ie,2);{var He=Le=>{var Ge=$p();M(Le,Ge)};W(ke,Le=>{s(S)||Le(He)})}M(z,f)},Zt=z=>{var f=et(),O=De(f);{var H=ce=>{var pe=Tm(),ke=De(pe);{var He=Be=>{var te=sm(),ht=k(h(te),2);at(ht,17,()=>s(tt),Ze=>Ze.id,(Ze,we)=>{var Fe=im();let gt;var ut=h(Fe),bt=h(ut),Pt=h(bt);{var jt=$=>{var F=Rp();F.__click=[Np,R,we];var J=h(F);B(()=>{var Oe;Me(F,1,`suggestion-prefix ${s(we).isInternalModule&&((Oe=s(w))!=null&&Oe.HighlightBuiltIns)?"is-builtin":""}`,"svelte-lcrtz2"),ae(J,s(we).pluginName)}),M($,F)};W(Pt,$=>{var F;(F=s(w))!=null&&F.ShowPluginBadges&&$(jt)})}var kt=k(Pt,2);let dt;var nt=h(kt),Ne=k(kt,2),Re=h(Ne);{var ft=$=>{var F=Hp();F.__click=[Vp,_e,we],F.__keydown=[qp,_e,we];var J=h(F);is(J,{size:16}),M($,F)};W(Re,$=>{s(V)&&$(ft)})}var me=k(bt,2);{var yt=$=>{var F=Bp(),J=h(F);B(()=>ae(J,s(we).id)),M($,F)};W(me,$=>{var F;(F=s(w))!=null&&F.DisplayIDs&&$(yt)})}var qt=k(ut,2),Ht=h(qt);{var se=$=>{var F=jp();F.__click=[Wp,ye,we],F.__keydown=[Up,ye,we];var J=h(F);ss(J,{size:16}),B((Oe,Ie)=>{fe(F,"aria-label",Oe),fe(F,"title",Ie)},[()=>It(s(we)),()=>It(s(we))]),M($,F)};W(Ht,$=>{s(V)&&Ot(s(we))&&$(se)})}var Pe=k(Ht,2),he=h(Pe);at(he,17,()=>s(we).hotkeys,Nt,($,F)=>{var J=Zp();let Oe;var Ie=h(J),Se=k(Ie);{var We=it=>{var Bt=Xp();Bt.__click=[Qp,ot,we,F],Bt.__keydown=[Yp,ot,we,F],M(it,Bt)};W(Se,it=>{s(V)&&!Mt(s(we))&&it(We)})}B((it,Bt)=>{Oe=Me(J,1,"kbanalizer-setting-hotkey setting-hotkey svelte-lcrtz2",null,Oe,it),ae(Ie,`${Bt??""} `)},[()=>{var it,Bt;return{"is-duplicate":p.isHotkeyDuplicate(s(we).id,s(F))&&((it=s(w))==null?void 0:it.HighlightDuplicates),"is-customized":s(F).isCustom&&((Bt=s(w))==null?void 0:Bt.HighlightCustom)}},()=>P(s(F))]),$e("mouseenter",J,()=>Te(s(F))),$e("mouseleave",J,je),M($,J)});var Y=k(he,2);{var U=$=>{var F=et(),J=De(F);{var Oe=Se=>{var We=Jp(),it=h(We);B(()=>ae(it,s(N)||"Press hotkey...")),M(Se,We)},Ie=Se=>{var We=nm();We.__click=[em,K,we],We.__keydown=[tm,K,we];var it=h(We);Us(it,{size:16}),M(Se,We)};W(J,Se=>{s(oe)===s(we).id?Se(Oe):Se(Ie,!1)})}M($,F)};W(Y,$=>{s(V)&&!Mt(s(we))&&$(U)})}B(($,F,J)=>{fe(Fe,"id",`cmd-row-${s(we).id}`),gt=Me(Fe,1,"kbanalizer-setting-item setting-item is-pinned svelte-lcrtz2",null,gt,$),dt=Me(kt,1,"command-name svelte-lcrtz2",null,dt,F),ae(nt,J)},[()=>({"is-starred":s(L).has(s(we).id)}),()=>({"is-modified":s(l).has(s(we).id)}),()=>x(s(we).name,s(we).pluginName)]),M(Ze,Fe)}),M(Be,te)};W(ke,Be=>{s(ve).size>0&&Be(He)})}var Le=k(ke,2),Ge=h(Le);Ge.__click=[Op,Xe,lt];var Q=k(Ge,2);Q.__click=[Kp,lt];var xe=k(Le,2);at(xe,17,()=>s(Xe),Be=>Be.pluginName,(Be,te)=>{var ht=Pm(),Ze=h(ht);Ze.__click=[om,ee,te],Ze.__keydown=[rm,ee,te];var we=h(Ze),Fe=h(we);hf(Fe,{size:14});var gt=k(we,2),ut=h(gt),bt=k(gt,2);{var Pt=Ne=>{var Re=am();M(Ne,Re)};W(bt,Ne=>{s(te).isBuiltIn&&Ne(Pt)})}var jt=k(bt,2),kt=h(jt),dt=k(Ze,2);{var nt=Ne=>{var Re=Lm();at(Re,21,()=>s(te).commands,ft=>ft.id,(ft,me)=>{var yt=Em();let qt;var Ht=h(yt),se=h(Ht),Pe=h(se);let he;var Y=h(Pe),U=k(Pe,2),$=h(U);{var F=wt=>{var Je=um();Je.__click=[lm,_e,me],Je.__keydown=[cm,_e,me];var Gt=h(Je);is(Gt,{size:16}),B(qn=>fe(Je,"title",qn),[()=>ze(s(me).id)?"Unpin from top":"Pin to top"]),M(wt,Je)};W($,wt=>{s(V)&&wt(F)})}var J=k($,2);J.__click=[dm,A,me],J.__keydown=[fm,A,me];var Oe=h(J);Ca(Oe,{size:16});var Ie=k(J,2),Se=h(Ie);Se.__click=[vm,de,me],Se.__keydown=[pm,de,me];var We=h(Se);Ma(We,{size:16});var it=k(Se,2);{var Bt=wt=>{Aa(wt,{get commandId(){return s(me).id},onClose:()=>y(ue,null)})};W(it,wt=>{s(ue)===s(me).id&&wt(Bt)})}var No=k(se,2);{var ac=wt=>{var Je=mm(),Gt=h(Je);B(()=>ae(Gt,s(me).id)),M(wt,Je)};W(No,wt=>{var Je;(Je=s(w))!=null&&Je.DisplayIDs&&wt(ac)})}var lc=k(Ht,2),Rr=h(lc);{var cc=wt=>{var Je=ym();Je.__click=[hm,ye,me],Je.__keydown=[gm,ye,me];var Gt=h(Je);ss(Gt,{size:16}),B((qn,wi)=>{fe(Je,"aria-label",qn),fe(Je,"title",wi)},[()=>It(s(me)),()=>It(s(me))]),M(wt,Je)};W(Rr,wt=>{s(V)&&Ot(s(me))&&wt(cc)})}var uc=k(Rr,2),Vr=h(uc);at(Vr,17,()=>s(me).hotkeys,Nt,(wt,Je)=>{var Gt=Mm();let qn;Gt.__click=[_m,Z,Je,me],Gt.__keydown=[bm,Z,Je,me];var wi=h(Gt),Hn=k(wi);{var Fn=vn=>{var Bn=Sm();Bn.__click=[km,ot,me,Je],Bn.__keydown=[wm,ot,me,Je],M(vn,Bn)};W(Hn,vn=>{s(V)&&!Mt(s(me))&&vn(Fn)})}B((vn,Bn)=>{qn=Me(Gt,1,"kbanalizer-setting-hotkey setting-hotkey svelte-lcrtz2",null,qn,vn),ae(wi,`${Bn??""} `)},[()=>{var vn,Bn;return{"is-duplicate":p.isHotkeyDuplicate(s(me).id,s(Je))&&((vn=s(w))==null?void 0:vn.HighlightDuplicates),"is-customized":s(Je).isCustom&&((Bn=s(w))==null?void 0:Bn.HighlightCustom)}},()=>P(s(Je))]),$e("mouseenter",Gt,()=>Te(s(Je))),$e("mouseleave",Gt,je),M(wt,Gt)});var dc=k(Vr,2);{var fc=wt=>{var Je=et(),Gt=De(Je);{var qn=Hn=>{var Fn=Cm(),vn=h(Fn);B(()=>ae(vn,s(N)||"Press hotkey...")),M(Hn,Fn)},wi=Hn=>{var Fn=Dm();Fn.__click=[xm,K,me],Fn.__keydown=[Am,K,me];var vn=h(Fn);Us(vn,{size:16}),M(Hn,Fn)};W(Gt,Hn=>{s(oe)===s(me).id?Hn(qn):Hn(wi,!1)})}M(wt,Je)};W(dc,wt=>{s(V)&&!Mt(s(me))&&wt(fc)})}B((wt,Je,Gt)=>{fe(yt,"id",`cmd-row-${s(me).id}`),qt=Me(yt,1,"kbanalizer-setting-item setting-item compact svelte-lcrtz2",null,qt,wt),he=Me(Pe,1,"command-name svelte-lcrtz2",null,he,Je),ae(Y,Gt)},[()=>({"is-starred":s(L).has(s(me).id),"show-actions":s(ue)===s(me).id}),()=>({"is-modified":s(l).has(s(me).id)}),()=>x(s(me).name,s(me).pluginName)]),M(ft,yt)}),B(ft=>fe(Re,"id",ft),[()=>`group-${Ct(s(te).pluginName)}`]),M(Ne,Re)};W(dt,Ne=>{le(s(te).pluginName)||Ne(nt)})}B((Ne,Re,ft)=>{var me;Me(Ze,1,`plugin-group-header ${s(te).isBuiltIn&&((me=s(w))!=null&&me.HighlightBuiltIns)?"is-builtin":""}`,"svelte-lcrtz2"),fe(Ze,"aria-expanded",Ne),fe(Ze,"aria-controls",Re),Me(we,1,`chevron ${ft??""}`,"svelte-lcrtz2"),ae(ut,s(te).pluginName),ae(kt,`${s(te).commands.length??""} cmds`)},[()=>!le(s(te).pluginName),()=>`group-${Ct(s(te).pluginName)}`,()=>le(s(te).pluginName)?"is-collapsed":""]),M(Be,ht)}),M(ce,pe)},ie=ce=>{var pe=Mh(),ke=De(pe);{var He=Ge=>{var Q=Xm(),xe=k(h(Q),2);at(xe,17,()=>s(tt),Be=>Be.id,(Be,te)=>{var ht=Ym();let Ze;var we=h(ht),Fe=h(we),gt=h(Fe);{var ut=he=>{var Y=Om();Y.__click=[zm,R,te];var U=h(Y);B(()=>{var $;Me(Y,1,`suggestion-prefix ${s(te).isInternalModule&&(($=s(w))!=null&&$.HighlightBuiltIns)?"is-builtin":""}`,"svelte-lcrtz2"),ae(U,s(te).pluginName)}),M(he,Y)};W(gt,he=>{var Y;(Y=s(w))!=null&&Y.ShowPluginBadges&&he(ut)})}var bt=k(gt,2);let Pt;var jt=h(bt),kt=k(bt,2),dt=h(kt);{var nt=he=>{var Y=Im();Y.__click=[Km,_e,te],Y.__keydown=[Fm,_e,te];var U=h(Y);is(U,{size:16}),M(he,Y)};W(dt,he=>{s(V)&&he(nt)})}var Ne=k(Fe,2);{var Re=he=>{var Y=$m(),U=h(Y);B(()=>ae(U,s(te).id)),M(he,Y)};W(Ne,he=>{var Y;(Y=s(w))!=null&&Y.DisplayIDs&&he(Re)})}var ft=k(we,2),me=h(ft);{var yt=he=>{var Y=Rm();Y.__click=[Gm,ye,te],Y.__keydown=[Nm,ye,te];var U=h(Y);ss(U,{size:16}),B(($,F)=>{fe(Y,"aria-label",$),fe(Y,"title",F)},[()=>It(s(te)),()=>It(s(te))]),M(he,Y)};W(me,he=>{s(V)&&Ot(s(te))&&he(yt)})}var qt=k(me,2),Ht=h(qt);at(Ht,17,()=>s(te).hotkeys,Nt,(he,Y)=>{var U=Bm();let $;var F=h(U),J=k(F);{var Oe=Ie=>{var Se=Hm();Se.__click=[Vm,ot,te,Y],Se.__keydown=[qm,ot,te,Y],M(Ie,Se)};W(J,Ie=>{s(V)&&!Mt(s(te))&&Ie(Oe)})}B((Ie,Se)=>{$=Me(U,1,"kbanalizer-setting-hotkey setting-hotkey svelte-lcrtz2",null,$,Ie),ae(F,`${Se??""} `)},[()=>{var Ie,Se;return{"is-duplicate":p.isHotkeyDuplicate(s(te).id,s(Y))&&((Ie=s(w))==null?void 0:Ie.HighlightDuplicates),"is-customized":s(Y).isCustom&&((Se=s(w))==null?void 0:Se.HighlightCustom)}},()=>P(s(Y))]),$e("mouseenter",U,()=>Te(s(Y))),$e("mouseleave",U,je),M(he,U)});var se=k(Ht,2);{var Pe=he=>{var Y=et(),U=De(Y);{var $=J=>{var Oe=Wm(),Ie=h(Oe);B(()=>ae(Ie,s(N)||"Press hotkey...")),M(J,Oe)},F=J=>{var Oe=Qm();Oe.__click=[Um,K,te],Oe.__keydown=[jm,K,te];var Ie=h(Oe);Us(Ie,{size:16}),M(J,Oe)};W(U,J=>{s(oe)===s(te).id?J($):J(F,!1)})}M(he,Y)};W(se,he=>{s(V)&&!Mt(s(te))&&he(Pe)})}B((he,Y,U)=>{fe(ht,"id",`cmd-row-${s(te).id}`),Ze=Me(ht,1,"kbanalizer-setting-item setting-item is-pinned svelte-lcrtz2",null,Ze,he),Pt=Me(bt,1,"command-name svelte-lcrtz2",null,Pt,Y),ae(jt,U)},[()=>({"is-starred":s(L).has(s(te).id)}),()=>({"is-modified":s(l).has(s(te).id)}),()=>x(s(te).name,s(te).pluginName)]),M(Be,ht)}),M(Ge,Q)};W(ke,Ge=>{s(ve).size>0&&Ge(He)})}var Le=k(ke,2);at(Le,17,()=>c().filter(Ge=>!ze(Ge.id)),Ge=>Ge.id,(Ge,Q)=>{var xe=Sh();let Be;var te=h(xe),ht=h(te),Ze=h(ht);{var we=U=>{var $=Jm();$.__click=[Zm,R,Q];var F=h($);B(()=>{var J;Me($,1,`suggestion-prefix ${s(Q).isInternalModule&&((J=s(w))!=null&&J.HighlightBuiltIns)?"is-builtin":""}`,"svelte-lcrtz2"),ae(F,s(Q).pluginName)}),M(U,$)};W(Ze,U=>{var $;($=s(w))!=null&&$.ShowPluginBadges&&U(we)})}var Fe=k(Ze,2);let gt;var ut=h(Fe),bt=k(Fe,2),Pt=h(bt);{var jt=U=>{var $=nh();$.__click=[eh,_e,Q],$.__keydown=[th,_e,Q];var F=h($);is(F,{size:16}),B(J=>fe($,"title",J),[()=>ze(s(Q).id)?"Unpin from top":"Pin to top"]),M(U,$)};W(Pt,U=>{s(V)&&U(jt)})}var kt=k(Pt,2);{let U=Ce(()=>s(L).has(s(Q).id)?"Remove from featured commands":"Add to featured commands");mn(kt,{get content(){return s(U)},placement:"top",delay:500,get group(){return mr.ACTION_ICONS},children:($,F)=>{var J=oh();J.__click=[ih,A,Q],J.__keydown=[sh,A,Q];var Oe=h(J);Ca(Oe,{size:16}),M($,J)},$$slots:{default:!0}})}var dt=k(kt,2),nt=h(dt);mn(nt,{content:"Add command to a group for better organization",placement:"top",delay:500,get group(){return mr.ACTION_ICONS},children:(U,$)=>{var F=lh();F.__click=[rh,de,Q],F.__keydown=[ah,de,Q];var J=h(F);Ma(J,{size:16}),M(U,F)},$$slots:{default:!0}});var Ne=k(nt,2);{var Re=U=>{Aa(U,{get commandId(){return s(Q).id},onClose:()=>y(ue,null)})};W(Ne,U=>{s(ue)===s(Q).id&&U(Re)})}var ft=k(ht,2);{var me=U=>{var $=ch(),F=h($);B(()=>ae(F,s(Q).id)),M(U,$)};W(ft,U=>{var $;($=s(w))!=null&&$.DisplayIDs&&U(me)})}var yt=k(te,2),qt=h(yt);{var Ht=U=>{var $=fh();$.__click=[uh,ye,Q],$.__keydown=[dh,ye,Q];var F=h($);ss(F,{size:16}),M(U,$)};W(qt,U=>{s(V)&&U(Ht)})}var se=k(qt,2),Pe=h(se);at(Pe,17,()=>s(Q).hotkeys,Nt,(U,$)=>{var F=yh();let J;F.__click=[vh,Z,$,Q],F.__keydown=[ph,Z,$,Q];var Oe=h(F),Ie=k(Oe);{var Se=We=>{var it=gh();it.__click=[mh,ot,Q,$],it.__keydown=[hh,ot,Q,$],M(We,it)};W(Ie,We=>{s(V)&&We(Se)})}B((We,it)=>{J=Me(F,1,"kbanalizer-setting-hotkey setting-hotkey svelte-lcrtz2",null,J,We),ae(Oe,`${it??""} `)},[()=>{var We,it;return{"is-duplicate":p.isHotkeyDuplicate(s(Q).id,s($))&&((We=s(w))==null?void 0:We.HighlightDuplicates),"is-customized":s($).isCustom&&((it=s(w))==null?void 0:it.HighlightCustom)}},()=>P(s($))]),$e("mouseenter",F,()=>Te(s($))),$e("mouseleave",F,je),M(U,F)});var he=k(Pe,2);{var Y=U=>{var $=et(),F=De($);{var J=Ie=>{var Se=_h(),We=h(Se);B(()=>ae(We,s(N)||"Press hotkey...")),M(Ie,Se)},Oe=Ie=>{var Se=wh();Se.__click=[bh,K,Q],Se.__keydown=[kh,K,Q];var We=h(Se);Us(We,{size:16}),M(Ie,Se)};W(F,Ie=>{s(oe)===s(Q).id?Ie(J):Ie(Oe,!1)})}M(U,$)};W(he,U=>{s(V)&&U(Y)})}B((U,$,F)=>{fe(xe,"id",`cmd-row-${s(Q).id}`),Be=Me(xe,1,"kbanalizer-setting-item setting-item svelte-lcrtz2",null,Be,U),gt=Me(Fe,1,"command-name svelte-lcrtz2",null,gt,$),ae(ut,F)},[()=>({"is-starred":s(L).has(s(Q).id),"show-actions":s(ue)===s(Q).id}),()=>({"is-modified":s(l).has(s(Q).id)}),()=>x(s(Q).name,s(Q).pluginName)]),M(Ge,xe)}),M(ce,pe)};W(O,ce=>{var pe;(pe=s(w))!=null&&pe.GroupByPlugin?ce(H):ce(ie,!1)},!0)}M(z,f)};W(At,z=>{c().length===0?z($t):z(Zt,!1)})}var q=k(_t,2);{var be=z=>{var f=Ph(),O=k(h(f),2),H=h(O),ie=k(h(H),2);at(ie,21,()=>Array.from(s(l)),Nt,(Q,xe)=>{var Be=et(),te=De(Be);{var ht=Ze=>{var we=Dh();const Fe=Ce(()=>g.getCommandsIndex()[s(xe)]);var gt=h(we);gt.__click=[Ch,Lt,xe];var ut=h(gt),bt=h(ut),Pt=k(gt,2);at(Pt,17,()=>s(Fe).hotkeys,Nt,(kt,dt,nt)=>{var Ne=xh(),Re=h(Ne);B(ft=>ae(Re,`${ft??""}${nt<s(Fe).hotkeys.length-1?", ":""}`),[()=>P(s(dt))]),M(kt,Ne)});var jt=k(Pt,2);jt.__click=[Ah,m,g,xe],B(()=>ae(bt,s(Fe).name)),M(Ze,we)};W(te,Ze=>{g.getCommandsIndex()[s(xe)]&&Ze(ht)})}M(Q,Be)});var ce=k(H,2),pe=h(ce);pe.__click=[zp,m];var ke=k(pe,2);{var He=Q=>{var xe=Eh();xe.__click=Ut,M(Q,xe)};W(ke,Q=>{s(l).size>0&&Q(He)})}var Le=k(ke,2);{var Ge=Q=>{var xe=Lh();xe.__click=[Tp,m,g],M(Q,xe)};W(Le,Q=>{s(l).size>0&&Q(Ge)})}M(z,f)};W(q,z=>{(s(V)||o())&&z(be)})}var Ee=k(mt,2);{var Qe=z=>{Ea(z,{title:"Duplicate hotkey",get chord(){return s(I).chord},message:"This hotkey is already used by the following commands. Proceed to add anyway?",get conflicts(){return s(I).conflicts},onConfirmPin:async()=>{const f=s(I);y(I,null),f&&(Ke([f.id,...f.conflicts.map(O=>O.id)]),await Yo(m.app,g,f.id,{modifiers:f.mods,key:f.key}))},onConfirm:async()=>{const f=s(I);y(I,null),f&&await Yo(m.app,g,f.id,{modifiers:f.mods,key:f.key})},onCancel:()=>y(I,null)})};W(Ee,z=>{s(I)&&z(Qe)})}var rt=k(Ee,2);{var ct=z=>{{let f=Ce(()=>`Restore "${s(j).name}" to its default hotkeys?`);Ea(z,{title:"Restore default hotkeys",chord:"",get message(){return s(f)},conflicts:[],onConfirm:async()=>{const O=s(j);y(j,null),O&&await kp(m.app,g,O.id)},onCancel:()=>y(j,null)})}};W(rt,z=>{s(j)&&z(ct)})}M(t,qe),on(),i()}Mn(["click","keydown"]);var Oh=T('<div id="keyboard-component"><div id="keyboard-preview-view"><!></div> <div class="shortcuts-wrapper"><!> <!></div></div>');function Kh(t,e){sn(e,!0);function n(D){return(D.metaKey||D.ctrlKey)&&!D.altKey&&!D.shiftKey&&D.key.toLowerCase()==="f"}const i=e.plugin.commandsManager,o=new Kr,r=new Fr(e.plugin.app,o),a=e.plugin.groupManager;Ji("keyboard-analyzer-plugin",e.plugin),Ji("activeKeysStore",r),Ji("visualKeyboardManager",o),Ji("isPhysicalListenerActive",()=>s(p));const l=D=>{var _e,ze,Ke;const X=(()=>{var tt,ot;try{const Lt=(tt=e.plugin.app.workspace.activeLeaf)==null?void 0:tt.view;return!!(Lt&&typeof Lt.getViewType=="function"&&((ot=Lt.getViewType)==null?void 0:ot.call(Lt))===hn)}catch{return!1}})();if(n(D)&&X){D.preventDefault(),D.stopPropagation(),document.activeElement!==s(g)?((_e=s(g))==null||_e.focus(),E.debug("[keys] Mod+F: focus search")):(y(p,!s(p)),E.debug("[keys] Mod+F: toggle listener",{to:s(p)}));return}if(D.key==="Escape"&&X){D.preventDefault(),D.stopPropagation(),s(p)?(y(p,!1),(ze=s(g))==null||ze.focus(),E.debug("[keys] Esc: disable listener and focus search")):document.activeElement===s(g)&&((Ke=document.activeElement)==null||Ke.blur(),E.debug("[keys] Esc: blur search input"));return}const ve=ca()==="global"?ro():X;if(!s(p)||!ve){D.key!=="Backspace"&&E.debug("[keys] ignored keydown (listener off)");return}r.recordPhysicalRaw(D),E.debug("[keys] keydown",{key:D.key,code:D.code}),r.handlePhysicalKeyDown(D,{inActiveView:X}),E.debug("[keys] state after keydown",r.state)},c=D=>{const ye=ca()==="global"?ro():(()=>{var _e,ze;try{const Ke=(_e=e.plugin.app.workspace.activeLeaf)==null?void 0:_e.view;return!!(Ke&&typeof Ke.getViewType=="function"&&((ze=Ke.getViewType)==null?void 0:ze.call(Ke))===hn)}catch{return!1}})();if(!s(p)||!ye){E.debug("[keys] ignored keyup (listener off)");return}const ve=(()=>{var _e,ze;try{const Ke=(_e=e.plugin.app.workspace.activeLeaf)==null?void 0:_e.view;return!!(Ke&&typeof Ke.getViewType=="function"&&((ze=Ke.getViewType)==null?void 0:ze.call(Ke))===hn)}catch{return!1}})();E.debug("[keys] keyup",{key:D.key,code:D.code}),r.handlePhysicalKeyUp(D,{inActiveView:ve}),E.debug("[keys] state after keyup",r.state)};pi(()=>{const D=e.plugin.commandsManager.subscribe(()=>{y(C,e.plugin.commandsManager.filterCommands(s(v),r.ActiveModifiers,r.ActiveKey,s(_)),!0)}),X=window,ye=X.__kb_analyzer_keys_down,ve=X.__kb_analyzer_keys_up;return ye&&window.removeEventListener("keydown",ye),ve&&window.removeEventListener("keyup",ve),window.addEventListener("keydown",l,!0),window.addEventListener("keyup",c,!0),X.__kb_analyzer_keys_down=l,X.__kb_analyzer_keys_up=c,E.debug("[keys] global listeners attached"),()=>{window.removeEventListener("keydown",l,!0),window.removeEventListener("keyup",c,!0),X.__kb_analyzer_keys_down===l&&(X.__kb_analyzer_keys_down=void 0),X.__kb_analyzer_keys_up===c&&(X.__kb_analyzer_keys_up=void 0);try{D==null||D()}catch{}}});let u=G(0),m=null,d=G("desktop"),v=G(""),g=G(void 0),p=G(!1),_=G(Ye(e.plugin.settingsManager.settings.lastOpenedGroupId||en.All));Dt(()=>{const D=s(_)||String(en.All);queueMicrotask(()=>{var X;try{const ye=a.getGroupBehavior(D);if(D===String(en.All)){ye==="default"&&a.applyDefaultsToAllFilters();return}const ve=a.getGroup(D);if(!ve){E.warn("[groups] selected group not found; skipping behavior apply",{gid:D});return}ye==="default"?a.applyDefaultsToGroupFilters(D):(X=ve==null?void 0:ve.lastUsedState)!=null&&X.filters?a.applyDynamicLastUsedToGroupFilters(D):a.applyDefaultsToGroupFilters(D)}catch(ye){E.error("[groups] error applying on-open behavior",{err:ye,selectedGroupID:s(_)})}})}),Dt(()=>{e.plugin.settingsManager.settings.defaultFilterSettings,y(C,i.filterCommands(s(v),r.ActiveModifiers,r.ActiveKey,s(_)),!0)});const b=Ce(()=>{a.groups;const D=s(_),X=a.getGroupSettings(D);return!!(X!=null&&X.StrictModifierMatch)});let C=G(Ye([]));const w=Ce(()=>s(C).length),S=Ce(()=>s(C).reduce((D,X)=>D+X.hotkeys.length,0));Dt(()=>{y(C,i.filterCommands(s(v),r.ActiveModifiers,r.ActiveKey,s(_)),!0)});let P=G(Ye(e.plugin.settingsManager.getSetting("lastOpenedGroupId")||en.All)),L=null;Dt(()=>{const D=s(_);D&&D!==s(P)&&(L&&clearTimeout(L),L=setTimeout(()=>{e.plugin.settingsManager.updateSettings({lastOpenedGroupId:D}),y(P,D,!0)},200))}),Dt(()=>{var D;(D=s(g))==null||D.focus()}),Dt(()=>{x(s(u))}),Dt(()=>{o.updateVisualState(r.ActiveKey,r.ActiveModifiers)});function x(D){D>=1400?y(d,"xxl"):D>=1200?y(d,"xl"):D>=992?y(d,"lg"):D>=768?y(d,"md"):D>=576?y(d,"sm"):y(d,"xs")}function A(D,X,ye,ve){y(C,i.filterCommands(D,X,ye,ve),!0)}function R(D){var X;s(v)?s(v).startsWith(D)?y(v,s(v).replace(D,""),!0):y(v,D+s(v)):((X=s(g))==null||X.focus(),y(v,D,!0))}function Z(D){const{modifiers:X,key:ye}=D,ve=En(X);r.ActiveModifiers.every(_e=>ve.includes(_e))&&r.ActiveKey.toLowerCase()===ye.toLowerCase()?r.reset():(r.ActiveModifiers=ve,r.ActiveKey=ye,y(v,""))}function V(D){i.toggleFeaturedCommand(D)}var oe=Oh(),N=h(oe),I=h(N);Vf(I,{get visibleCommands(){return s(C)},get strictModifierMatch(){return s(b)},get selectedGroupID(){return s(_)}});var j=k(N,2),K=h(j);vp(K,{get searchCommandsCount(){return s(w)},get searchHotkeysCount(){return s(S)},get plugin(){return e.plugin},onSearch:A,get inputHTML(){return s(g)},set inputHTML(D){y(g,D,!0)},get search(){return s(v)},set search(D){y(v,D,!0)},get keyboardListenerIsActive(){return s(p)},set keyboardListenerIsActive(D){y(p,D,!0)},get selectedGroup(){return s(_)},set selectedGroup(D){y(_,D,!0)}});var ne=k(K,2);zh(ne,{onStarClick:V,onDuplicateHotkeyClick:Z,onPluginNameClick:R,get filteredCommands(){return s(C)},set filteredCommands(D){y(C,D,!0)},get selectedGroup(){return s(_)},set selectedGroup(D){y(_,D,!0)}}),un(oe,D=>m=D,()=>m),B(()=>Me(oe,1,fs(s(d)))),$u(oe,"offsetWidth",D=>y(u,D)),M(t,oe),on()}class Xo extends St.ItemView{constructor(n,i){super(n);ge(this,"plugin");ge(this,"component",null);ge(this,"activeKeysStore");ge(this,"visualKeyboardManager");ge(this,"navigation",!0);this.plugin=i,this.visualKeyboardManager=new Kr,this.activeKeysStore=new Fr(this.app,this.visualKeyboardManager)}onload(){super.onload()}onOpen(){return this.refresh(),Promise.resolve()}refresh(){this.plugin.hotkeyManager.initialize(),this.plugin.commandsManager.initialize(),this.draw()}getViewType(){return hn}getDisplayText(){return"Keyboard Shortcuts Analyzer"}getIcon(){return"keyboard"}draw(){const{contentEl:n}=this;n.empty(),n.setAttribute("id","KB-view"),n.style.padding="0",n.style.overflowX="hidden",this.component=gl(Kh,{target:n,props:{plugin:this.plugin,view:this,activeKeysStore:this.activeKeysStore}})}onClose(){return this.component&&(yl(this.component),this.component=null),Promise.resolve()}}function Fh(t,e,n,i,o,r,a){var l,c;s(e).trim()===""?((l=s(n))==null||l.reset(),y(i,""),y(o,[],!0)):y(e,""),r(),(c=s(a))==null||c.focus()}function Ih(t,e,n){var i;y(e,!s(e)),(i=s(n))==null||i.focus()}function $h(t,e){e()}function Gh(t,e,n,i,o,r,a){var c,u,m;if((t.key==="f"||t.key==="F"||t.code==="KeyF")&&(t.metaKey||t.ctrlKey)){t.preventDefault(),t.stopPropagation(),typeof t.stopImmediatePropagation=="function"&&t.stopImmediatePropagation(),y(e,!s(e));return}if(s(e)&&t.key==="Escape"){t.preventDefault(),t.stopPropagation(),y(e,!1);return}if(t.key==="Backspace"&&!s(e)&&String(s(n)||"").trim()===""){if(s(i))(c=s(o))==null||c.clearActiveKey(),y(i,"");else if((((u=s(r))==null?void 0:u.length)||0)>0){const d=[...((m=s(o))==null?void 0:m.sortedModifiers)??[]];d.pop(),s(o)&&(s(o).ActiveModifiers=En(d)),y(r,d,!0)}a(),t.preventDefault(),t.stopPropagation()}}function Nh(t,e){const n=t.ctrlKey||t.metaKey,i=t.altKey;return e(n&&i?"split":!!n)}var Rh=(t,e)=>y(e,!s(e)),Vh=(t,e)=>y(e,!s(e)),qh=(t,e,n)=>{y(e,!s(e));try{n.updateSettings({quickViewAutoRun:s(e)})}catch(i){E.error("[qv] persist quickViewAutoRun failed",i)}},Hh=(t,e,n)=>e(s(n).key,t.target.checked),Bh=T('<label class="qv-filter svelte-19pvtfz"><input type="checkbox"/> </label>'),Wh=T('<div class="qv-filters svelte-19pvtfz"></div>'),Uh=(t,e,n,i,o,r)=>{var a,l,c;try{(a=s(e))==null||a.handleKeyClick(s(n)),y(i,xt(In(((l=s(e))==null?void 0:l.ActiveModifiers)||[])),!0),y(o,((c=s(e))==null?void 0:c.ActiveKey)||"",!0)}catch{}r()},jh=(t,e,n,i,o,r)=>{var a,l,c;if(t.key==="Enter"||t.key===" "){t.preventDefault();try{(a=s(e))==null||a.handleKeyClick(s(n)),y(i,xt(In(((l=s(e))==null?void 0:l.ActiveModifiers)||[])),!0),y(o,((c=s(e))==null?void 0:c.ActiveKey)||"",!0)}catch{}r()}},Qh=T('<kbd class="modifier setting-hotkey svelte-19pvtfz" role="button" tabindex="0"> </kbd>'),Yh=(t,e,n,i,o)=>{var r,a,l;try{(r=s(e))==null||r.handleKeyClick(s(n))}catch{}y(i,xt(In(((a=s(e))==null?void 0:a.ActiveModifiers)||[])),!0),y(n,((l=s(e))==null?void 0:l.ActiveKey)||"",!0),o()},Xh=(t,e,n,i,o)=>{var r,a,l;if(t.key==="Enter"||t.key===" "){t.preventDefault();try{(r=s(e))==null||r.handleKeyClick(s(n))}catch{}y(i,xt(In(((a=s(e))==null?void 0:a.ActiveModifiers)||[])),!0),y(n,((l=s(e))==null?void 0:l.ActiveKey)||"",!0),o()}},Zh=T('<kbd class="modifier setting-hotkey svelte-19pvtfz" role="button" tabindex="0"> </kbd>'),Jh=T('<div class="qv-empty">No matching commands</div>'),eg=T('<span class="hk svelte-19pvtfz"> </span>'),tg=T('<div role="option" tabindex="0"><div class="qv-name svelte-19pvtfz"> </div> <div class="qv-hotkeys svelte-19pvtfz"></div></div>'),ng=T('<div role="dialog" tabindex="-1" aria-label="Quick Commands"><div class="qv-corner svelte-19pvtfz" title="Resize"></div> <div class="qv-left svelte-19pvtfz" title="Resize width"></div> <header class="qv-header svelte-19pvtfz"><div class="qv-row-1 svelte-19pvtfz"><div class="qv-group-wrapper svelte-19pvtfz"><!></div> <div class="spacer svelte-19pvtfz"></div> <div class="qv-actions svelte-19pvtfz"><button class="qv-btn svelte-19pvtfz">Filters</button> <div class="sep svelte-19pvtfz"></div> <button>Pin</button> <div class="sep svelte-19pvtfz"></div> <button class="qv-btn svelte-19pvtfz" title="Open view (Ctrl=new, Ctrl+Alt=split)">Open</button> <div class="sep svelte-19pvtfz"></div> <button>Run</button></div></div> <!> <div role="group"><div class="modifiers-wrapper svelte-19pvtfz"><!> <!></div> <div class="hotkey-search-container svelte-19pvtfz"><input type="text" placeholder="Filter..." class="svelte-19pvtfz"/> <div class="meta-search-wrapper svelte-19pvtfz"><button><!></button> <button class="clear-icon icon svelte-19pvtfz" aria-label="Clear text or reset keys" title="Clear text or reset keys"><!></button></div></div></div></header> <div class="qv-list svelte-19pvtfz" role="listbox" aria-label="Command results"><!></div></div>');function ig(t,e){sn(e,!0);let n=Ae(e,"anchorEl",3,null),i=Ae(e,"onClose",3,()=>{}),o=Ae(e,"listenToggle",3,0),r=Ae(e,"armTriggers",7,null);const a=e.plugin.commandsManager,l=e.plugin.settingsManager,c=e.plugin.groupManager;E.debug("[qv] script:init");try{typeof window<"u"&&(window.addEventListener("error",f=>{try{const O={message:f.message,filename:f.filename,lineno:f.lineno,colno:f.colno,error:f.error instanceof Error?f.error.message:String(f.error??"")};E.error("[qv] early window error",O)}catch{}},{once:!0}),window.addEventListener("unhandledrejection",f=>{try{E.error("[qv] early unhandledrejection",f.reason)}catch{}},{once:!0}))}catch{}try{Ji("keyboard-analyzer-plugin",e.plugin),E.debug("[qv] init context provided")}catch(f){E.error("[qv] context set failed",f)}let u=G(""),m=G(!1),d=G("all");try{const f=l.getSetting("lastOpenedGroupId")||"all";y(d,f,!0)}catch(f){E.error("[qv] read lastOpenedGroupId failed",f)}let v=G(null),g=G(null),p=G(""),_=G(Ye([])),b=G(Ye([])),C=G(0),w=G(null),S=G(null),P=G(null),L=G(!1);const x=Go({placement:"bottom-start",middleware:[Fo(6),$o(),Io({padding:8})]});let A=G(Ye({top:0,left:0,width:380,height:360})),R=G(0),Z=!1,V=0,oe=G(!0),N=G(!1),I=null,j=G(!1);function K(){const f=a.filterCommands(s(u),En(s(_)),s(p),s(d));y(b,f.slice(0,200),!0),y(C,Math.min(s(C),Math.max(0,s(b).length-1)),!0)}let ne=!1;function D(){ne||(ne=!0,requestAnimationFrame(()=>{ne=!1;try{X()}catch(f){E.error("[qv] recomputePosition:raf error",f)}}))}function X(){try{if(E.debug("[qv] recomputePosition:start"),!s(P)||!n()||Z)return;if(x.isPositioned&&!Z){const we=x.floatingStyles.match(/translate3d\(([^,]+),\s*([^,]+),/);if(we){const Fe=parseFloat(we[1]),gt=parseFloat(we[2]),ut={...s(A),top:gt,left:Fe};(ut.top!==s(A).top||ut.left!==s(A).left)&&queueMicrotask(()=>{y(A,ut,!0),y(R,ut.left-n().getBoundingClientRect().left),E.debug("[qv] recomputePosition:end (floating-ui)",{coords:s(A)})});return}}const f=n().getBoundingClientRect(),O=window.innerHeight||document.documentElement.clientHeight,H=window.innerWidth||document.documentElement.clientWidth,ie=6,ce=f.bottom+ie,pe=Math.floor(O*.6),ke=Math.min(pe,Math.max(240,s(A).height)),Le=!(ce+ke<=O),Ge=Le?Math.max(8,f.top-ie-ke):Math.min(O-ke-8,ce);let Q=s(R)?f.left+s(R):f.left,xe=s(A).width||s(P).offsetWidth||360;const Be=Math.max(430,Math.floor(H*.92));xe>Be&&(xe=Be),Q+xe>H-8&&(Q=Math.max(8,H-xe-8)),Q<8&&(Q=8);const te={...s(A),top:Ge,left:Q,width:xe};te.top!==s(A).top||te.left!==s(A).left||te.width!==s(A).width||Le!==s(L)?queueMicrotask(()=>{y(L,Le),y(A,te,!0),y(R,Q-f.left),E.debug("[qv] recomputePosition:end (fallback)",{coords:s(A)})}):(y(R,Q-f.left),E.debug("[qv] recomputePosition:end (fallback)",{coords:s(A)}))}catch(f){E.error("[qv] recomputePosition:error",f)}}let ye=!1,ve=0,_e=0,ze=0,Ke=0,tt=0,ot=0;function Lt(f){var O,H;f.preventDefault(),f.stopPropagation(),(H=(O=f.target).setPointerCapture)==null||H.call(O,f.pointerId),ye=!0,Z=!0,ve=f.clientX,_e=f.clientY,ze=s(A).left,Ke=s(A).top,tt=s(A).width,ot=s(A).height,V=Date.now()+250,E.debug("[qv] resize:corner:down",{startLeft:ze,startTop:Ke,startW:tt,startH:ot}),window.addEventListener("pointermove",Ut,!0),window.addEventListener("pointerup",Mt,!0)}function Ut(f){if(!ye)return;const O=f.clientX-ve,H=f.clientY-_e;let ie=ze+O,ce=Ke+H,pe=tt-O,ke=ot-H;const He=430,Le=240,Ge=window.innerWidth||document.documentElement.clientWidth,Q=window.innerHeight||document.documentElement.clientHeight,xe=Math.floor(Q*.6),Be=Math.floor(Ge*.92);if(pe<He&&(ie=ze+(tt-He),pe=He),pe>Be&&(pe=Be,ie=Math.min(ie,Ge-8-pe)),ie<8&&(ie=8,pe=Math.max(He,Math.min(tt-(ze-8),Ge-16))),ie+pe>Ge-8&&(pe=Math.max(He,Ge-8-ie)),ke<Le&&(ke=Le,ce=Ke+(ot-Le)),ke>xe&&(ke=xe,ce=Math.max(8,Ke-(xe-ot))),ce<8){const te=8-ce;ce=8,ke=Math.min(xe,Math.max(Le,ke-te))}if(ce+ke>Q-8){const te=ce+ke-(Q-8);ke=Math.max(Le,ke-te)}y(A,{...s(A),left:ie,top:ce,width:pe,height:ke},!0),E.debug("[qv] resize:corner:move",{left:ie,top:ce,width:pe,height:ke});try{n()&&y(R,s(A).left-n().getBoundingClientRect().left)}catch{}l.updateSettings({quickViewWidth:pe,quickViewHeight:ke})}function Mt(){ye&&(ye=!1,Z=!1,V=Date.now()+120,E.debug("[qv] resize:corner:up",s(A)),window.removeEventListener("pointermove",Ut,!0),window.removeEventListener("pointerup",Mt,!0))}let Ot=!1,It=0,Te=0,je=0;function Ct(f){var O,H;f.preventDefault(),f.stopPropagation(),(H=(O=f.target).setPointerCapture)==null||H.call(O,f.pointerId),Ot=!0,Z=!0,It=f.clientX,Te=s(A).left,je=s(A).width,V=Date.now()+250,E.debug("[qv] resize:left:down",{startLLeft:Te,startLW:je}),window.addEventListener("pointermove",lt,!0),window.addEventListener("pointerup",ee,!0)}function lt(f){if(!Ot)return;const O=f.clientX-It;let H=Te+O,ie=je-O;const ce=430,pe=window.innerWidth||document.documentElement.clientWidth,ke=Math.floor(pe*.92);ie<ce&&(ie=ce,H=Te+(je-ce)),ie>ke&&(ie=ke,H=Math.min(H,pe-8-ie)),H<8&&(H=8,ie=Math.max(ce,Math.min(je-(Te-8),pe-16))),H+ie>pe-8&&(ie=Math.max(ce,pe-8-H)),y(A,{...s(A),left:H,width:ie},!0),E.debug("[qv] resize:left:move",{left:H,width:ie});try{n()&&y(R,s(A).left-n().getBoundingClientRect().left)}catch{}l.updateSettings({quickViewWidth:ie})}function ee(){Ot&&(Ot=!1,Z=!1,V=Date.now()+120,E.debug("[qv] resize:left:up",s(A)),window.removeEventListener("pointermove",lt,!0),window.removeEventListener("pointerup",ee,!0))}function le(f){const O=Math.max(0,s(b).length-1);return O===0?0:f<0?O:f>O?0:f}function ue(f){y(C,le(s(C)+f),!0),queueMicrotask(()=>{var ie;const O=(ie=s(w))==null?void 0:ie.querySelectorAll(".qv-row"),H=O==null?void 0:O[s(C)];H==null||H.scrollIntoView({block:"nearest"})})}function de(){var O;const f=s(b)[s(C)];if(f){try{e.plugin.app.commands.executeCommandById(f.id),a.addRecentCommand(f.id)}catch{}s(N)||(O=i())==null||O({restoreFocus:!0,reason:"run-selected"})}}function Xe(f){var ce,pe,ke,He,Le,Ge,Q,xe,Be,te,ht,Ze,we;if(!s(P))return;const O=s(P).contains(f.target);if(f.key==="Escape"){if(f.preventDefault(),f.stopPropagation(),(ce=f.stopImmediatePropagation)==null||ce.call(f),s(m)){y(m,!1);return}(pe=i())==null||pe({restoreFocus:!0,reason:"escape"});return}if((f.key==="f"||f.key==="F"||f.code==="KeyF")&&(f.metaKey||f.ctrlKey)){f.preventDefault(),f.stopPropagation(),(ke=f.stopImmediatePropagation)==null||ke.call(f),document.activeElement!==s(S)?(He=s(S))==null||He.focus():y(m,!s(m));return}if(s(m)){if(f.preventDefault(),f.stopPropagation(),(Le=f.stopImmediatePropagation)==null||Le.call(f),f.key==="ArrowDown"){ue(1);return}if(f.key==="ArrowUp"){ue(-1);return}if(f.key==="Tab"){ue(f.shiftKey?-1:1);return}if(f.key==="Enter"){s(oe)&&de();return}try{(Ge=s(g))==null||Ge.handlePhysicalKeyDown(f,{inActiveView:!0})}catch{}y(p,((Q=s(g))==null?void 0:Q.ActiveKey)||"",!0),y(_,In(((xe=s(g))==null?void 0:xe.ActiveModifiers)||[]),!0),K();return}if(r()&&Date.now()<r().until)try{const Fe=[];f.ctrlKey&&Fe.push("Control"),f.metaKey&&Fe.push("Meta"),f.altKey&&Fe.push("Alt"),f.shiftKey&&Fe.push("Shift");const gt=Et(f.code||f.key||"");if(r().triggers.some(bt=>ao({modifiers:Gn(bt.modifiers),key:bt.key},Fe,gt,{strictModifierMatch:!0,allowKeyOnly:!1,platformize:!0}))){f.preventDefault(),f.stopPropagation(),(Be=f.stopImmediatePropagation)==null||Be.call(f),y(m,!0),r(null);return}}catch{}if(!O)return;if((f.key==="f"||f.key==="F"||f.code==="KeyF")&&(f.metaKey||f.ctrlKey)){if(f.preventDefault(),f.stopPropagation(),(te=f.stopImmediatePropagation)==null||te.call(f),document.activeElement!==s(S)){(ht=s(S))==null||ht.focus();return}y(m,!s(m));return}if(f.key==="Backspace"&&!s(m)&&String(s(u)||"").trim()===""){if(s(p))(Ze=s(g))==null||Ze.clearActiveKey(),y(p,"");else if((((we=s(_))==null?void 0:we.length)||0)>0&&s(g)){const Fe=xt(In(s(g).ActiveModifiers));Fe.pop(),s(g).ActiveModifiers=En(Fe),y(_,Fe,!0)}K(),f.preventDefault(),f.stopPropagation();return}if(f.key==="ArrowDown"){f.preventDefault(),f.stopPropagation(),ue(1);return}if(f.key==="ArrowUp"){f.preventDefault(),f.stopPropagation(),ue(-1);return}if(f.key==="Tab"){f.preventDefault(),f.stopPropagation(),ue(f.shiftKey?-1:1);return}if(f.key==="Enter"){f.preventDefault(),f.stopPropagation(),s(oe)&&de();return}}function qe(f){var O,H,ie,ce;if(!(!s(P)||!s(m))){f.preventDefault(),f.stopPropagation(),(O=f.stopImmediatePropagation)==null||O.call(f);try{(H=s(g))==null||H.handlePhysicalKeyUp(f,{inActiveView:!0})}catch{}y(p,((ie=s(g))==null?void 0:ie.ActiveKey)||"",!0),y(_,In(((ce=s(g))==null?void 0:ce.ActiveModifiers)||[]),!0),K()}}let mt=G(0);Dt(()=>{const f=Number(o()||0);Number.isFinite(f)&&f>0&&f!==s(mt)&&(y(mt,f,!0),y(m,!0),queueMicrotask(()=>{var O;return(O=s(S))==null?void 0:O.focus()}))});function _t(f){var O;e.plugin.addShortcutsView(f),(O=i())==null||O({restoreFocus:!1,reason:"open-full"})}let At=G(!1);const $t=[{key:$n.StrictModifierMatch,label:"Strict modifiers"},{key:$n.ViewWOhotkeys,label:"Only with hotkeys"},{key:$n.OnlyDuplicates,label:"Only duplicates"},{key:$n.DisplayInternalModules,label:"Include internal modules"}];function Zt(f,O){const H={[f]:O};c.updateGroupFilterSettings(s(d),H),K()}const q=()=>X();let be=null;pi(()=>{E.debug("[qv] mount",{anchorExists:!!n()}),n()&&(x.elements.reference=n(),E.debug("[qv] floating-ui reference set"));try{y(v,new Kr,!0),y(g,new Fr(e.plugin.app,s(v)),!0),E.debug("[qv] stores initialized")}catch(f){E.error("[qv] failed to init stores",f)}try{I=new St.Scope(e.plugin.app.scope),I.register(["Mod"],"F",f=>{var O;try{typeof(f==null?void 0:f.preventDefault)=="function"&&f.preventDefault(),typeof(f==null?void 0:f.stopPropagation)=="function"&&f.stopPropagation(),document.activeElement!==s(S)?(O=s(S))==null||O.focus():y(m,!s(m))}catch{}return!0})}catch(f){E.error("[qv] key scope init failed",f)}try{const f=Number(l.settings.quickViewWidth||380),O=Number(l.settings.quickViewHeight||360);y(A,{...s(A),width:Math.max(430,Math.min(520,Number.isFinite(f)?f:380)),height:Math.max(240,Number.isFinite(O)?O:360)},!0),E.debug("[qv] size from settings",s(A))}catch(f){E.error("[qv] read size settings failed",f)}try{y(oe,!!l.settings.quickViewAutoRun)}catch(f){E.error("[qv] read quickViewAutoRun failed",f)}try{K()}catch(f){E.error("[qv] refilter on mount failed",f)}try{D()}catch(f){E.error("[qv] recompute on mount failed",f)}window.addEventListener("resize",D),document.addEventListener("scroll",q,!0),window.addEventListener("keydown",Xe,!0),window.addEventListener("keyup",qe,!0),queueMicrotask(()=>{var f;return(f=s(S))==null?void 0:f.focus()}),y(j,!0)}),Pl(()=>{window.removeEventListener("resize",X),document.removeEventListener("scroll",q,!0),be==null||be.disconnect(),be=null,window.removeEventListener("keydown",Xe,!0),window.removeEventListener("keyup",qe,!0),window.removeEventListener("pointermove",Ut,!0),window.removeEventListener("pointerup",Mt,!0),window.removeEventListener("pointermove",lt,!0),window.removeEventListener("pointerup",ee,!0);try{I&&e.plugin.app.keymap.popScope(I)}catch{}});let Ee=G(Ye(l.getSetting("lastOpenedGroupId")||"all")),Qe=null;Dt(()=>{const f=s(d);!f||f===s(Ee)||(Qe&&clearTimeout(Qe),Qe=setTimeout(()=>{try{l.updateSettings({lastOpenedGroupId:f}),y(Ee,f,!0)}catch(O){E.error("[qv] persist lastOpenedGroupId failed",O)}},200))});var rt=et(),ct=De(rt);{var z=f=>{var O=ng();let H;var ie=h(O);ie.__pointerdown=Lt;var ce=k(ie,2);ce.__pointerdown=Ct;var pe=k(ce,2),ke=h(pe),He=h(ke),Le=h(He);oc(Le,{get plugin(){return e.plugin},compact:!0,onChange:()=>K(),get selectedGroup(){return s(d)},set selectedGroup(se){y(d,se,!0)}});var Ge=k(He,4),Q=h(Ge);Q.__click=[Rh,At];var xe=k(Q,4);xe.__click=[Vh,N];var Be=k(xe,4);Be.__click=[Nh,_t];var te=k(Be,4);te.__click=[qh,oe,l];var ht=k(ke,2);{var Ze=se=>{var Pe=Wh();at(Pe,21,()=>$t,Nt,(he,Y)=>{var U=et(),$=De(U);_l($,()=>s(d),F=>{var J=Bh(),Oe=h(J);Oe.__change=[Hh,Zt,Y];var Ie=k(Oe);B(Se=>{Yt(Oe,Se),ae(Ie,` ${s(Y).label??""}`)},[()=>c.getGroupSettings(s(d))[s(Y).key]]),M(F,J)}),M(he,U)}),M(se,Pe)};W(ht,se=>{s(At)&&se(Ze)})}var we=k(ht,2);let Fe;var gt=h(we),ut=h(gt);at(ut,17,()=>{var se;return xt(In(((se=s(g))==null?void 0:se.ActiveModifiers)||[]))},Nt,(se,Pe)=>{var he=Qh();he.__click=[Uh,g,Pe,_,p,K],he.__keydown=[jh,g,Pe,_,p,K];var Y=h(he);B(U=>ae(Y,U),[()=>l.settings.useBakedKeyNames?Gr(s(Pe)):s(Pe)]),M(se,he)});var bt=k(ut,2);{var Pt=se=>{var Pe=Zh();Pe.__click=[Yh,g,p,_,K],Pe.__keydown=[Xh,g,p,_,K];var he=h(Pe);B(Y=>ae(he,Y),[()=>l.settings.useBakedKeyNames?Nr(s(p)):s(p)]),M(se,Pe)};W(bt,se=>{s(p)&&se(Pt)})}var jt=k(gt,2),kt=h(jt);kt.__input=[$h,K],kt.__keydown=[Gh,m,u,p,g,_,K],un(kt,se=>y(S,se),()=>s(S));var dt=k(kt,2),nt=h(dt);nt.__click=[Ih,m,S];var Ne=h(nt);sc(Ne,{size:16});var Re=k(nt,2);Re.__click=[Fh,u,g,p,_,K,S];var ft=h(Re);hs(ft,{size:16});var me=k(pe,2),yt=h(me);{var qt=se=>{var Pe=Jh();M(se,Pe)},Ht=se=>{var Pe=et(),he=De(Pe);at(he,19,()=>s(b),Y=>Y.id,(Y,U,$)=>{var F=tg();F.__click=()=>{y(C,s($),!0),s(oe)&&de()},F.__keydown=Se=>{(Se.key==="Enter"||Se.key===" ")&&(Se.preventDefault(),y(C,s($),!0),s(oe)&&de())};var J=h(F),Oe=h(J),Ie=k(J,2);at(Ie,21,()=>s(U).hotkeys,Nt,(Se,We)=>{var it=eg(),Bt=h(it);B(No=>ae(Bt,No),[()=>l.settings.useBakedKeyNames?po(s(We)):e.plugin.hotkeyManager.renderHotkey(s(We))]),M(Se,it)}),B(()=>{Me(F,1,`qv-row ${s($)===s(C)?"is-selected":""}`,"svelte-19pvtfz"),fe(F,"aria-selected",s($)===s(C)),ae(Oe,s(U).name)}),M(Y,F)}),M(se,Pe)};W(yt,se=>{s(b).length===0?se(qt):se(Ht,!1)})}un(me,se=>y(w,se),()=>s(w)),wl(O,se=>zi==null?void 0:zi(se)),un(O,se=>y(P,se),()=>s(P)),B((se,Pe,he,Y)=>{H=Me(O,1,"qv svelte-19pvtfz",null,H,se),cn(O,`position: fixed; top:${s(A).top??""}px; left:${s(A).left??""}px; width:${s(A).width??""}px; height:${Pe??""}px;`),fe(Q,"aria-expanded",s(At)),Me(xe,1,`qv-btn ${s(N)?"is-on":""}`,"svelte-19pvtfz"),fe(xe,"title",s(N)?"Unpin popover":"Pin popover to prevent auto-close"),fe(xe,"aria-pressed",s(N)),Me(te,1,`qv-btn ${s(oe)?"is-on":""}`,"svelte-19pvtfz"),fe(te,"title",s(oe)?"Click/Enter runs command":"Select only; no run on Enter/click"),Fe=Me(we,1,"search-wrapper svelte-19pvtfz",null,Fe,he),Me(nt,1,`keyboard-icon icon ${s(m)?"pulse":""}`,"svelte-19pvtfz"),fe(nt,"aria-label",Y),fe(nt,"aria-pressed",s(m)),fe(nt,"title",s(m)?"Deactivate key listener (Esc)":"Activate key listener")},[()=>({"is-above":s(L)}),()=>Math.min(s(A).height,Math.floor((window.innerHeight||600)*.6)),()=>({"is-focused":document.activeElement===s(S)}),()=>s(m)?"Press Esc to deactivate key listener":`Press ${En(["Mod"])[0]}+F or long press to activate key listener`]),$e("click_outside",O,()=>{var se;Date.now()<V||s(N)||(se=i())==null||se({restoreFocus:!0,reason:"click-outside"})}),$e("mouseenter",O,()=>{try{I&&e.plugin.app.keymap.pushScope(I)}catch{}}),$e("mouseleave",O,()=>{try{I&&e.plugin.app.keymap.popScope(I)}catch{}}),Vi(kt,()=>s(u),se=>y(u,se)),M(f,O)};W(ct,f=>{s(j)&&f(z)})}M(t,rt),on()}Mn(["pointerdown","click","change","keydown","input"]);class sg extends St.PluginSettingTab{constructor(n){super(n.app,n);ge(this,"plugin");this.plugin=n}display(){const{containerEl:n}=this;n.empty(),n.createEl("h2",{text:"Keyboard Analyzer"}),new St.Setting(n).setName("Enable developer options").setDesc("Show extra developer tools in the UI and settings.").addToggle(i=>{i.setValue(!!this.plugin.settingsManager.getSetting("enableDeveloperOptions")),i.onChange(o=>{this.plugin.settingsManager.updateSettings({enableDeveloperOptions:o})})}),new St.Setting(n).setName("Developer logging").setDesc("Enable verbose logging to the console for diagnostics.").addToggle(i=>{i.setValue(!!this.plugin.settingsManager.getSetting("devLoggingEnabled")),i.onChange(o=>{this.plugin.settingsManager.updateSettings({devLoggingEnabled:o}),so(o)})}),new St.Setting(n).setName("Keyboard key tooltips").setDesc("Show informative tooltips when hovering over keyboard keys. Useful for development and debugging.").addToggle(i=>{i.setValue(!!this.plugin.settingsManager.getSetting("keyboardDevTooltipsEnabled")),i.onChange(o=>{this.plugin.settingsManager.updateSettings({keyboardDevTooltipsEnabled:o})})}),new St.Setting(n).setName("Emulated OS").setDesc("Temporarily override OS to test modifier mapping.").addDropdown(i=>{i.addOption("none","None"),i.addOption("windows","Windows"),i.addOption("macos","macOS"),i.addOption("linux","Linux"),i.setValue(this.plugin.settingsManager.getSetting("emulatedOS")||"none"),i.onChange(o=>{const r=o||"none";this.plugin.settingsManager.updateSettings({emulatedOS:r}),oo(r)})}),new St.Setting(n).setName("Use baked key names").setDesc("Show human-friendly key names (e.g., Backspace, Up Arrow, Cmd). Turn off to debug raw keys/glyphs.").addToggle(i=>{i.setValue(!!this.plugin.settingsManager.getSetting("useBakedKeyNames")),i.onChange(o=>{this.plugin.settingsManager.updateSettings({useBakedKeyNames:o})})}),new St.Setting(n).setName("Key listener scope").setDesc("Restrict the active key listener to the Analyzer view, or allow it globally (global requires modifiers: On hold).").addDropdown(i=>{i.addOption("activeView","Active view only"),i.addOption("global","Global");const o=this.plugin.settingsManager.getSetting("keyListenerScope")||"activeView";i.setValue(o),i.onChange(r=>{const a=r||"activeView",l=this.plugin.settingsManager.getSetting("modifierActivationMode")||"click";a==="global"&&l!=="press"?this.plugin.settingsManager.updateSettings({keyListenerScope:"activeView"}):this.plugin.settingsManager.updateSettings({keyListenerScope:a})})}),new St.Setting(n).setName("Modifier activation").setDesc("Choose how modifiers activate: On click (to add / remove) or On hold (select on hold, clears when released). Applies to modifiers only globally. Inside the Analyzer view, when the listener is active, you can select keys by clicking or by pressing keys; globally only modifiers are tracked.").addDropdown(i=>{i.addOption("click","On click"),i.addOption("press","On hold"),i.setValue(this.plugin.settingsManager.getSetting("modifierActivationMode")||"click"),i.onChange(o=>{const r=o||"click",a=this.plugin.settingsManager.getSetting("keyListenerScope")||"activeView",l={modifierActivationMode:r};r==="click"&&a==="global"&&(l.keyListenerScope="activeView"),this.plugin.settingsManager.updateSettings(l)})}),new St.Setting(n).setName("Search debounce (ms)").setDesc("Delay before applying text filter changes.").addText(i=>{i.inputEl.type="number",i.setPlaceholder("200"),i.setValue(String(this.plugin.settingsManager.getSetting("searchDebounceMs")??200)),i.onChange(o=>{const r=Number(o);this.plugin.settingsManager.updateSettings({searchDebounceMs:Number.isFinite(r)?r:200})})})}}class og extends St.Plugin{constructor(n,i){super(n,i);ge(this,"commandsManager");ge(this,"hotkeyManager");ge(this,"settingsManager");ge(this,"groupManager");ge(this,"registeredGroupCommandIds",new Set);ge(this,"quickViewComponent",null);ge(this,"quickViewAnchorEl",null);ge(this,"quickViewPrevActiveEl",null);ge(this,"lastQuickViewInvoke",0);ge(this,"quickViewListenNonce",0);ge(this,"quickViewListeningActive",!1);ge(this,"lastQuickViewCloseAt",0);ge(this,"quickViewArm",null);this.settingsManager=co.getInstance(this),this.groupManager=lo.getInstance(this.settingsManager),this.commandsManager=qi.getInstance(this.app,this),this.hotkeyManager=ps.getInstance(this.app),this.hotkeyManager.attachCommandsManager(this.commandsManager)}get full(){const n=this.app.workspace.getLeavesOfType(hn),i=n.length?n[0]:null;return(i==null?void 0:i.view)instanceof Xo?i.view:null}focusView(n){const i=this.full;i&&this.app.workspace.revealLeaf(i.leaf)}async onload(){await this.settingsManager.loadSettings();try{this.groupManager.normalizeAllGroups()}catch{}this.hotkeyManager.initialize(),this.commandsManager.initialize(),so(!!this.settingsManager.getSetting("devLoggingEnabled")),cr(!!this.settingsManager.getSetting("keyboardDevTooltipsEnabled")),$l("debug"),oo(this.settingsManager.getSetting("emulatedOS")||"none"),this.registerPluginHotkeys(),this.registerGroupOpenCommand(),this.syncPerGroupCommands(),this.addStatusBarIndicator(),this.addQuickViewCommand(),this.registerView(hn,n=>new Xo(n,this)),this.addSettingTab(new sg(this)),this.app.workspace.onLayoutReady(()=>{this.app.workspace.getLeavesOfType(hn).forEach(n=>{n.view instanceof Xo&&(n.view.plugin=this,n.view.onOpen())})})}onunload(){this.settingsManager.flushAllSaves().catch(()=>{}),this.app.workspace.detachLeavesOfType(hn)}addStatusBarIndicator(){const n=this.addStatusBarItem();n.addClass("mod-clickable"),n.setAttribute("aria-label","Keyboard Shortcuts"),n.setAttribute("title","Quick View — Click to open. Cmd/Ctrl+Click opens full view. Alt+Meta splits."),n.style.order="10";const i=n.createSpan("icon");St.setIcon(i,"keyboard-glyph"),this.quickViewAnchorEl=i,i.addEventListener("click",o=>this.onStatusBarClick(o)),i.addEventListener("contextmenu",o=>{o.preventDefault();try{this.quickViewPrevActiveEl=document.activeElement}catch{}this.quickViewComponent?this.closeQuickView():this.openQuickView(!1)})}onStatusBarClick(n){const i=n.ctrlKey===!0||n.metaKey===!0,o=n.altKey===!0;try{this.quickViewPrevActiveEl=document.activeElement}catch{}if(i){let r=!1;r=o?"split":!0,this.addShortcutsView(r);return}if(this.quickViewComponent){this.closeQuickView();return}Date.now()-this.lastQuickViewCloseAt<200||this.openQuickView(!1)}async addShortcutsView(n=!1){const i=this.app.workspace.getLeavesOfType(hn);if(i.length>0&&!n){this.app.workspace.revealLeaf(i[0]);return}await this.app.workspace.getLeaf(n||!1).setViewState({type:hn,active:!0})}registerPluginHotkeys(){this.addCommand({id:"open-shortcuts-analyzer-view",name:"Open keyboard shortcuts view",checkCallback:n=>{if(this.app.workspace.getLeavesOfType(hn).length===0)return n||this.addShortcutsView(),!0}}),this.addCommand({id:"open-shortcuts-analyzer-view-new-tab",name:"Open keyboard shortcuts view (new tab)",callback:()=>{this.addShortcutsView(!0)}}),this.addCommand({id:"open-shortcuts-analyzer-view-split",name:"Open keyboard shortcuts view (split)",callback:()=>{this.addShortcutsView("split")}}),this.addCommand({id:"focus-shortcuts-analyzer-view",name:"Focus keyboard shortcuts view",checkCallback:n=>(n||this.focusView(hn),!0)})}registerGroupOpenCommand(){this.addCommand({id:"open-keyboard-analyzer-group",name:"Open Keyboard Analyzer: Group…",callback:()=>this.openGroupPicker()})}addQuickViewCommand(){this.addCommand({id:"open-quick-view",name:"Open Quick View",callback:()=>{try{this.quickViewPrevActiveEl=document.activeElement}catch{}const n=Date.now(),i=n-this.lastQuickViewInvoke<=500;if(this.lastQuickViewInvoke=n,!this.quickViewComponent){const o=n-this.lastQuickViewCloseAt<250;this.openQuickView(i&&!o,!0);return}i?this.enterQuickViewListenMode():this.closeQuickView()}})}openQuickView(n=!1,i=!1){try{if(!this.quickViewPrevActiveEl)try{this.quickViewPrevActiveEl=document.activeElement}catch{}const o=this.quickViewAnchorEl||document.querySelector(".status-bar-item.plugin-keyboard-analyzer span.icon");if(o instanceof HTMLElement&&(this.quickViewAnchorEl=o),n?(this.quickViewListenNonce++,this.quickViewListeningActive=!0):this.quickViewListeningActive=!1,this.quickViewArm=null,i)try{const r=`${this.manifest.id}:open-quick-view`,a=this.app.hotkeyManager.getDefaultHotkeys(r)||[],l=this.app.hotkeyManager.customKeys,c=l&&l[r]||[],u=new Map,m=g=>Array.isArray(g)?g:typeof g=="string"?g?g.split(","):[]:[],d=(g,p)=>{const _=m(g),b=[..._].sort().join(",");u.set(`${b}|${p}`,{modifiers:_,key:p})};for(const g of a)d(g.modifiers,g.key??"");for(const g of c)d(g.modifiers,g.key??"");const v=Array.from(u.values());v.length&&(this.quickViewArm={triggers:v,until:Date.now()+900})}catch{}this.quickViewComponent=gl(ig,{target:document.body,props:{plugin:this,anchorEl:this.quickViewAnchorEl,onClose:r=>this.closeQuickView(r),listenToggle:this.quickViewListeningActive?this.quickViewListenNonce:0,armTriggers:this.quickViewArm}})}catch(o){this.quickViewComponent=null,this.quickViewListeningActive=!1;try{if(!!this.settingsManager.getSetting("devLoggingEnabled")){const a=o instanceof Error?`${o.message}
${o.stack||""}`:String(o);console.error("[Keyboard Analyzer] Quick View mount failed:",a)}}catch{}}}closeQuickView(n){var o,r;if(this.quickViewComponent){try{yl(this.quickViewComponent)}catch{}this.quickViewComponent=null}if(this.quickViewListeningActive=!1,this.lastQuickViewCloseAt=Date.now(),this.quickViewArm=null,(n==null?void 0:n.restoreFocus)!==!1){let a=!1;try{const l=this.quickViewPrevActiveEl;l&&l.isConnected&&((o=l.focus)==null||o.call(l,{preventScroll:!0}),a=document.activeElement===l)}catch{}if(!a)try{const l=this.app.workspace.getActiveViewOfType(St.MarkdownView);(r=l==null?void 0:l.editor)==null||r.focus()}catch{}}this.quickViewPrevActiveEl=null}enterQuickViewListenMode(){var n;if(!this.quickViewComponent){this.openQuickView(!0);return}this.quickViewListeningActive=!0,this.quickViewListenNonce++;try{const i=this.quickViewComponent;(n=i.update)==null||n.call(i,{listenToggle:this.quickViewListenNonce})}catch{this.closeQuickView(),this.openQuickView(!0)}}openGroupPicker(){const n=[{id:"all",name:"All Commands"},...this.settingsManager.settings.commandGroups];class i extends St.SuggestModal{constructor(l,c,u){super(l);ge(this,"available");ge(this,"pluginRef");this.available=c,this.pluginRef=u,this.setPlaceholder("Open group…")}getSuggestions(l){const c=l.toLowerCase().trim();return c?this.available.filter(u=>u.name.toLowerCase().includes(c)):this.available}renderSuggestion(l,c){c.setText(l.name)}onChooseSuggestion(l){this.pluginRef.openWithGroup(l.id)}}new i(this.app,n.map(r=>({id:String(r.id),name:r.name})),this).open()}async openWithGroup(n){this.settingsManager.updateSettings({lastOpenedGroupId:n}),await this.addShortcutsView(!1)}syncPerGroupCommands(){for(const i of this.registeredGroupCommandIds)try{this.app.commands.removeCommand(i)}catch{}this.registeredGroupCommandIds.clear();const n=this.settingsManager.getSetting("commandGroups")||[];for(const i of n){if(!(i!=null&&i.registerCommand))continue;const o=`open-group:${String(i.id)}`,r=`${this.manifest.id}:${o}`;this.addCommand({id:o,name:`Open: ${i.name}`,callback:()=>{this.openWithGroup(String(i.id))}}),this.registeredGroupCommandIds.add(r)}}}module.exports=og;


/* nosourcemap */