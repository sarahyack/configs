"use strict";var Hn=Object.defineProperty;var Po=Object.getOwnPropertyDescriptor;var To=Object.getOwnPropertyNames;var So=Object.prototype.hasOwnProperty;var Lo=(t,e)=>{for(var n in e)Hn(t,n,{get:e[n],enumerable:!0})},Io=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of To(e))!So.call(t,i)&&i!==n&&Hn(t,i,{get:()=>e[i],enumerable:!(r=Po(e,i))||r.enumerable});return t};var Mo=t=>Io(Hn({},"__esModule",{value:!0}),t);var sa={};Lo(sa,{UPDATE_DEBOUNCE:()=>it,default:()=>An});module.exports=Mo(sa);var ae=require("obsidian");var ut=require("obsidian"),q=new Map,Sr=0,oe;function Lr(t){oe=t}function Le(){return q}function Vn(t){let{path:e,subpath:n}=(0,ut.parseLinktext)(t);return n.startsWith("#")&&!n.startsWith("#^")&&(n=n.substring(n.lastIndexOf("#")),n=`#${(0,ut.stripHeading)(n)}`),{path:e,subpath:n}}var Un=(t,e)=>{var n,r;if(!(oe.settings.enableIgnoreObsExcludeFoldersLinksFrom&&(t!=null&&t.path)&&oe.app.metadataCache.isUserIgnored(t==null?void 0:t.path))){for(let i of[e==null?void 0:e.links,e==null?void 0:e.embeds,e==null?void 0:e.frontmatterLinks])if(i)for(let o of i){let{path:a,subpath:s}=o.link.startsWith("#")?Vn(t.path.replace(`.${t.extension}`,"")+o.link):Vn(o.link),l=oe.app.metadataCache.getFirstLinkpathDest(a,"/");if(l){if(oe.settings.enableIgnoreObsExcludeFoldersLinksTo&&(l!=null&&l.path)&&oe.app.metadataCache.isUserIgnored(l.path)||((r=(n=oe.app.metadataCache.getFileCache(l))==null?void 0:n.frontmatter)==null?void 0:r["snw-index-exclude"])===!0)continue;let p=(l?l.path+s:a).toLocaleUpperCase();q.set(p,[...q.get(p)||[],{realLink:o.link,reference:o,resolvedFile:l,sourceFile:t}])}else{let p=o.link.toLocaleUpperCase();q.set(p,[...q.get(p)||[],{realLink:o.link,reference:o,resolvedFile:{path:`${a}.md`,name:`${a}.md`,basename:a,extension:"md"},sourceFile:t}])}}}},Ir=async t=>{for(let[e,n]of q.entries()){let r=n.filter(i=>{var o;return((o=i==null?void 0:i.sourceFile)==null?void 0:o.path)!==t.path});r.length===0?q.delete(e):q.set(e,r)}};function on(){if(oe.showCountsActive===!0){q=new Map;for(let t of oe.app.vault.getMarkdownFiles()){let e=oe.app.metadataCache.getFileCache(t);e&&Un(t,e)}window.snwAPI&&(window.snwAPI.references=q),Sr=Date.now()}}var Tr=new Map;function pe(t){var o;if(oe.showCountsActive!==!0)return{};let e=Tr.get(t.path.toLocaleUpperCase());if(e){let a=(o=e.createDate)!=null?o:0;if(Sr<a&&a+1e3>Date.now())return e}let n={},r=oe.app.metadataCache.getFileCache(t);if(!r)return n;let i=t.path.toLocaleUpperCase();if(q||on(),r!=null&&r.headings){let a=`${i}#`,s=r.headings.filter(l=>q.has(a+(0,ut.stripHeading)(l.heading).toLocaleUpperCase())).map(l=>{let p=a+(0,ut.stripHeading)(l.heading).toLocaleUpperCase();return{original:"#".repeat(l.level)+l.heading,key:p,headerMatch:l.heading.replace(/\[|\]/g,""),pos:l.position,page:t.basename,type:"heading",references:q.get(p)}});s.length>0&&(n.headings=s)}if(r!=null&&r.blocks){let a=Object.values(r.blocks).filter(s=>{var l;return(((l=q.get(`${i}#^${s.id.toUpperCase()}`))==null?void 0:l.length)||0)>0}).map(s=>{let l=`${i}#^${s.id.toLocaleUpperCase()}`;return{key:l,pos:s.position,page:t.basename,type:"block",references:q.get(l)}});a.length>0&&(n.blocks=a)}if(r!=null&&r.links){let a=r.links.filter(s=>{let l=Q(s.link.startsWith("#")?i+s.link:s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase(),p=q.get(l);return(p==null?void 0:p.length)>0}).map(s=>{let l=Q(s.link.startsWith("#")?i+s.link:s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase(),p={key:l,original:s.original,type:"link",pos:s.position,page:t.basename,references:q.get(l)||[]};return l.includes("#")&&!l.includes("#^")&&(p.original=l.split("#")[1]),p});a.length>0&&(n.links=a)}if(r!=null&&r.embeds){let a=r.embeds.filter(s=>{var f;let l=(s.link.startsWith("#")?Q(i+s.link):Q(s.link)).toLocaleUpperCase()||s.link.toLocaleUpperCase(),p=l.startsWith("#")?`${t.basename}${l}`:l;return((f=q.get(p))==null?void 0:f.length)>0}).map(s=>{var d;let p=(()=>{let y=s.link.startsWith("#")?i+s.link:s.link;return Q(y).toLocaleUpperCase()||s.link.toLocaleUpperCase()})(),f=p.startsWith("#")?`${t.basename}${p}`:p,[u,h]=f.includes("#")&&!f.includes("#^")?f.split("#"):[];return{key:f,page:t.basename,type:"embed",pos:s.position,references:(d=q.get(f))!=null?d:[],...h&&{original:h}}});a.length>0&&(n.embeds=a)}if(r!=null&&r.frontmatterLinks){let a=r.frontmatterLinks.filter(s=>q.has(Q(s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase())).map(s=>{let l=Q(s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase();return{key:l,original:s.original,type:"frontmatterLink",pos:{start:{line:-1,col:-1,offset:-1},end:{line:-1,col:-1,offset:-1}},displayText:s.displayText,page:t.basename,references:q.get(l)||[]}});a.length>0&&(n.frontmatterLinks=a)}return n.cacheMetaData=r,n.createDate=Date.now(),Tr.set(t.path,n),n}function Q(t){let e=Vn(t),n=oe.app.metadataCache.getFirstLinkpathDest(e.path,"/");return n===null?"":n.path+e.subpath}var sn={enableOnStartupDesktop:!0,enableOnStartupMobile:!0,minimumRefCountThreshold:1,maxFileCountToDisplay:100,displayIncomingFilesheader:!0,displayInlineReferencesLivePreview:!0,displayInlineReferencesMarkdown:!0,displayInlineReferencesInSourceMode:!1,displayEmbedReferencesInGutter:!1,displayEmbedReferencesInGutterMobile:!1,displayPropertyReferences:!0,displayPropertyReferencesMobile:!1,enableRenderingBlockIdInMarkdown:!0,enableRenderingLinksInMarkdown:!0,enableRenderingHeadersInMarkdown:!0,enableRenderingEmbedsInMarkdown:!0,enableRenderingBlockIdInLivePreview:!0,enableRenderingLinksInLivePreview:!0,enableRenderingHeadersInLivePreview:!0,enableRenderingEmbedsInLivePreview:!0,enableIgnoreObsExcludeFoldersLinksFrom:!1,enableIgnoreObsExcludeFoldersLinksTo:!1,requireModifierKeyToActivateSNWView:!1,sortOptionDefault:"name-asc",displayCustomPropertyList:"",pluginSupportKanban:!1};function an(t,e){return e?t.displayInlineReferencesInSourceMode:t.displayInlineReferencesLivePreview}var Pt=class{constructor(e){this.references=new Map;this.console=(e,...n)=>{console.log(`SNW: ${e}`,n)};this.getMetaInfoByCurrentFile=async()=>{var e;return this.getMetaInfoByFileName(((e=this.plugin.app.workspace.getActiveFile())==null?void 0:e.path)||"")};this.searchReferencesStartingWith=async e=>{for(let[n,r]of Le())n.startsWith(e)&&console.log(n,r)};this.searchReferencesContains=async e=>{for(let[n,r]of Le())n.contains(e)&&console.log(n,r)};this.getMetaInfoByFileName=async e=>{let n=this.plugin.app.metadataCache.getFirstLinkpathDest(e,"/");return{TFile:n,metadataCache:n?this.plugin.app.metadataCache.getFileCache(n):null,SnwTransformedCache:n?pe(n):null}};this.plugin=e}parseLinkTextToFullPath(e){return Q(e)}};var Mr=require("obsidian"),Tt=class{constructor(e){this.snwCommands=[{id:"SNW-ToggleActiveState",icon:"dot-network",name:"Toggle active state of SNW plugin on/off",callback:async()=>{this.plugin.showCountsActive=!this.plugin.showCountsActive;let e=`SNW toggled ${this.plugin.showCountsActive?`ON

`:`OFF

`}`;e+="Tabs may require reloading for this change to take effect.",new Mr.Notice(e),this.plugin.toggleStateSNWMarkdownPreview(),this.plugin.toggleStateSNWCMEditor(),this.plugin.toggleStateSNWGutters()}},{id:"SNW-ActivateView",icon:"dot-network",name:"Show SNW",callback:async()=>{await this.plugin.activateView()}}];this.plugin=e;for(let n of this.snwCommands)this.plugin.addCommand({id:n.id,name:n.name,icon:n.icon,callback:async()=>{await n.callback()}})}};var S=require("obsidian"),ln=class extends S.PluginSettingTab{constructor(e,n){super(e,n),this.plugin=n}display(){let{containerEl:e}=this;e.empty(),new S.Setting(e).setHeading().setName("Enable on startup"),new S.Setting(e).setName("On the desktop enable SNW at startup").addToggle(r=>{r.setValue(this.plugin.settings.enableOnStartupDesktop),r.onChange(async i=>{this.plugin.settings.enableOnStartupDesktop=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("On mobile devices enable SNW at startup").addToggle(r=>{r.setValue(this.plugin.settings.enableOnStartupMobile),r.onChange(async i=>{this.plugin.settings.enableOnStartupMobile=i,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("SNW Activation"),new S.Setting(e).setName("Require modifier key to activate SNW").setDesc(`If enabled, SNW will only activate when the modifier key is pressed when hovering the mouse over an SNW counter.
						Otherwise, SNW will activate on a mouse hover. May require reopening open files to take effect.`).addToggle(r=>{r.setValue(this.plugin.settings.requireModifierKeyToActivateSNWView),r.onChange(async i=>{this.plugin.settings.requireModifierKeyToActivateSNWView=i,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Thresholds"),new S.Setting(e).setName("Minimal required count to show counter").setDesc(`This setting defines how many references there needs to be for the reference count box to appear. May require reloading open files.
				 Currently set to: ${this.plugin.settings.minimumRefCountThreshold} references.`).addSlider(r=>r.setLimits(1,1e3,1).setValue(this.plugin.settings.minimumRefCountThreshold).onChange(async i=>{this.plugin.settings.minimumRefCountThreshold=i,await this.plugin.saveSettings()}).setDynamicTooltip()),new S.Setting(e).setName("Maximum file references to show").setDesc(`This setting defines the max amount of files with their references are displayed in the popup or sidebar.  Set to 1000 for no maximum.
				 Currently set to: ${this.plugin.settings.maxFileCountToDisplay} references. Keep in mind higher numbers can affect performance on larger vaults.`).addSlider(r=>r.setLimits(1,1e3,1).setValue(this.plugin.settings.maxFileCountToDisplay).onChange(async i=>{this.plugin.settings.maxFileCountToDisplay=i,await this.plugin.saveSettings()}).setDynamicTooltip()),new S.Setting(e).setHeading().setName("Use Obsidian's Excluded Files list (Settings > Files & Links)"),new S.Setting(e).setName("Outgoing links").setDesc("If enabled, links FROM files in the excluded folder will not be included in SNW's reference counters. May require restarting Obsidian.").addToggle(r=>{r.setValue(this.plugin.settings.enableIgnoreObsExcludeFoldersLinksFrom),r.onChange(async i=>{this.plugin.settings.enableIgnoreObsExcludeFoldersLinksFrom=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Incoming links").setDesc("If enabled, links TO files in the excluded folder will not be included in SNW's reference counters.  May require restarting Obsidian.").addToggle(r=>{r.setValue(this.plugin.settings.enableIgnoreObsExcludeFoldersLinksTo),r.onChange(async i=>{this.plugin.settings.enableIgnoreObsExcludeFoldersLinksTo=i,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Properties"),new S.Setting(e).setName("Show references in properties on Desktop").addToggle(r=>{r.setValue(this.plugin.settings.displayPropertyReferences),r.onChange(async i=>{this.plugin.settings.displayPropertyReferences=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Show references in properties on mobile").addToggle(r=>{r.setValue(this.plugin.settings.displayPropertyReferencesMobile),r.onChange(async i=>{this.plugin.settings.displayPropertyReferencesMobile=i,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("View Modes"),new S.Setting(e).setName("Incoming Links Header Count").setDesc("In header of a document, show number of incoming link to that file.").addToggle(r=>{r.setValue(this.plugin.settings.displayIncomingFilesheader),r.onChange(async i=>{this.plugin.settings.displayIncomingFilesheader=i,await this.plugin.saveSettings()})});let n="Note: files may need to be closed and reopened for this setting to take effect.";new S.Setting(e).setName("Show SNW indicators in Live Preview Editor").setDesc(`While using Live Preview, Display inline of the text of documents all reference counts for links, blocks and embeds. ${n}`).addToggle(r=>{r.setValue(this.plugin.settings.displayInlineReferencesLivePreview),r.onChange(async i=>{this.plugin.settings.displayInlineReferencesLivePreview=i,this.plugin.toggleStateSNWCMEditor(),await this.plugin.saveSettings()})}),new S.Setting(e).setName("Show SNW indicators in Reading view ").setDesc(`While in Reading View of a document, display inline of the text of documents all reference counts for links, blocks and embeds. ${n}`).addToggle(r=>{r.setValue(this.plugin.settings.displayInlineReferencesMarkdown),r.onChange(async i=>{this.plugin.settings.displayInlineReferencesMarkdown=i,this.plugin.toggleStateSNWMarkdownPreview(),await this.plugin.saveSettings()})}),new S.Setting(e).setName("Show SNW indicators in Source Mode ").setDesc(`While in Source Mode of a document, display inline of the text of documents all reference counts for links, blocks and embeds. By default, this is turned off since the goal of Source Mode is to see the raw markdown. ${n}`).addToggle(r=>{r.setValue(this.plugin.settings.displayInlineReferencesInSourceMode),r.onChange(async i=>{this.plugin.settings.displayInlineReferencesInSourceMode=i,this.plugin.toggleStateSNWCMEditor(),await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embed references in Gutter in Live Preview Mode (Desktop)").setDesc(`Displays a count of references in the gutter while in live preview. This is done only in a
					  special scenario. It has to do with the way Obsidian renders embeds, example: ![[link]] when
					  they are on its own line. Strange New Worlds cannot embed the count in this scenario, so a hint is
					  displayed in the gutter. It is a hack, but at least we get some information.`).addToggle(r=>{r.setValue(this.plugin.settings.displayEmbedReferencesInGutter),r.onChange(async i=>{this.plugin.settings.displayEmbedReferencesInGutter=i,this.plugin.toggleStateSNWGutters(),await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embed references in Gutter in Live Preview Mode (Mobile)").setDesc("This is off by default on mobile since the gutter takes up some space in the left margin.").addToggle(r=>{r.setValue(this.plugin.settings.displayEmbedReferencesInGutterMobile),r.onChange(async i=>{this.plugin.settings.displayEmbedReferencesInGutterMobile=i,this.plugin.toggleStateSNWGutters(),await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Enable reference types in Reading Mode"),e.createEl("sup",{text:"(requires reopening documents to take effect)"}),new S.Setting(e).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingBlockIdInMarkdown),r.onChange(async i=>{this.plugin.settings.enableRenderingBlockIdInMarkdown=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingEmbedsInMarkdown),r.onChange(async i=>{this.plugin.settings.enableRenderingEmbedsInMarkdown=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingLinksInMarkdown),r.onChange(async i=>{this.plugin.settings.enableRenderingLinksInMarkdown=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingHeadersInMarkdown),r.onChange(async i=>{this.plugin.settings.enableRenderingHeadersInMarkdown=i,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Enable reference types in Live Preview Mode and Source Mode"),e.createEl("sup",{text:"(requires reopening documents to take effect)"}),new S.Setting(e).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingBlockIdInLivePreview),r.onChange(async i=>{this.plugin.settings.enableRenderingBlockIdInLivePreview=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingEmbedsInLivePreview),r.onChange(async i=>{this.plugin.settings.enableRenderingEmbedsInLivePreview=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingLinksInLivePreview),r.onChange(async i=>{this.plugin.settings.enableRenderingLinksInLivePreview=i,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.plugin.settings.enableRenderingHeadersInLivePreview),r.onChange(async i=>{this.plugin.settings.enableRenderingHeadersInLivePreview=i,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Custom Display Settings"),new S.Setting(this.containerEl).setName("Custom Property List").setDesc("Displays properties from referenced files in the references list. The list is comma separated list of case-sensitive property names.").addText(r=>{r.setPlaceholder("Ex: Project, Summary").setValue(this.plugin.settings.displayCustomPropertyList).onChange(async i=>{this.plugin.settings.displayCustomPropertyList=i,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Support for Other Plugins"),new S.Setting(e).setName("Kanban by mgmeyers").setDesc(`Enables SNW support with in the preview mode of the Kanban plugin by mgmeyers at https://github.com/mgmeyers/obsidian-kanban.
				SNW references will always show when editing a card. Changing this setting may require reopening files.`).addToggle(r=>{r.setValue(this.plugin.settings.pluginSupportKanban),r.onChange(async i=>{this.plugin.settings.pluginSupportKanban=i,await this.plugin.saveSettings()})})}};var lo=require("obsidian");var dn,H,Ar,Oo,qe,Or,Fr,Wr,Hr,qn,Bn,jn,Do,St={},Vr=[],No=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,mn=Array.isArray;function Ie(t,e){for(var n in e)t[n]=e[n];return t}function Kn(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ro(t,e,n){var r,i,o,a={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?dn.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return cn(t,a,r,i,null)}function cn(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i==null?++Ar:i,__i:-1,__u:0};return i==null&&H.vnode!=null&&H.vnode(o),o}function dt(t){return t.children}function un(t,e){this.props=t,this.context=e}function ft(t,e){if(e==null)return t.__?ft(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ft(t):null}function Ur(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ur(t)}}function Dr(t){(!t.__d&&(t.__d=!0)&&qe.push(t)&&!fn.__r++||Or!=H.debounceRendering)&&((Or=H.debounceRendering)||Fr)(fn)}function fn(){for(var t,e,n,r,i,o,a,s=1;qe.length;)qe.length>s&&qe.sort(Wr),t=qe.shift(),s=qe.length,t.__d&&(n=void 0,i=(r=(e=t).__v).__e,o=[],a=[],e.__P&&((n=Ie({},r)).__v=r.__v+1,H.vnode&&H.vnode(n),zn(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,i==null?ft(r):i,!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,$r(o,n,a),n.__e!=i&&Ur(n)));fn.__r=0}function Br(t,e,n,r,i,o,a,s,l,p,f){var u,h,d,y,v,w,g=r&&r.__k||Vr,_=e.length;for(l=Ao(n,e,g,l,_),u=0;u<_;u++)(d=n.__k[u])!=null&&(h=d.__i==-1?St:g[d.__i]||St,d.__i=u,w=zn(t,d,h,i,o,a,s,l,p,f),y=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&Gn(h.ref,null,d),f.push(d.ref,d.__c||y,d)),v==null&&y!=null&&(v=y),4&d.__u||h.__k===d.__k?l=jr(d,l,t):typeof d.type=="function"&&w!==void 0?l=w:y&&(l=y.nextSibling),d.__u&=-7);return n.__e=v,l}function Ao(t,e,n,r,i){var o,a,s,l,p,f=n.length,u=f,h=0;for(t.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=o+h,(a=t.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?cn(null,a,null,null,null):mn(a)?cn(dt,{children:a},null,null,null):a.constructor==null&&a.__b>0?cn(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,s=null,(p=a.__i=Fo(a,n,l,u))!=-1&&(u--,(s=n[p])&&(s.__u|=2)),s==null||s.__v==null?(p==-1&&(i>f?h--:i<f&&h++),typeof a.type!="function"&&(a.__u|=4)):p!=l&&(p==l-1?h--:p==l+1?h++:(p>l?h--:h++,a.__u|=4))):t.__k[o]=null;if(u)for(o=0;o<f;o++)(s=n[o])!=null&&(2&s.__u)==0&&(s.__e==r&&(r=ft(s)),Kr(s,s));return r}function jr(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=jr(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=ft(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Fo(t,e,n,r){var i,o,a,s=t.key,l=t.type,p=e[n],f=p!=null&&(2&p.__u)==0;if(p===null&&t.key==null||f&&s==p.key&&l==p.type)return n;if(r>(f?1:0)){for(i=n-1,o=n+1;i>=0||o<e.length;)if((p=e[a=i>=0?i--:o++])!=null&&(2&p.__u)==0&&s==p.key&&l==p.type)return a}return-1}function Nr(t,e,n){e[0]=="-"?t.setProperty(e,n==null?"":n):t[e]=n==null?"":typeof n!="number"||No.test(e)?n:n+"px"}function pn(t,e,n,r,i){var o,a;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Nr(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Nr(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Hr,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=qn,t.addEventListener(e,o?jn:Bn,o)):t.removeEventListener(e,o?jn:Bn,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n==null?"":n;break e}catch(s){}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Rr(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=qn++;else if(e.t<n.u)return;return n(H.event?H.event(e):e)}}}function zn(t,e,n,r,i,o,a,s,l,p){var f,u,h,d,y,v,w,g,_,C,c,E,b,T,A,R,D,M=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=e.__e=n.__e]),(f=H.__b)&&f(e);e:if(typeof M=="function")try{if(g=e.props,_="prototype"in M&&M.prototype.render,C=(f=M.contextType)&&r[f.__c],c=f?C?C.props.value:f.__:r,n.__c?w=(u=e.__c=n.__c).__=u.__E:(_?e.__c=u=new M(g,c):(e.__c=u=new un(g,c),u.constructor=M,u.render=Ho),C&&C.sub(u),u.props=g,u.state||(u.state={}),u.context=c,u.__n=r,h=u.__d=!0,u.__h=[],u._sb=[]),_&&u.__s==null&&(u.__s=u.state),_&&M.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Ie({},u.__s)),Ie(u.__s,M.getDerivedStateFromProps(g,u.__s))),d=u.props,y=u.state,u.__v=e,h)_&&M.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),_&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(_&&M.getDerivedStateFromProps==null&&g!==d&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(g,c),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(g,u.__s,c)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(u.props=g,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(N){N&&(N.__=e)}),E=0;E<u._sb.length;E++)u.__h.push(u._sb[E]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(g,u.__s,c),_&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(d,y,v)})}if(u.context=c,u.props=g,u.__P=t,u.__e=!1,b=H.__r,T=0,_){for(u.state=u.__s,u.__d=!1,b&&b(e),f=u.render(u.props,u.state,u.context),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[]}else do u.__d=!1,b&&b(e),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++T<25);u.state=u.__s,u.getChildContext!=null&&(r=Ie(Ie({},r),u.getChildContext())),_&&!h&&u.getSnapshotBeforeUpdate!=null&&(v=u.getSnapshotBeforeUpdate(d,y)),R=f,f!=null&&f.type===dt&&f.key==null&&(R=qr(f.props.children)),s=Br(t,mn(R)?R:[R],e,n,r,i,o,a,s,l,p),u.base=e.__e,e.__u&=-161,u.__h.length&&a.push(u),w&&(u.__E=u.__=null)}catch(N){if(e.__v=null,l||o!=null)if(N.then){for(e.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,e.__e=s}else{for(D=o.length;D--;)Kn(o[D]);$n(e)}else e.__e=n.__e,e.__k=n.__k,N.then||$n(e);H.__e(N,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=Wo(n.__e,e,n,r,i,o,a,l,p);return(f=H.diffed)&&f(e),128&e.__u?void 0:s}function $n(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach($n)}function $r(t,e,n){for(var r=0;r<n.length;r++)Gn(n[r],n[++r],n[++r]);H.__c&&H.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){H.__e(o,i.__v)}})}function qr(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:mn(t)?t.map(qr):Ie({},t)}function Wo(t,e,n,r,i,o,a,s,l){var p,f,u,h,d,y,v,w=n.props,g=e.props,_=e.type;if(_=="svg"?i="http://www.w3.org/2000/svg":_=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(p=0;p<o.length;p++)if((d=o[p])&&"setAttribute"in d==!!_&&(_?d.localName==_:d.nodeType==3)){t=d,o[p]=null;break}}if(t==null){if(_==null)return document.createTextNode(g);t=document.createElementNS(i,_,g.is&&g),s&&(H.__m&&H.__m(e,o),s=!1),o=null}if(_==null)w===g||s&&t.data==g||(t.data=g);else{if(o=o&&dn.call(t.childNodes),w=n.props||St,!s&&o!=null)for(w={},p=0;p<t.attributes.length;p++)w[(d=t.attributes[p]).name]=d.value;for(p in w)if(d=w[p],p!="children"){if(p=="dangerouslySetInnerHTML")u=d;else if(!(p in g)){if(p=="value"&&"defaultValue"in g||p=="checked"&&"defaultChecked"in g)continue;pn(t,p,null,d,i)}}for(p in g)d=g[p],p=="children"?h=d:p=="dangerouslySetInnerHTML"?f=d:p=="value"?y=d:p=="checked"?v=d:s&&typeof d!="function"||w[p]===d||pn(t,p,d,w[p],i);if(f)s||u&&(f.__html==u.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(u&&(t.innerHTML=""),Br(e.type=="template"?t.content:t,mn(h)?h:[h],e,n,r,_=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&ft(n,0),s,l),o!=null)for(p=o.length;p--;)Kn(o[p]);s||(p="value",_=="progress"&&y==null?t.removeAttribute("value"):y!=null&&(y!==t[p]||_=="progress"&&!y||_=="option"&&y!=w[p])&&pn(t,p,y,w[p],i),p="checked",v!=null&&v!=t[p]&&pn(t,p,v,w[p],i))}return t}function Gn(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){H.__e(i,n)}}function Kr(t,e,n){var r,i;if(H.unmount&&H.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||Gn(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){H.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&Kr(r[i],e,n||typeof t.type!="function");n||Kn(t.__e),t.__c=t.__=t.__e=void 0}function Ho(t,e,n){return this.constructor(t,n)}function ke(t,e,n){var r,i,o,a;e==document&&(e=document.documentElement),H.__&&H.__(t,e),i=(r=typeof n=="function")?null:n&&n.__k||e.__k,o=[],a=[],zn(e,t=(!r&&n||e).__k=Ro(dt,null,[t]),i||St,St,e.namespaceURI,!r&&n?[n]:i?null:e.firstChild?dn.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r,a),$r(o,t,a)}dn=Vr.slice,H={__e:function(t,e,n,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(s){t=s}throw t}},Ar=0,Oo=function(t){return t!=null&&t.constructor==null},un.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ie({},this.state),typeof t=="function"&&(t=t(Ie({},n),this.props)),t&&Ie(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Dr(this))},un.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Dr(this))},un.prototype.render=dt,qe=[],Fr=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Wr=function(t,e){return t.__v.__b-e.__v.__b},fn.__r=0,Hr=/(PointerCapture)$|Capture$/i,qn=0,Bn=Rr(!1),jn=Rr(!0),Do=0;var Vo=(t,e)=>{let n=getComputedStyle(t),r=n.position==="absolute",i=e?/(auto|scroll|hidden)/:/(auto|scroll)/;if(n.position==="fixed")return document.body;for(let o=t.parentElement;o;o=o.parentElement)if(n=getComputedStyle(o),(!r||n.position!=="static")&&i.test(n.overflow+n.overflowY+n.overflowX))return o;return document.body},gn=t=>{let e=t.querySelectorAll(".search-result-file-matched-text");for(let n of Array.from(e))if(n instanceof HTMLElement){let r=Vo(n,!0);r&&(r.scrollTop=n.offsetTop-r.offsetTop-r.offsetHeight/2)}};var rt=require("obsidian");var io=require("obsidian");var mt=require("obsidian");var Lt=(t,e)=>t.substring(e.start.offset,e.end.offset),zr=(t,e)=>t.substring(e.start.offset-e.start.col,e.end.offset),Yn=(t,e)=>{try{return t.start.offset<=e.start.offset&&t.end.offset>=e.end.offset}catch(n){return!1}};var hn=class{constructor(e,{listItems:n=[],headings:r=[],sections:i=[]}){this.fileContents=e;this.getListItemIndexContaining=e=>this.listItems.findIndex(({position:n})=>Yn(n,e));this.getSectionContaining=e=>this.sections.find(({position:n})=>Yn(n,e));this.getListItemWithDescendants=e=>{let n=this.listItems[e],r=[n];for(let i=e+1;i<this.listItems.length;i++){let o=this.listItems[i];if(o.parent<n.position.start.line)return r;r.push(o)}return r};this.listItems=n,this.headings=r,this.sections=i}getListBreadcrumbs(e){let n=[];if(this.listItems.length===0)return n;let r=this.getListItemIndexContaining(e);if(r<0)return n;let o=this.listItems[r],a=o.parent;if(this.isTopLevelListItem(o))return n;for(let s=r-1;s>=0;s--){let l=this.listItems[s];if(l.parent<a&&(n.unshift(l),a=l.parent),this.isTopLevelListItem(l))return n}return n}getFirstSectionUnder(e){return this.sections.find(n=>n.position.start.line>e.start.line)}getHeadingContaining(e){let n=this.getHeadingIndexContaining(e);return this.headings[n]}getHeadingBreadcrumbs(e){let n=[];if(this.headings.length===0)return n;let r=l=>{let p=this.headings[l].level,f=l-1;for(let u=f;u>=0;u--){let h=this.headings[u];h.level<p&&(p=h.level,n.unshift(h))}},i=this.getHeadingIndexContaining(e);if(i>=0)return r(i),n;let a=this.getIndexOfHeadingAbove(e);if(a>=0){let l=this.headings[a];return n.unshift(l),r(a),n}return n}isTopLevelListItem(e){return e.parent<=0}getIndexOfHeadingAbove(e){return e===void 0?-1:this.headings.reduce((n,r,i)=>r.position.start.line<e.start.line?i:n,-1)}getHeadingIndexContaining(e){return e===void 0?-1:this.headings.findIndex(n=>n.position.start.line===e.start.line)}};var Gr=t=>t.map(e=>e.trim()).filter(e=>e.length>0).join(" \u27A4 "),Yr=(t,e)=>Gr(e.map(n=>Lt(t,n.position)).map(n=>n.trim().replace(/^-\s+/,""))),Xr=(t,e)=>{let r=e[0].position.start.col;return e.map(i=>zr(t,i.position).slice(r)).join(`
`)},Jr=t=>Gr(t.map(e=>e.heading));var Uo=0,xa=Array.isArray;function L(t,e,n,r,i,o){e||(e={});var a,s,l=e;if("ref"in l)for(s in l={},e)s=="ref"?a=e[s]:l[s]=e[s];var p={type:t,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Uo,__i:-1,__u:0,__source:i,__self:o};if(typeof t=="function"&&(a=t.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return H.vnode&&H.vnode(p),p}var se;function Qr(t){se=t}var Zr=async t=>{var i,o;let e=t.reference.position!==void 0?t.reference.position.start.line.toString():"0",n=L("div",{className:"snw-ref-item-info search-result-file-match","snw-data-line-number":e,"snw-data-file-name":(i=t==null?void 0:t.sourceFile)==null?void 0:i.path,"data-href":(o=t==null?void 0:t.sourceFile)==null?void 0:o.path,dangerouslySetInnerHTML:{__html:(await Bo(t)).innerHTML}}),r=createDiv();return ke(n,r),r},Bo=async t=>{var h;let e=await se.app.vault.cachedRead(t.sourceFile),n=se.app.metadataCache.getFileCache(t.sourceFile),r=t.reference.position,i=createDiv();if(i.setAttribute("uic","uic"),(h=t.reference)!=null&&h.key)return i.innerText=`Used in property: ${t.reference.key}`,i;let o=new hn(e,n),a=o.getHeadingBreadcrumbs(r);if(a.length>0){let d=i.createDiv();d.addClass("snw-breadcrumbs"),d.createEl("span",{text:"H"}),await mt.MarkdownRenderer.render(se.app,Jr(a),d,t.sourceFile.path,se)}let s=o.getListItemIndexContaining(r);if(s>=0){let d=o.getListBreadcrumbs(r);if(d.length>0){let w=i.createDiv();w.addClass("snw-breadcrumbs"),w.createEl("span",{text:"L"}),await mt.MarkdownRenderer.render(se.app,Yr(e,d),w,t.sourceFile.path,se)}let y=o.getListItemWithDescendants(s),v=i.createDiv();await mt.MarkdownRenderer.render(se.app,Xr(e,y),v,t.sourceFile.path,se)}else{let d=o.getSectionContaining(r),y="";(d==null?void 0:d.position)!==void 0&&(y=Lt(e,d.position)),/^\[\^([\w]+)\]:(.*)$/.test(y)&&(y=y.replace("[","").replace("]:","")),await mt.MarkdownRenderer.render(se.app,y,i,t.sourceFile.path,se)}let p=o.getHeadingContaining(r);if(p){let d=o.getFirstSectionUnder(p.position);if(d){let y=i.createDiv();await mt.MarkdownRenderer.render(se.app,Lt(e,d.position),y,t.sourceFile.path,se)}}let f=i.querySelectorAll("*"),u=Array.from(f).find(d=>d.textContent===t.reference.displayText);try{u.addClass("search-result-file-matched-text")}catch(d){}return i};var j="top",X="bottom",G="right",K="left",vn="auto",He=[j,X,G,K],Me="start",Ke="end",ei="clippingParents",yn="viewport",gt="popper",ti="reference",Xn=He.reduce(function(t,e){return t.concat([e+"-"+Me,e+"-"+Ke])},[]),wn=[].concat(He,[vn]).reduce(function(t,e){return t.concat([e,e+"-"+Me,e+"-"+Ke])},[]),jo="beforeRead",$o="read",qo="afterRead",Ko="beforeMain",zo="main",Go="afterMain",Yo="beforeWrite",Xo="write",Jo="afterWrite",ni=[jo,$o,qo,Ko,zo,Go,Yo,Xo,Jo];function Z(t){return t?(t.nodeName||"").toLowerCase():null}function B(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ce(t){var e=B(t).Element;return t instanceof e||t instanceof Element}function J(t){var e=B(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ht(t){if(typeof ShadowRoot=="undefined")return!1;var e=B(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Qo(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!J(o)||!Z(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function Zo(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(l,p){return l[p]="",l},{});!J(i)||!Z(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}var It={name:"applyStyles",enabled:!0,phase:"write",fn:Qo,effect:Zo,requires:["computeStyles"]};function ee(t){return t.split("-")[0]}var ve=Math.max,ze=Math.min,Oe=Math.round;function vt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Mt(){return!/^((?!chrome|android).)*safari/i.test(vt())}function ue(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&J(t)&&(i=t.offsetWidth>0&&Oe(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Oe(r.height)/t.offsetHeight||1);var a=ce(t)?B(t):window,s=a.visualViewport,l=!Mt()&&n,p=(r.left+(l&&s?s.offsetLeft:0))/i,f=(r.top+(l&&s?s.offsetTop:0))/o,u=r.width/i,h=r.height/o;return{width:u,height:h,top:f,right:p+u,bottom:f+h,left:p,x:p,y:f}}function Ge(t){var e=ue(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Ot(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ht(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ie(t){return B(t).getComputedStyle(t)}function Jn(t){return["table","td","th"].indexOf(Z(t))>=0}function te(t){return((ce(t)?t.ownerDocument:t.document)||window.document).documentElement}function De(t){return Z(t)==="html"?t:t.assignedSlot||t.parentNode||(ht(t)?t.host:null)||te(t)}function ri(t){return!J(t)||ie(t).position==="fixed"?null:t.offsetParent}function es(t){var e=/firefox/i.test(vt()),n=/Trident/i.test(vt());if(n&&J(t)){var r=ie(t);if(r.position==="fixed")return null}var i=De(t);for(ht(i)&&(i=i.host);J(i)&&["html","body"].indexOf(Z(i))<0;){var o=ie(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function ye(t){for(var e=B(t),n=ri(t);n&&Jn(n)&&ie(n).position==="static";)n=ri(n);return n&&(Z(n)==="html"||Z(n)==="body"&&ie(n).position==="static")?e:n||es(t)||e}function Ye(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Xe(t,e,n){return ve(t,ze(e,n))}function ii(t,e,n){var r=Xe(t,e,n);return r>n?n:r}function Dt(){return{top:0,right:0,bottom:0,left:0}}function Nt(t){return Object.assign({},Dt(),t)}function Rt(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var ts=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Nt(typeof e!="number"?e:Rt(e,He))};function ns(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=ee(n.placement),l=Ye(s),p=[K,G].indexOf(s)>=0,f=p?"height":"width";if(!(!o||!a)){var u=ts(i.padding,n),h=Ge(o),d=l==="y"?j:K,y=l==="y"?X:G,v=n.rects.reference[f]+n.rects.reference[l]-a[l]-n.rects.popper[f],w=a[l]-n.rects.reference[l],g=ye(o),_=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,C=v/2-w/2,c=u[d],E=_-h[f]-u[y],b=_/2-h[f]/2+C,T=Xe(c,b,E),A=l;n.modifiersData[r]=(e={},e[A]=T,e.centerOffset=T-b,e)}}function rs(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Ot(e.elements.popper,i)&&(e.elements.arrow=i))}var oi={name:"arrow",enabled:!0,phase:"main",fn:ns,effect:rs,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fe(t){return t.split("-")[1]}var is={top:"auto",right:"auto",bottom:"auto",left:"auto"};function os(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Oe(n*i)/i||0,y:Oe(r*i)/i||0}}function si(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,p=t.adaptive,f=t.roundOffsets,u=t.isFixed,h=a.x,d=h===void 0?0:h,y=a.y,v=y===void 0?0:y,w=typeof f=="function"?f({x:d,y:v}):{x:d,y:v};d=w.x,v=w.y;var g=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),C=K,c=j,E=window;if(p){var b=ye(n),T="clientHeight",A="clientWidth";if(b===B(n)&&(b=te(n),ie(b).position!=="static"&&s==="absolute"&&(T="scrollHeight",A="scrollWidth")),b=b,i===j||(i===K||i===G)&&o===Ke){c=X;var R=u&&b===E&&E.visualViewport?E.visualViewport.height:b[T];v-=R-r.height,v*=l?1:-1}if(i===K||(i===j||i===X)&&o===Ke){C=G;var D=u&&b===E&&E.visualViewport?E.visualViewport.width:b[A];d-=D-r.width,d*=l?1:-1}}var M=Object.assign({position:s},p&&is),N=f===!0?os({x:d,y:v},B(n)):{x:d,y:v};if(d=N.x,v=N.y,l){var V;return Object.assign({},M,(V={},V[c]=_?"0":"",V[C]=g?"0":"",V.transform=(E.devicePixelRatio||1)<=1?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",V))}return Object.assign({},M,(e={},e[c]=_?v+"px":"",e[C]=g?d+"px":"",e.transform="",e))}function ss(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,p={placement:ee(e.placement),variation:fe(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,si(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,si(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var ai={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ss,data:{}};var bn={passive:!0};function as(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,l=B(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&p.forEach(function(f){f.addEventListener("scroll",n.update,bn)}),s&&l.addEventListener("resize",n.update,bn),function(){o&&p.forEach(function(f){f.removeEventListener("scroll",n.update,bn)}),s&&l.removeEventListener("resize",n.update,bn)}}var li={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:as,data:{}};var ls={left:"right",right:"left",bottom:"top",top:"bottom"};function yt(t){return t.replace(/left|right|bottom|top/g,function(e){return ls[e]})}var ps={start:"end",end:"start"};function _n(t){return t.replace(/start|end/g,function(e){return ps[e]})}function Je(t){var e=B(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Qe(t){return ue(te(t)).left+Je(t).scrollLeft}function Qn(t,e){var n=B(t),r=te(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var p=Mt();(p||!p&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+Qe(t),y:l}}function Zn(t){var e,n=te(t),r=Je(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=ve(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=ve(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Qe(t),l=-r.scrollTop;return ie(i||n).direction==="rtl"&&(s+=ve(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function Ze(t){var e=ie(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function xn(t){return["html","body","#document"].indexOf(Z(t))>=0?t.ownerDocument.body:J(t)&&Ze(t)?t:xn(De(t))}function Ve(t,e){var n;e===void 0&&(e=[]);var r=xn(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=B(r),a=i?[o].concat(o.visualViewport||[],Ze(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(Ve(De(a)))}function wt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function cs(t,e){var n=ue(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function pi(t,e,n){return e===yn?wt(Qn(t,n)):ce(e)?cs(e,n):wt(Zn(te(t)))}function us(t){var e=Ve(De(t)),n=["absolute","fixed"].indexOf(ie(t).position)>=0,r=n&&J(t)?ye(t):t;return ce(r)?e.filter(function(i){return ce(i)&&Ot(i,r)&&Z(i)!=="body"}):[]}function er(t,e,n,r){var i=e==="clippingParents"?us(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(l,p){var f=pi(t,p,r);return l.top=ve(f.top,l.top),l.right=ze(f.right,l.right),l.bottom=ze(f.bottom,l.bottom),l.left=ve(f.left,l.left),l},pi(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function At(t){var e=t.reference,n=t.element,r=t.placement,i=r?ee(r):null,o=r?fe(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(i){case j:l={x:a,y:e.y-n.height};break;case X:l={x:a,y:e.y+e.height};break;case G:l={x:e.x+e.width,y:s};break;case K:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var p=i?Ye(i):null;if(p!=null){var f=p==="y"?"height":"width";switch(o){case Me:l[p]=l[p]-(e[f]/2-n[f]/2);break;case Ke:l[p]=l[p]+(e[f]/2-n[f]/2);break;default:}}return l}function we(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,a=o===void 0?t.strategy:o,s=n.boundary,l=s===void 0?ei:s,p=n.rootBoundary,f=p===void 0?yn:p,u=n.elementContext,h=u===void 0?gt:u,d=n.altBoundary,y=d===void 0?!1:d,v=n.padding,w=v===void 0?0:v,g=Nt(typeof w!="number"?w:Rt(w,He)),_=h===gt?ti:gt,C=t.rects.popper,c=t.elements[y?_:h],E=er(ce(c)?c:c.contextElement||te(t.elements.popper),l,f,a),b=ue(t.elements.reference),T=At({reference:b,element:C,strategy:"absolute",placement:i}),A=wt(Object.assign({},C,T)),R=h===gt?A:b,D={top:E.top-R.top+g.top,bottom:R.bottom-E.bottom+g.bottom,left:E.left-R.left+g.left,right:R.right-E.right+g.right},M=t.modifiersData.offset;if(h===gt&&M){var N=M[i];Object.keys(D).forEach(function(V){var ne=[G,X].indexOf(V)>=0?1:-1,F=[j,X].indexOf(V)>=0?"y":"x";D[V]+=N[F]*ne})}return D}function tr(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,p=l===void 0?wn:l,f=fe(r),u=f?s?Xn:Xn.filter(function(y){return fe(y)===f}):He,h=u.filter(function(y){return p.indexOf(y)>=0});h.length===0&&(h=u);var d=h.reduce(function(y,v){return y[v]=we(t,{placement:v,boundary:i,rootBoundary:o,padding:a})[ee(v)],y},{});return Object.keys(d).sort(function(y,v){return d[y]-d[v]})}function fs(t){if(ee(t)===vn)return[];var e=yt(t);return[_n(t),e,_n(e)]}function ds(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,p=n.padding,f=n.boundary,u=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,y=d===void 0?!0:d,v=n.allowedAutoPlacements,w=e.options.placement,g=ee(w),_=g===w,C=l||(_||!y?[yt(w)]:fs(w)),c=[w].concat(C).reduce(function(Ee,he){return Ee.concat(ee(he)===vn?tr(e,{placement:he,boundary:f,rootBoundary:u,padding:p,flipVariations:y,allowedAutoPlacements:v}):he)},[]),E=e.rects.reference,b=e.rects.popper,T=new Map,A=!0,R=c[0],D=0;D<c.length;D++){var M=c[D],N=ee(M),V=fe(M)===Me,ne=[j,X].indexOf(N)>=0,F=ne?"width":"height",k=we(e,{placement:M,boundary:f,rootBoundary:u,altBoundary:h,padding:p}),U=ne?V?G:K:V?X:j;E[F]>b[F]&&(U=yt(U));var I=yt(U),$=[];if(o&&$.push(k[N]<=0),s&&$.push(k[U]<=0,k[I]<=0),$.every(function(Ee){return Ee})){R=M,A=!1;break}T.set(M,$)}if(A)for(var _e=y?3:1,Ue=function(he){var Pe=c.find(function(st){var Te=T.get(st);if(Te)return Te.slice(0,he).every(function(at){return at})});if(Pe)return R=Pe,"break"},xe=_e;xe>0;xe--){var Be=Ue(xe);if(Be==="break")break}e.placement!==R&&(e.modifiersData[r]._skip=!0,e.placement=R,e.reset=!0)}}var ci={name:"flip",enabled:!0,phase:"main",fn:ds,requiresIfExists:["offset"],data:{_skip:!1}};function ui(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function fi(t){return[j,G,X,K].some(function(e){return t[e]>=0})}function ms(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=we(e,{elementContext:"reference"}),s=we(e,{altBoundary:!0}),l=ui(a,r),p=ui(s,i,o),f=fi(l),u=fi(p);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:p,isReferenceHidden:f,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":u})}var di={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ms};function gs(t,e,n){var r=ee(t),i=[K,j].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[K,G].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function hs(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,a=wn.reduce(function(f,u){return f[u]=gs(u,e.rects,o),f},{}),s=a[e.placement],l=s.x,p=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=a}var mi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:hs};function vs(t){var e=t.state,n=t.name;e.modifiersData[n]=At({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var gi={name:"popperOffsets",enabled:!0,phase:"read",fn:vs,data:{}};function nr(t){return t==="x"?"y":"x"}function ys(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,p=n.rootBoundary,f=n.altBoundary,u=n.padding,h=n.tether,d=h===void 0?!0:h,y=n.tetherOffset,v=y===void 0?0:y,w=we(e,{boundary:l,rootBoundary:p,padding:u,altBoundary:f}),g=ee(e.placement),_=fe(e.placement),C=!_,c=Ye(g),E=nr(c),b=e.modifiersData.popperOffsets,T=e.rects.reference,A=e.rects.popper,R=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,D=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(b){if(o){var V,ne=c==="y"?j:K,F=c==="y"?X:G,k=c==="y"?"height":"width",U=b[c],I=U+w[ne],$=U-w[F],_e=d?-A[k]/2:0,Ue=_===Me?T[k]:A[k],xe=_===Me?-A[k]:-T[k],Be=e.elements.arrow,Ee=d&&Be?Ge(Be):{width:0,height:0},he=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Dt(),Pe=he[ne],st=he[F],Te=Xe(0,T[k],Ee[k]),at=C?T[k]/2-_e-Te-Pe-D.mainAxis:Ue-Te-Pe-D.mainAxis,Fe=C?-T[k]/2+_e+Te+st+D.mainAxis:xe+Te+st+D.mainAxis,lt=e.elements.arrow&&ye(e.elements.arrow),zt=lt?c==="y"?lt.clientTop||0:lt.clientLeft||0:0,_t=(V=M==null?void 0:M[c])!=null?V:0,Gt=U+at-_t-zt,Yt=U+Fe-_t,xt=Xe(d?ze(I,Gt):I,U,d?ve($,Yt):$);b[c]=xt,N[c]=xt-U}if(s){var kt,Xt=c==="x"?j:K,Jt=c==="x"?X:G,Se=b[E],We=E==="y"?"height":"width",Ct=Se+w[Xt],je=Se-w[Jt],Et=[j,K].indexOf(g)!==-1,Qt=(kt=M==null?void 0:M[E])!=null?kt:0,Zt=Et?Ct:Se-T[We]-A[We]-Qt+D.altAxis,en=Et?Se+T[We]+A[We]-Qt-D.altAxis:je,tn=d&&Et?ii(Zt,Se,en):Xe(d?Zt:Ct,Se,d?en:je);b[E]=tn,N[E]=tn-Se}e.modifiersData[r]=N}}var hi={name:"preventOverflow",enabled:!0,phase:"main",fn:ys,requiresIfExists:["offset"]};function rr(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ir(t){return t===B(t)||!J(t)?Je(t):rr(t)}function ws(t){var e=t.getBoundingClientRect(),n=Oe(e.width)/t.offsetWidth||1,r=Oe(e.height)/t.offsetHeight||1;return n!==1||r!==1}function or(t,e,n){n===void 0&&(n=!1);var r=J(e),i=J(e)&&ws(e),o=te(e),a=ue(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Z(e)!=="body"||Ze(o))&&(s=ir(e)),J(e)?(l=ue(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Qe(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function bs(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function sr(t){var e=bs(t);return ni.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function ar(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function lr(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var vi={placement:"bottom",modifiers:[],strategy:"absolute"};function yi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function wi(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?vi:i;return function(s,l,p){p===void 0&&(p=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},vi,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},u=[],h=!1,d={state:f,setOptions:function(g){var _=typeof g=="function"?g(f.options):g;v(),f.options=Object.assign({},o,f.options,_),f.scrollParents={reference:ce(s)?Ve(s):s.contextElement?Ve(s.contextElement):[],popper:Ve(l)};var C=sr(lr([].concat(r,f.options.modifiers)));return f.orderedModifiers=C.filter(function(c){return c.enabled}),y(),d.update()},forceUpdate:function(){if(!h){var g=f.elements,_=g.reference,C=g.popper;if(yi(_,C)){f.rects={reference:or(_,ye(C),f.options.strategy==="fixed"),popper:Ge(C)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(D){return f.modifiersData[D.name]=Object.assign({},D.data)});for(var c=0;c<f.orderedModifiers.length;c++){if(f.reset===!0){f.reset=!1,c=-1;continue}var E=f.orderedModifiers[c],b=E.fn,T=E.options,A=T===void 0?{}:T,R=E.name;typeof b=="function"&&(f=b({state:f,options:A,name:R,instance:d})||f)}}}},update:ar(function(){return new Promise(function(w){d.forceUpdate(),w(f)})}),destroy:function(){v(),h=!0}};if(!yi(s,l))return d;d.setOptions(p).then(function(w){!h&&p.onFirstUpdate&&p.onFirstUpdate(w)});function y(){f.orderedModifiers.forEach(function(w){var g=w.name,_=w.options,C=_===void 0?{}:_,c=w.effect;if(typeof c=="function"){var E=c({state:f,name:g,instance:d,options:C}),b=function(){};u.push(E||b)}})}function v(){u.forEach(function(w){return w()}),u=[]}return d}}var _s=[li,gi,ai,It,mi,ci,hi,oi,di],pr=wi({defaultModifiers:_s});var xs="tippy-box",Li="tippy-content",ks="tippy-backdrop",Ii="tippy-arrow",Mi="tippy-svg-arrow",et={passive:!0,capture:!0},Oi=function(){return document.body};function cr(t,e,n){if(Array.isArray(t)){var r=t[e];return r==null?Array.isArray(n)?n[e]:n:r}return t}function gr(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Di(t,e){return typeof t=="function"?t.apply(void 0,e):t}function bi(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function Cs(t){return t.split(/\s+/).filter(Boolean)}function bt(t){return[].concat(t)}function _i(t,e){t.indexOf(e)===-1&&t.push(e)}function Es(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Ps(t){return t.split("-")[0]}function En(t){return[].slice.call(t)}function xi(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Ft(){return document.createElement("div")}function Pn(t){return["Element","Fragment"].some(function(e){return gr(t,e)})}function Ts(t){return gr(t,"NodeList")}function Ss(t){return gr(t,"MouseEvent")}function Ni(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Ls(t){return Pn(t)?[t]:Ts(t)?En(t):Array.isArray(t)?t:En(document.querySelectorAll(t))}function ur(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function ki(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Is(t){var e,n=bt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Ms(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,a=i.popperState,s=i.props,l=s.interactiveBorder,p=Ps(a.placement),f=a.modifiersData.offset;if(!f)return!0;var u=p==="bottom"?f.top.y:0,h=p==="top"?f.bottom.y:0,d=p==="right"?f.left.x:0,y=p==="left"?f.right.x:0,v=o.top-r+u>l,w=r-o.bottom-h>l,g=o.left-n+d>l,_=n-o.right-y>l;return v||w||g||_})}function fr(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function Ci(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Ce={isTouch:!1},Ei=0;function Os(){Ce.isTouch||(Ce.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ri))}function Ri(){var t=performance.now();t-Ei<20&&(Ce.isTouch=!1,document.removeEventListener("mousemove",Ri)),Ei=t}function Ds(){var t=document.activeElement;if(Ni(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Ns(){document.addEventListener("touchstart",Os,et),window.addEventListener("blur",Ds)}var Rs=typeof window!="undefined"&&typeof document!="undefined",As=Rs?!!window.msCrypto:!1;var Fs={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ws={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},be=Object.assign({appendTo:Oi,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Fs,Ws),Hs=Object.keys(be),Vs=function(e){var n=Object.keys(e);n.forEach(function(r){be[r]=e[r]})};function Ai(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,a=i.defaultValue;if(o){var s;r[o]=t[o]!==void 0?t[o]:(s=be[o])!=null?s:a}return r},{});return Object.assign({},t,n)}function Us(t,e){var n=e?Object.keys(Ai(Object.assign({},be,{plugins:e}))):Hs,r=n.reduce(function(i,o){var a=(t.getAttribute("data-tippy-"+o)||"").trim();if(!a)return i;if(o==="content")i[o]=a;else try{i[o]=JSON.parse(a)}catch(s){i[o]=a}return i},{});return r}function Pi(t,e){var n=Object.assign({},e,{content:Di(e.content,[t])},e.ignoreAttributes?{}:Us(t,e.plugins));return n.aria=Object.assign({},be.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Bs=function(){return"innerHTML"};function dr(t,e){t[Bs()]=e}function Ti(t){var e=Ft();return t===!0?e.className=Ii:(e.className=Mi,Pn(t)?e.appendChild(t):dr(e,t)),e}function Si(t,e){Pn(e.content)?(dr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?dr(t,e.content):t.textContent=e.content)}function mr(t){var e=t.firstElementChild,n=En(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Li)}),arrow:n.find(function(r){return r.classList.contains(Ii)||r.classList.contains(Mi)}),backdrop:n.find(function(r){return r.classList.contains(ks)})}}function Fi(t){var e=Ft(),n=Ft();n.className=xs,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Ft();r.className=Li,r.setAttribute("data-state","hidden"),Si(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,a){var s=mr(e),l=s.box,p=s.content,f=s.arrow;a.theme?l.setAttribute("data-theme",a.theme):l.removeAttribute("data-theme"),typeof a.animation=="string"?l.setAttribute("data-animation",a.animation):l.removeAttribute("data-animation"),a.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?l.setAttribute("role",a.role):l.removeAttribute("role"),(o.content!==a.content||o.allowHTML!==a.allowHTML)&&Si(p,t.props),a.arrow?f?o.arrow!==a.arrow&&(l.removeChild(f),l.appendChild(Ti(a.arrow))):l.appendChild(Ti(a.arrow)):f&&l.removeChild(f)}return{popper:e,onUpdate:i}}Fi.$$tippy=!0;var js=1,kn=[],Cn=[];function $s(t,e){var n=Pi(t,Object.assign({},be,Ai(xi(e)))),r,i,o,a=!1,s=!1,l=!1,p=!1,f,u,h,d=[],y=bi(Gt,n.interactiveDebounce),v,w=js++,g=null,_=Es(n.plugins),C={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},c={id:w,reference:t,popper:Ft(),popperInstance:g,props:n,state:C,plugins:_,clearDelayTimeouts:Zt,setProps:en,setContent:tn,show:bo,hide:_o,hideWithInteractivity:xo,enable:Et,disable:Qt,unmount:ko,destroy:Co};if(!n.render)return c;var E=n.render(c),b=E.popper,T=E.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+c.id,c.popper=b,t._tippy=c,b._tippy=c;var A=_.map(function(m){return m.fn(c)}),R=t.hasAttribute("aria-expanded");return lt(),_e(),U(),I("onCreate",[c]),n.showOnCreate&&Ct(),b.addEventListener("mouseenter",function(){c.props.interactive&&c.state.isVisible&&c.clearDelayTimeouts()}),b.addEventListener("mouseleave",function(){c.props.interactive&&c.props.trigger.indexOf("mouseenter")>=0&&ne().addEventListener("mousemove",y)}),c;function D(){var m=c.props.touch;return Array.isArray(m)?m:[m,0]}function M(){return D()[0]==="hold"}function N(){var m;return!!((m=c.props.render)!=null&&m.$$tippy)}function V(){return v||t}function ne(){var m=V().parentNode;return m?Is(m):document}function F(){return mr(b)}function k(m){return c.state.isMounted&&!c.state.isVisible||Ce.isTouch||f&&f.type==="focus"?0:cr(c.props.delay,m?0:1,be.delay)}function U(m){m===void 0&&(m=!1),b.style.pointerEvents=c.props.interactive&&!m?"":"none",b.style.zIndex=""+c.props.zIndex}function I(m,x,P){if(P===void 0&&(P=!0),A.forEach(function(O){O[m]&&O[m].apply(O,x)}),P){var W;(W=c.props)[m].apply(W,x)}}function $(){var m=c.props.aria;if(m.content){var x="aria-"+m.content,P=b.id,W=bt(c.props.triggerTarget||t);W.forEach(function(O){var re=O.getAttribute(x);if(c.state.isVisible)O.setAttribute(x,re?re+" "+P:P);else{var le=re&&re.replace(P,"").trim();le?O.setAttribute(x,le):O.removeAttribute(x)}})}}function _e(){if(!(R||!c.props.aria.expanded)){var m=bt(c.props.triggerTarget||t);m.forEach(function(x){c.props.interactive?x.setAttribute("aria-expanded",c.state.isVisible&&x===V()?"true":"false"):x.removeAttribute("aria-expanded")})}}function Ue(){ne().removeEventListener("mousemove",y),kn=kn.filter(function(m){return m!==y})}function xe(m){if(!(Ce.isTouch&&(l||m.type==="mousedown"))){var x=m.composedPath&&m.composedPath()[0]||m.target;if(!(c.props.interactive&&Ci(b,x))){if(bt(c.props.triggerTarget||t).some(function(P){return Ci(P,x)})){if(Ce.isTouch||c.state.isVisible&&c.props.trigger.indexOf("click")>=0)return}else I("onClickOutside",[c,m]);c.props.hideOnClick===!0&&(c.clearDelayTimeouts(),c.hide(),s=!0,setTimeout(function(){s=!1}),c.state.isMounted||Pe())}}}function Be(){l=!0}function Ee(){l=!1}function he(){var m=ne();m.addEventListener("mousedown",xe,!0),m.addEventListener("touchend",xe,et),m.addEventListener("touchstart",Ee,et),m.addEventListener("touchmove",Be,et)}function Pe(){var m=ne();m.removeEventListener("mousedown",xe,!0),m.removeEventListener("touchend",xe,et),m.removeEventListener("touchstart",Ee,et),m.removeEventListener("touchmove",Be,et)}function st(m,x){at(m,function(){!c.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&x()})}function Te(m,x){at(m,x)}function at(m,x){var P=F().box;function W(O){O.target===P&&(fr(P,"remove",W),x())}if(m===0)return x();fr(P,"remove",u),fr(P,"add",W),u=W}function Fe(m,x,P){P===void 0&&(P=!1);var W=bt(c.props.triggerTarget||t);W.forEach(function(O){O.addEventListener(m,x,P),d.push({node:O,eventType:m,handler:x,options:P})})}function lt(){M()&&(Fe("touchstart",_t,{passive:!0}),Fe("touchend",Yt,{passive:!0})),Cs(c.props.trigger).forEach(function(m){if(m!=="manual")switch(Fe(m,_t),m){case"mouseenter":Fe("mouseleave",Yt);break;case"focus":Fe(As?"focusout":"blur",xt);break;case"focusin":Fe("focusout",xt);break}})}function zt(){d.forEach(function(m){var x=m.node,P=m.eventType,W=m.handler,O=m.options;x.removeEventListener(P,W,O)}),d=[]}function _t(m){var x,P=!1;if(!(!c.state.isEnabled||kt(m)||s)){var W=((x=f)==null?void 0:x.type)==="focus";f=m,v=m.currentTarget,_e(),!c.state.isVisible&&Ss(m)&&kn.forEach(function(O){return O(m)}),m.type==="click"&&(c.props.trigger.indexOf("mouseenter")<0||a)&&c.props.hideOnClick!==!1&&c.state.isVisible?P=!0:Ct(m),m.type==="click"&&(a=!P),P&&!W&&je(m)}}function Gt(m){var x=m.target,P=V().contains(x)||b.contains(x);if(!(m.type==="mousemove"&&P)){var W=We().concat(b).map(function(O){var re,le=O._tippy,pt=(re=le.popperInstance)==null?void 0:re.state;return pt?{popperRect:O.getBoundingClientRect(),popperState:pt,props:n}:null}).filter(Boolean);Ms(W,m)&&(Ue(),je(m))}}function Yt(m){var x=kt(m)||c.props.trigger.indexOf("click")>=0&&a;if(!x){if(c.props.interactive){c.hideWithInteractivity(m);return}je(m)}}function xt(m){c.props.trigger.indexOf("focusin")<0&&m.target!==V()||c.props.interactive&&m.relatedTarget&&b.contains(m.relatedTarget)||je(m)}function kt(m){return Ce.isTouch?M()!==m.type.indexOf("touch")>=0:!1}function Xt(){Jt();var m=c.props,x=m.popperOptions,P=m.placement,W=m.offset,O=m.getReferenceClientRect,re=m.moveTransition,le=N()?mr(b).arrow:null,pt=O?{getBoundingClientRect:O,contextElement:O.contextElement||V()}:t,Pr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(nn){var ct=nn.state;if(N()){var Eo=F(),Wn=Eo.box;["placement","reference-hidden","escaped"].forEach(function(rn){rn==="placement"?Wn.setAttribute("data-placement",ct.placement):ct.attributes.popper["data-popper-"+rn]?Wn.setAttribute("data-"+rn,""):Wn.removeAttribute("data-"+rn)}),ct.attributes.popper={}}}},$e=[{name:"offset",options:{offset:W}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!re}},Pr];N()&&le&&$e.push({name:"arrow",options:{element:le,padding:3}}),$e.push.apply($e,(x==null?void 0:x.modifiers)||[]),c.popperInstance=pr(pt,b,Object.assign({},x,{placement:P,onFirstUpdate:h,modifiers:$e}))}function Jt(){c.popperInstance&&(c.popperInstance.destroy(),c.popperInstance=null)}function Se(){var m=c.props.appendTo,x,P=V();c.props.interactive&&m===Oi||m==="parent"?x=P.parentNode:x=Di(m,[P]),x.contains(b)||x.appendChild(b),c.state.isMounted=!0,Xt()}function We(){return En(b.querySelectorAll("[data-tippy-root]"))}function Ct(m){c.clearDelayTimeouts(),m&&I("onTrigger",[c,m]),he();var x=k(!0),P=D(),W=P[0],O=P[1];Ce.isTouch&&W==="hold"&&O&&(x=O),x?r=setTimeout(function(){c.show()},x):c.show()}function je(m){if(c.clearDelayTimeouts(),I("onUntrigger",[c,m]),!c.state.isVisible){Pe();return}if(!(c.props.trigger.indexOf("mouseenter")>=0&&c.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(m.type)>=0&&a)){var x=k(!1);x?i=setTimeout(function(){c.state.isVisible&&c.hide()},x):o=requestAnimationFrame(function(){c.hide()})}}function Et(){c.state.isEnabled=!0}function Qt(){c.hide(),c.state.isEnabled=!1}function Zt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function en(m){if(!c.state.isDestroyed){I("onBeforeUpdate",[c,m]),zt();var x=c.props,P=Pi(t,Object.assign({},x,xi(m),{ignoreAttributes:!0}));c.props=P,lt(),x.interactiveDebounce!==P.interactiveDebounce&&(Ue(),y=bi(Gt,P.interactiveDebounce)),x.triggerTarget&&!P.triggerTarget?bt(x.triggerTarget).forEach(function(W){W.removeAttribute("aria-expanded")}):P.triggerTarget&&t.removeAttribute("aria-expanded"),_e(),U(),T&&T(x,P),c.popperInstance&&(Xt(),We().forEach(function(W){requestAnimationFrame(W._tippy.popperInstance.forceUpdate)})),I("onAfterUpdate",[c,m])}}function tn(m){c.setProps({content:m})}function bo(){var m=c.state.isVisible,x=c.state.isDestroyed,P=!c.state.isEnabled,W=Ce.isTouch&&!c.props.touch,O=cr(c.props.duration,0,be.duration);if(!(m||x||P||W)&&!V().hasAttribute("disabled")&&(I("onShow",[c],!1),c.props.onShow(c)!==!1)){if(c.state.isVisible=!0,N()&&(b.style.visibility="visible"),U(),he(),c.state.isMounted||(b.style.transition="none"),N()){var re=F(),le=re.box,pt=re.content;ur([le,pt],0)}h=function(){var $e;if(!(!c.state.isVisible||p)){if(p=!0,b.offsetHeight,b.style.transition=c.props.moveTransition,N()&&c.props.animation){var Fn=F(),nn=Fn.box,ct=Fn.content;ur([nn,ct],O),ki([nn,ct],"visible")}$(),_e(),_i(Cn,c),($e=c.popperInstance)==null||$e.forceUpdate(),I("onMount",[c]),c.props.animation&&N()&&Te(O,function(){c.state.isShown=!0,I("onShown",[c])})}},Se()}}function _o(){var m=!c.state.isVisible,x=c.state.isDestroyed,P=!c.state.isEnabled,W=cr(c.props.duration,1,be.duration);if(!(m||x||P)&&(I("onHide",[c],!1),c.props.onHide(c)!==!1)){if(c.state.isVisible=!1,c.state.isShown=!1,p=!1,a=!1,N()&&(b.style.visibility="hidden"),Ue(),Pe(),U(!0),N()){var O=F(),re=O.box,le=O.content;c.props.animation&&(ur([re,le],W),ki([re,le],"hidden"))}$(),_e(),c.props.animation?N()&&st(W,c.unmount):c.unmount()}}function xo(m){ne().addEventListener("mousemove",y),_i(kn,y),y(m)}function ko(){c.state.isVisible&&c.hide(),c.state.isMounted&&(Jt(),We().forEach(function(m){m._tippy.unmount()}),b.parentNode&&b.parentNode.removeChild(b),Cn=Cn.filter(function(m){return m!==c}),c.state.isMounted=!1,I("onHidden",[c]))}function Co(){c.state.isDestroyed||(c.clearDelayTimeouts(),c.unmount(),zt(),delete t._tippy,c.state.isDestroyed=!0,I("onDestroy",[c]))}}function Wt(t,e){e===void 0&&(e={});var n=be.plugins.concat(e.plugins||[]);Ns();var r=Object.assign({},e,{plugins:n}),i=Ls(t);if(0)var o,a;var s=i.reduce(function(l,p){var f=p&&$s(p,r);return f&&l.push(f),l},[]);return Pn(t)?s[0]:s}Wt.defaultProps=be;Wt.setDefaultProps=Vs;Wt.currentInput=Ce;var Wi=function(e){var n=e===void 0?{}:e,r=n.exclude,i=n.duration;Cn.forEach(function(o){var a=!1;if(r&&(a=Ni(r)?o.reference===r:o.popper===r.popper),!a){var s=o.props.duration;o.setProps({duration:i}),o.hide(),o.state.isDestroyed||o.setProps({duration:s})}})},Tu=Object.assign({},It,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Wt.setDefaultProps({render:Fi});var Tn=Wt;var Hi=()=>L("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-more-horizontal",children:[L("title",{children:"More details icon"}),L("circle",{cx:"12",cy:"12",r:"1"}),L("circle",{cx:"19",cy:"12",r:"1"}),L("circle",{cx:"5",cy:"12",r:"1"})]});var Ht,z,hr,Vi,Ln=0,Gi=[],Y=H,Ui=Y.__b,Bi=Y.__r,ji=Y.diffed,$i=Y.__c,qi=Y.unmount,Ki=Y.__;function yr(t,e){Y.__h&&Y.__h(z,t,Ln||e),Ln=0;var n=z.__H||(z.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Yi(t){return Ln=1,qs(Zi,t)}function qs(t,e,n){var r=yr(Ht++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):Zi(void 0,e),function(s){var l=r.__N?r.__N[0]:r.__[0],p=r.t(l,s);l!==p&&(r.__N=[p,r.__[1]],r.__c.setState({}))}],r.__c=z,!z.__f)){var i=function(s,l,p){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(h){return!!h.__c});if(f.every(function(h){return!h.__N}))return!o||o.call(this,s,l,p);var u=r.__c.props!==s;return f.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(u=!0)}}),o&&o.call(this,s,l,p)||u};z.__f=!0;var o=z.shouldComponentUpdate,a=z.componentWillUpdate;z.componentWillUpdate=function(s,l,p){if(this.__e){var f=o;o=void 0,i(s,l,p),o=f}a&&a.call(this,s,l,p)},z.shouldComponentUpdate=i}return r.__N||r.__}function Xi(t,e){var n=yr(Ht++,3);!Y.__s&&Qi(n.__H,e)&&(n.__=t,n.u=e,z.__H.__h.push(n))}function Ji(t){return Ln=5,Ks(function(){return{current:t}},[])}function Ks(t,e){var n=yr(Ht++,7);return Qi(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function zs(){for(var t;t=Gi.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Sn),t.__H.__h.forEach(vr),t.__H.__h=[]}catch(e){t.__H.__h=[],Y.__e(e,t.__v)}}Y.__b=function(t){z=null,Ui&&Ui(t)},Y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ki&&Ki(t,e)},Y.__r=function(t){Bi&&Bi(t),Ht=0;var e=(z=t.__c).__H;e&&(hr===z?(e.__h=[],z.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Sn),e.__h.forEach(vr),e.__h=[],Ht=0)),hr=z},Y.diffed=function(t){ji&&ji(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Gi.push(e)!==1&&Vi===Y.requestAnimationFrame||((Vi=Y.requestAnimationFrame)||Gs)(zs)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),hr=z=null},Y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Sn),n.__h=n.__h.filter(function(r){return!r.__||vr(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Y.__e(r,n.__v)}}),$i&&$i(t,e)},Y.unmount=function(t){qi&&qi(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Sn(r)}catch(i){e=i}}),n.__H=void 0,e&&Y.__e(e,n.__v))};var zi=typeof requestAnimationFrame=="function";function Gs(t){var e,n=function(){clearTimeout(r),zi&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);zi&&(e=requestAnimationFrame(n))}function Sn(t){var e=z,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),z=e}function vr(t){var e=z;t.__c=t.__(),z=e}function Qi(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function Zi(t,e){return typeof e=="function"?e(t):e}var eo={"name-asc":{label:"Name",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-a-z"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><path d="M20 8h-5"/><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"/><path d="M15 14h5l-5 6h5"/></svg>'},"name-desc":{label:"Name",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-z-a"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M15 4h5l-5 6h5"/><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"/><path d="M20 18h-5"/></svg>'},"mtime-asc":{label:"Date",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-0-1"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><rect x="15" y="4" width="4" height="6" ry="2"/><path d="M17 20v-6h-2"/><path d="M15 20h4"/></svg>'},"mtime-desc":{label:"Date",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-1-0"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M17 10V4h-2"/><path d="M15 10h4"/><rect x="15" y="14" width="4" height="6" ry="2"/></svg>'}},to=({plugin:t,onChange:e})=>{let[n,r]=Yi(!1),i=Ji(null),o=()=>{r(!n)},a=async s=>{r(!1),t.settings.sortOptionDefault=s,await t.saveSettings(),e()};return Xi(()=>{let s=l=>{i.current&&!i.current.contains(l.target)&&r(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),L("div",{className:"snw-sort-dropdown-wrapper",ref:i,children:[L("button",{type:"button",onClick:o,class:"snw-sort-dropdown-button",children:L("div",{dangerouslySetInnerHTML:{__html:eo[t.settings.sortOptionDefault].icon}})}),n&&L("ul",{className:"snw-sort-dropdown-list",children:Object.entries(eo).map(([s,{label:l,icon:p}])=>L("li",{id:s,onClick:async f=>{f.stopPropagation(),await a(s)},class:"snw-sort-dropdown-list-item",children:[L("span",{dangerouslySetInnerHTML:{__html:p}}),L("span",{className:"snw-sort-dropdown-list-item-label",children:l})]}))})]})};var no=(t,e,n,r,i,o,a,s,l)=>{let p=L("div",{className:`${a?"snw-ref-title-popover":"snw-ref-title-side-pane"} tree-item-self is-clickable`,children:[L("div",{className:"snw-ref-title-popover-label","snw-ref-title-type":t,"snw-ref-title-reallink":e,"snw-ref-title-key":n,"snw-data-file-name":r,"snw-data-line-number":o.toString(),children:e}),L(to,{plugin:s,onChange:l}),a&&L("span",{className:"snw-ref-title-popover-open-sidepane-icon","snw-ref-title-type":t,"snw-ref-title-reallink":e,"snw-ref-title-key":n,"snw-data-file-name":r,"snw-data-line-number":o.toString(),children:L("span",{className:"snw-ref-title-popover-icon",onClick:u=>{u.stopPropagation(),Wi({duration:0}),s.activateViewFromRef(t,e,n,r,Number(o))},children:L(Hi,{})})})]}),f=createDiv();return ke(p,f),f};var tt;function oo(t){tt=t}var wr=async(t,e,n,r,i,o)=>{let a=await ro(t,n,r),s=createDiv();s.append(no(t,e,n,r,a.refCount,i,o,tt,async()=>{let p=s.querySelector(".snw-ref-area");if(p){for(p.style.visibility="hidden";p.firstChild;)p.removeChild(p.firstChild);p.style.visibility="visible";let f=await ro(t,n,r);p.prepend(f.response),setTimeout(async()=>{await In(!1,p)},500)}}));let l=createDiv({cls:"snw-ref-area"});return l.append(a.response),s.append(l),s},Ys=(t,e)=>t.sort((n,r)=>{let i=n.sourceFile,o=r.sourceFile;switch(e){case"name-asc":return i==null?void 0:i.basename.localeCompare(o==null?void 0:o.basename);case"name-desc":return o==null?void 0:o.basename.localeCompare(i==null?void 0:i.basename);case"mtime-asc":return(i==null?void 0:i.stat.mtime)-(o==null?void 0:o.stat.mtime);case"mtime-desc":return(o==null?void 0:o.stat.mtime)-(i==null?void 0:i.stat.mtime);default:return 0}}),ro=async(t,e,n)=>{var u,h,d;let r=0,i=null;if(t==="File"){let y=Le(),v=[];for(let w of y.values())for(let g of w)g!=null&&g.resolvedFile&&((u=g==null?void 0:g.resolvedFile)==null?void 0:u.path)===n&&v.push(g);r=v.length,i=v}else{let y=Le().get(e);y===void 0&&(y=Le().get(e));let v=await Xs(y);r=v.length,i=v}let o=Array.from(new Set(i.map(y=>{var v;return(v=y.sourceFile)==null?void 0:v.path}))).map(y=>i.find(v=>{var w;return((w=v.sourceFile)==null?void 0:w.path)===y})),a=Ys(o,tt.settings.sortOptionDefault),s=createDiv(),l=tt.settings.maxFileCountToDisplay;r<l&&(l=r);let p=0,f=null;tt.settings.displayCustomPropertyList.trim()!==""&&(f=tt.settings.displayCustomPropertyList.split(",").map(y=>y.trim()));for(let y=0;y<a.length;y++){if(p>l)continue;let v=a[y],w=createDiv();w.addClass("snw-ref-item-container"),w.addClass("tree-item"),s.appendChild(w);let g=createDiv();g.addClass("snw-ref-item-file"),g.addClass("tree-item-self"),g.addClass("search-result-file-title"),g.addClass("is-clickable"),g.setAttribute("snw-data-line-number","-1"),g.setAttribute("snw-data-file-name",v.sourceFile.path),g.setAttribute("data-href",v.sourceFile.path),g.setAttribute("href",v.sourceFile.path);let _=createDiv();_.addClass("snw-ref-item-file-icon"),_.addClass("tree-item-icon"),_.addClass("collapse-icon"),(0,io.setIcon)(_,"file-box");let C=createDiv();if(C.addClass("snw-ref-item-file-label"),C.addClass("tree-item-inner"),C.innerText=v.sourceFile.basename,g.append(_),g.append(C),w.appendChild(g),f!=null){let E=v.sourceFile?tt.app.metadataCache.getFileCache(v.sourceFile):null;f.forEach(b=>{var A;let T=(A=E==null?void 0:E.frontmatter)==null?void 0:A[b];if(T){let R=L("div",{class:"snw-custom-property-container",children:[L("span",{class:"snw-custom-property-name",children:b}),L("span",{class:"snw-custom-property-text",children:[": ",T]})]}),D=createDiv();ke(R,D),C.append(D)}})}let c=createDiv();c.addClass("snw-ref-item-collection-items"),c.addClass("search-result-file-matches"),w.appendChild(c);for(let E of i)((h=v.sourceFile)==null?void 0:h.path)===((d=E.sourceFile)==null?void 0:d.path)&&p<l&&(p+=1,c.appendChild(await Zr(E)))}return{response:s,refCount:r}},Xs=async t=>t.sort((e,n)=>{var o;let r=0;e.reference.position!==void 0&&(r=Number(e.reference.position.start.line));let i=0;return n.reference.position!==void 0&&(i=Number(n.reference.position.start.line)),((o=e.sourceFile)==null?void 0:o.basename.localeCompare(n.sourceFile.basename))||Number(r)-Number(i)});var nt;function so(t){nt=t,Qr(nt)}var Mn=async t=>{let{refType:e,realLink:n,key:r,filePath:i,lineNu:o}=await Js(t),a=createDiv();a.addClass("snw-popover-container"),a.addClass("search-result-container"),a.appendChild(await wr(e,n,r,i,o,!0)),t.setContent(a),setTimeout(async()=>{await In(!1,a)},500),gn(a)},ao=async(t,e,n,r,i)=>{let o=createDiv();return o.addClass("snw-sidepane-container"),o.addClass("search-result-container"),o.append(await wr(t,e,n,r,i,!1)),setTimeout(async()=>{await In(!1,o)},500),o},In=async(t,e)=>{e.querySelectorAll(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-popover-label").forEach(r=>{r.getAttribute("snw-has-handler")||(r.setAttribute("snw-has-handler","true"),r.addEventListener("click",async i=>{var f,u;i.preventDefault();let o=i.target.closest(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-popover-label");if(!o)return;let a=Number(o.getAttribute("snw-data-line-number")),s=o.getAttribute("snw-data-file-name"),l=app.metadataCache.getFirstLinkpathDest(s,s);if(!l){new rt.Notice(`File not found: ${s}. It may be a broken link.`);return}nt.app.workspace.getLeaf(rt.Keymap.isModEvent(i)).openFile(l);let p=o.getAttribute("snw-ref-title-key");if(p){if(p.contains("#^")){let h=Object.entries((f=nt.app.metadataCache.getFileCache(l))==null?void 0:f.blocks);if(h){let d=p.match(/#\^(.+)$/g)[0].replace("#^","").toLowerCase();a=h.find(v=>v[0]===d)[1].position.start.line}}else if(p.contains("#")){let h=(u=nt.app.metadataCache.getFileCache(l))==null?void 0:u.headings;if(h){let d=p.match(/#(.+)/g)[0].replace("#","");a=h.find(v=>v.heading.toLocaleUpperCase()===d).position.start.line}}}a>0&&setTimeout(()=>{try{let h=nt.app.workspace.getActiveViewOfType(rt.MarkdownView);h&&h.setEphemeralState({line:a})}catch(h){}},400)}),nt.app.internalPlugins.plugins["page-preview"].enabled===!0&&r.addEventListener("mouseover",i=>{i.preventDefault();let o=app.internalPlugins.plugins["page-preview"].instance.overrides["obsidian42-strange-new-worlds"]!==!1;if(o===!1||o===!0&&rt.Keymap.isModifier(i,"Mod")){let a=i.target,s={scroll:Number(a.getAttribute("snw-data-line-number"))},l=a.getAttribute("snw-data-file-name");l&&app.workspace.trigger("link-hover",{},a,l,"",s)}}))})},Js=async t=>{let e=t.reference,n=e.getAttribute("data-snw-type")||"",r=e.getAttribute("data-snw-reallink")||"",i=e.getAttribute("data-snw-key")||"",o=e.getAttribute("data-snw-filepath")||"",a=Number(e.getAttribute("snw-data-line-number"))||0;return{refType:n,realLink:r,key:i,filePath:o,lineNu:a}};var Ne="Strange New Worlds",On=class extends lo.ItemView{constructor(e,n){super(e),this.plugin=n}getViewType(){return Ne}getDisplayText(){return Ne}getIcon(){return"file-digit"}async onOpen(){ke(L("div",{class:"snw-sidepane-loading",children:[L("div",{class:"snw-sidepane-loading-banner",children:"Discovering Strange New Worlds..."}),L("div",{class:"snw-sidepane-loading-subtext",children:"Click a reference counter in the main document for information to appear here."})]}),this.containerEl.querySelector(".view-content"))}async updateView(){let e=this.plugin;this.containerEl.replaceChildren(await ao(e.lastSelectedReferenceType,e.lastSelectedReferenceRealLink,e.lastSelectedReferenceKey,e.lastSelectedReferenceFilePath,e.lastSelectedLineNumber)),gn(this.containerEl)}async onClose(){}};var Bt=require("obsidian");var Vt=require("obsidian");var Ut;function po(t){Ut=t}function de(t,e,n,r,i,o,a){let s=L("div",{className:`snw-reference snw-${e} ${o}`,"data-snw-type":e,"data-snw-reallink":n,"data-snw-key":r.toLocaleUpperCase(),"data-snw-filepath":i,"snw-data-line-number":a.toString(),children:t.toString()}),l=createDiv();ke(s,l);let p=l.firstElementChild;(Vt.Platform.isDesktop||Vt.Platform.isDesktopApp)&&(p.onclick=async d=>Dn(d.target));let f=Ut.settings.requireModifierKeyToActivateSNWView,u=!0;return Tn(p,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onTrigger(d,y){let v=y;f!==!1&&(v.ctrlKey||v.metaKey?u=!0:u=!1)},onShow(d){if(!u)return!1;setTimeout(async()=>{await Mn(d)},1)}}).popper.classList.add("snw-tippy"),l}var Dn=async t=>{var a,s,l,p,f;let e=(a=t.getAttribute("data-snw-type"))!=null?a:"",n=(s=t.getAttribute("data-snw-realLink"))!=null?s:"",r=(l=t.getAttribute("data-snw-key"))!=null?l:"",i=(p=t.getAttribute("data-snw-filepath"))!=null?p:"",o=(f=t.getAttribute("snw-data-line-number"))!=null?f:"";Ut.activateViewFromRef(e,n,r,i,Number(o))},br=(0,Vt.debounce)(()=>{var e,n;let t=document.querySelectorAll(".snw-liveupdate");for(let r of Array.from(t)){let i=(n=(e=Ut.snwAPI.references.get(r.dataset.snwKey))==null?void 0:e.length)!=null?n:0;if(i<Ut.settings.minimumRefCountThreshold){r.remove();continue}let o=String(i);r.textContent!==o&&(r.textContent=o)}},it,!0);var ot;function uo(t){ot=t}function Qs(){ot.app.workspace.iterateAllLeaves(t=>{(t.view.getViewType()==="markdown"||t.view.getViewType()==="file-properties")&&Zs(t.view)})}var Nn=(0,Bt.debounce)(()=>{Qs()},it,!0);function Zs(t){var i,o,a;if(!ot.showCountsActive)return;let e=Bt.Platform.isMobile||Bt.Platform.isMobileApp?ot.settings.displayPropertyReferencesMobile:ot.settings.displayPropertyReferences,n=t;if(!e||!(n!=null&&n.rawFrontmatter))return;let r=n.file?pe(n.file):{};if((i=r.frontmatterLinks)!=null&&i.length)for(let s of n.metadataEditor.rendered){let l=s.valueEl.querySelector(".metadata-link-inner.internal-link");if(l){let f=l.textContent,u=(o=r.frontmatterLinks)==null?void 0:o.find(h=>h.displayText===f);u&&co(l,u)}let p=s.valueEl.querySelectorAll(".multi-select-pill.internal-link .multi-select-pill-content span");if(p.length)for(let f of Array.from(p)){let u=f.textContent,h=(a=r.frontmatterLinks)==null?void 0:a.find(y=>y.displayText===u),d=f.parentElement;h&&d&&co(d,h)}}}function co(t,e){var i,o,a,s;let n=(i=t.parentElement)==null?void 0:i.querySelector(".snw-frontmatter-wrapper"),r=e.references.length;if(!n&&r>=ot.settings.minimumRefCountThreshold){n=createSpan({cls:"snw-frontmatter-wrapper"});let l=de(r,"link",e.references[0].realLink,e.key,(s=(a=(o=e.references[0])==null?void 0:o.resolvedFile)==null?void 0:a.path)!=null?s:"","snw-frontmatter-count",e.pos.start.line);n.appendChild(l),t.insertAdjacentElement("afterend",n)}else try{if(r>=ot.settings.minimumRefCountThreshold){let l=n==null?void 0:n.querySelector(".snw-frontmatter-count");l&&(l.innerText=` ${r} `)}else n==null||n.remove()}catch(l){}}var $t=require("obsidian");var jt;function fo(t){jt=t}function ea(){!jt.settings.displayIncomingFilesheader||!jt.showCountsActive||jt.app.workspace.iterateAllLeaves(t=>{t.view.getViewType()==="markdown"&&ta(t.view)})}var Rn=(0,$t.debounce)(()=>{ea()},it,!0);function ta(t){var f,u,h;let e=t.file;if(!e)return;let n=Le(),r=0;for(let d of n.values())for(let y of d)y!=null&&y.resolvedFile&&((f=y==null?void 0:y.resolvedFile)==null?void 0:f.path)===e.path&&r++;let i=pe(e);if(((h=(u=i==null?void 0:i.cacheMetaData)==null?void 0:u.frontmatter)==null?void 0:h["snw-file-exclude"])===!0&&(r=0),r<1){let d=t.contentEl.querySelector(".snw-header-count-wrapper");d&&d.remove();return}let o=t.contentEl.querySelector(".snw-header-count");if(o&&o.dataset.snwKey===e.basename){o.innerText=` ${r.toString()} `;return}let a=t.contentEl,s=a.querySelector(".snw-header-count-wrapper");s?o=a.querySelector(".snw-header-count"):(s=createDiv({cls:"snw-reference snw-header-count-wrapper"}),o=createDiv({cls:"snw-header-count"}),s.appendChild(o),a.prepend(s)),o&&(o.innerText=` ${r.toString()} `),($t.Platform.isDesktop||$t.Platform.isDesktopApp)&&o&&(o.onclick=d=>{d.stopPropagation(),s&&Dn(s)}),s.setAttribute("data-snw-reallink",e.basename),s.setAttribute("data-snw-key",e.basename),s.setAttribute("data-snw-type","File"),s.setAttribute("data-snw-filepath",e.path),s.onclick=d=>{d.stopPropagation(),Dn(d.target)};let l=!0;Tn(s,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onTrigger(d,y){let v=y;jt.settings.requireModifierKeyToActivateSNWView!==!1&&(v.ctrlKey||v.metaKey?l=!0:l=!1)},onShow(d){if(!l)return!1;setTimeout(async()=>{await Mn(d)},1)}}).popper.classList.add("snw-tippy")}var qt=require("@codemirror/view"),mo=require("obsidian");var _r;function go(t){_r=t}var na=class extends qt.GutterMarker{constructor(t,e,n,r,i,o){super(),this.referenceCount=t,this.referenceType=e,this.realLink=n,this.key=r,this.filePath=i,this.addCssClass=o}toDOM(){return de(this.referenceCount,this.referenceType,this.realLink,this.key,this.filePath,this.addCssClass,0)}},ra=new class extends qt.GutterMarker{toDOM(){return document.createTextNode("\xF8\xF8\xF8")}},ia=(0,qt.gutter)({class:"snw-gutter-ref",lineMarker(t,e){var s,l,p,f,u,h,d,y,v;let n=t.state.field(mo.editorInfoField),r=((s=n.currentMode)==null?void 0:s.sourceMode)===!0;if(!an(_r.settings,r)||!n.file)return null;let i=pe(n.file);if(((p=(l=i==null?void 0:i.cacheMetaData)==null?void 0:l.frontmatter)==null?void 0:p["snw-file-exclude"])===!0||((u=(f=i==null?void 0:i.cacheMetaData)==null?void 0:f.frontmatter)==null?void 0:u["snw-canvas-exclude-edit"])===!0)return null;let o=(h=n.app.metadataCache.getFileCache(n.file))==null?void 0:h.embeds;if(!o||!o.length)return null;let a=t.state.doc.lineAt(e.from).number;for(let w of o)if(w.position.start.line+1===a){for(let g of(d=i==null?void 0:i.embeds)!=null?d:[])if((g==null?void 0:g.references.length)>=Math.max(2,_r.settings.minimumRefCountThreshold)&&(g==null?void 0:g.pos.start.line)+1===a){let _=t.state.doc.lineAt(e.from).text.trim();if(_.startsWith("!")){let C=_.replace("![[","").replace("]]","").split("|")[0];if((C.startsWith("#")?n.file+C:Q(C)||C).toLocaleUpperCase()===g.key)return new na(g.references.length,"embed",g.references[0].realLink,g.key,(v=(y=g.references[0].resolvedFile)==null?void 0:y.path)!=null?v:"","snw-embed-special snw-liveupdate")}}}return null},initialSpacer:()=>ra}),ho=ia;var Re=require("@codemirror/view"),Ae=require("obsidian");var me;function vo(t){me=t}var yo=Re.ViewPlugin.fromClass(class{constructor(t){this.view=t;this.decorations=Re.Decoration.none;this.regxPattern="";me.settings.enableRenderingBlockIdInLivePreview&&(this.regxPattern="(\\s\\^)(\\S+)$"),me.settings.enableRenderingEmbedsInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}!\\[\\[(.*?)\\]\\]`),me.settings.enableRenderingLinksInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}\\[\\[(.*?)\\]\\]`),me.settings.enableRenderingHeadersInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}^#+\\s.+`),this.regxPattern!==""&&(this.decorator=new Re.MatchDecorator({regexp:new RegExp(this.regxPattern,"g"),decorate:(e,n,r,i,o)=>{var f,u,h,d,y,v,w,g,_,C,c,E,b,T,A,R,D,M,N,V,ne;let a=o.state.field(Ae.editorInfoField),s=[],l=null;if(!a.file&&(me.settings.enableRenderingEmbedsInLivePreview||me.settings.enableRenderingLinksInLivePreview)){let F=i[0].replace(/^\[\[|\]\]$|^!\[\[|\]\]$/g,""),k=Q(F).toLocaleUpperCase();if(k){let U=i.input.startsWith("!")?"embed":"link";l=me.app.metadataCache.getFirstLinkpathDest((0,Ae.parseLinktext)(F).path,"/");let I=me.snwAPI.references.get(k),$=[{key:k,page:l.path,type:U,pos:{start:{line:0,ch:0,col:0,offset:0},end:{line:0,ch:0,col:0,offset:0}},references:I!=null?I:[]}];s.push({key:k,transformedCachedItem:$!=null?$:null,refType:U,from:r,to:r})}}else{let F=((f=a.currentMode)==null?void 0:f.sourceMode)===!0;if(!an(me.settings,F))return null;l=a.file;let k=pe(l);if((k.links||k.headings||k.embeds||k.blocks)&&((h=(u=k==null?void 0:k.cacheMetaData)==null?void 0:u.frontmatter)==null?void 0:h["snw-file-exclude"])!==!0&&((y=(d=k==null?void 0:k.cacheMetaData)==null?void 0:d.frontmatter)==null?void 0:y["snw-canvas-exclude-edit"])!==!0){let U=i[0].charAt(0);if(U==="["&&((w=(v=k==null?void 0:k.links)==null?void 0:v.length)!=null?w:0)>0){let I=i[0].replace("[[","").replace("]]","");I.startsWith("#")&&(I=l.path+I),I=I.toLocaleUpperCase(),s.push({key:I,transformedCachedItem:(g=k.links)!=null?g:null,refType:"link",from:r,to:r})}else if(U==="#"&&((c=((_=k==null?void 0:k.headings)==null?void 0:_.length)||((C=k==null?void 0:k.links)==null?void 0:C.length))!=null?c:0)>0){if(s.push({key:(0,Ae.stripHeading)(i[0].replace(/^#+/,"").substring(1)),transformedCachedItem:(E=k.headings)!=null?E:null,refType:"heading",from:r,to:r}),me.settings.enableRenderingLinksInLivePreview){let I=i[0].match(/\[\[(.*?)\]\]|!\[\[(.*?)\]\]/g);if(I)for(let $ of I)s.push({key:$.replace("![[","").replace("[[","").replace("]]","").toLocaleUpperCase(),transformedCachedItem:$.startsWith("!")?(b=k.embeds)!=null?b:null:(T=k.links)!=null?T:null,refType:"link",from:r-i[0].length+(i[0].indexOf($)+$.length),to:r-i[0].length+(i[0].indexOf($)+$.length)})}}else if(U==="!"&&((R=(A=k==null?void 0:k.embeds)==null?void 0:A.length)!=null?R:0)>0){let I=i[0].replace("![[","").replace("]]","");I.startsWith("#")&&(I=l.path+(0,Ae.stripHeading)(I)),s.push({key:I.toLocaleUpperCase(),transformedCachedItem:(D=k.embeds)!=null?D:null,refType:"embed",from:r,to:r})}else U===" "&&((N=(M=k==null?void 0:k.blocks)==null?void 0:M.length)!=null?N:0)>0&&s.push({key:(l.path+i[0].replace(" ^","#^")).toLocaleUpperCase(),transformedCachedItem:(V=k.blocks)!=null?V:null,refType:"block",from:r,to:r})}}if(s.length===0||!l)return;let p=s.sort((F,k)=>F.to===k.to?F.refType==="heading"?1:-1:F.to-k.to);for(let F of s)if(F.key!==""){let k=oa(F.refType,F.key,(ne=F.transformedCachedItem)!=null?ne:[],l.path,l.extension);k!=null&&e(F.from,F.to,Re.Decoration.widget({widget:k,side:1}))}}}),this.decorations=this.decorator.createDeco(t))}update(t){this.regxPattern!==""&&(t.docChanged||t.viewportChanged)&&(this.decorations=this.decorator?this.decorator.updateDeco(t,this.decorations):this.decorations)}},{decorations:t=>t.decorations}),oa=(t,e,n,r,i)=>{var a,s;let o=e;for(let l=0;l<n.length;l++){let p=n[l],f=p.key;if(t==="heading"&&(f=(0,Ae.stripHeading)((a=p.headerMatch)!=null?a:""),o=o.replace(/^\s+|\s+$/g,"")),!(t==="link"&&p.references.length===1)){if(t==="embed"||t==="link"){o.contains("|")&&(o=o.substring(0,e.search(/\|/)));let u=Q(o).toLocaleUpperCase();o=u===""?o:u,f.startsWith("#")&&(f=r+(0,Ae.stripHeading)(f))}if(f===o){let u=(s=p==null?void 0:p.references[0])!=null&&s.resolvedFile?p.references[0].resolvedFile.path.replace(`.${p.references[0].resolvedFile}`,""):o;return(p==null?void 0:p.references.length)>=me.settings.minimumRefCountThreshold?new xr(p.references.length,p.type,p.references[0].realLink,p.key,u,"snw-liveupdate",p.pos.start.line):null}}}return null},xr=class extends Re.WidgetType{constructor(e,n,r,i,o,a,s){super(),this.referenceCount=e,this.referenceType=n,this.realLink=r,this.key=i,this.filePath=o,this.addCssClass=a,this.lineNu=s}toDOM(){return de(this.referenceCount,this.referenceType,this.realLink,this.key,this.filePath,this.addCssClass,this.lineNu)}destroy(){}ignoreEvent(){return!1}};var Kt=require("obsidian");var ge;function wo(t){ge=t}function Er(t,e){var r;if(e.remainingNestLevel===4||t.hasAttribute("uic")||t.querySelectorAll(".contains-task-list").length>0)return;let n=ge.app.vault.fileMap[e.sourcePath];if(n===void 0)e.addChild(new kr(t));else{if(ge.settings.pluginSupportKanban===!1){let i=ge.app.metadataCache.getFileCache(n);if((r=i==null?void 0:i.frontmatter)!=null&&r["kanban-plugin"])return}e.addChild(new Cr(t,e.getSectionInfo(t),n))}}var kr=class extends Kt.MarkdownRenderChild{constructor(e){super(e),this.containerEl=e}onload(){for(let e of Array.from(this.containerEl.querySelectorAll("a.internal-link, span.internal-embed"))){let n=e.dataset.href||e.getAttribute("src"),r=Q(n).toLocaleUpperCase(),i=ge.app.metadataCache.getFirstLinkpathDest((0,Kt.parseLinktext)(n).path,"/"),o=ge.snwAPI.references.get(r),a=(o==null?void 0:o.length)||0;if(a<=0||a<ge.settings.minimumRefCountThreshold)continue;let s=e.classList.contains("internal-link")?"link":"embed";if(!i)continue;let l=de(a,s,n,r,i.path,`snw-liveupdate snw-${s}-preview`,1);e.after(l)}}},Cr=class extends Kt.MarkdownRenderChild{constructor(e,n,r){super(e),this.containerEl=e,this.sectionInfo=n,this.currentFile=r}onload(){var r,i,o,a,s,l,p,f,u,h,d,y;let e=ge.settings.minimumRefCountThreshold,n=pe(this.currentFile);if(((i=(r=n==null?void 0:n.cacheMetaData)==null?void 0:r.frontmatter)==null?void 0:i["snw-file-exclude"])!==!0&&((a=(o=n==null?void 0:n.cacheMetaData)==null?void 0:o.frontmatter)==null?void 0:a["snw-canvas-exclude-preview"])!==!0&&(n!=null&&n.blocks||n.embeds||n.headings||n.links)){if(ge.settings.enableRenderingBlockIdInMarkdown&&(n!=null&&n.blocks)&&this.sectionInfo){for(let v of n.blocks)if(v.references.length>=e&&v.pos.start.line>=((s=this.sectionInfo)==null?void 0:s.lineStart)&&v.pos.end.line<=((l=this.sectionInfo)==null?void 0:l.lineEnd)){let w=de(v.references.length,"block",v.references[0].realLink,v.key,(u=(f=(p=v.references[0])==null?void 0:p.resolvedFile)==null?void 0:f.path)!=null?u:"","snw-liveupdate",v.pos.start.line),g=this.containerEl.querySelector("p"),_=v.pos.start.line-this.sectionInfo.lineStart;if(g)g.append(w);else{if(g=this.containerEl.querySelector(`li[data-line="${_}"]`),!g)continue;let C=g.querySelector("ul");C?C.before(w):g.append(w)}g&&!g.hasClass("snw-block-preview")&&w.addClass("snw-block-preview")}}if(ge.settings.enableRenderingEmbedsInMarkdown&&(n!=null&&n.embeds)&&this.containerEl.querySelectorAll(".internal-embed:not(.snw-embed-preview)").forEach(v=>{var _,C,c,E;let w=v.getAttribute("src");if(!w)return;let g=Q(w[0]==="#"?this.currentFile.path.slice(0,-(this.currentFile.extension.length+1))+w:w)||w;for(let b of(_=n.embeds)!=null?_:[])if(b.references.length>=e&&g.toLocaleUpperCase()===b.key.toLocaleUpperCase()){let T=de(b.references.length,"embed",b.references[0].realLink,b.key.toLocaleUpperCase(),(E=(c=(C=b.references[0])==null?void 0:C.resolvedFile)==null?void 0:c.path)!=null?E:"","snw-liveupdate",b.pos.start.line);T.addClass("snw-embed-preview"),v.after(T);break}}),ge.settings.enableRenderingLinksInMarkdown&&(n!=null&&n.links)&&this.containerEl.querySelectorAll("a.internal-link").forEach(v=>{var _,C,c,E;let w=v.getAttribute("data-href");if(!w)return;let g=Q(w[0]==="#"?this.currentFile.path.slice(0,-(this.currentFile.extension.length+1))+w:w)||w;for(let b of(_=n.links)!=null?_:[])if(b.references.length>=Math.max(2,e)&&b.key.toLocaleUpperCase()===g.toLocaleUpperCase()){let T=de(b.references.length,"link",b.references[0].realLink,b.key.toLocaleUpperCase(),(E=(c=(C=b.references[0])==null?void 0:C.resolvedFile)==null?void 0:c.path)!=null?E:"","snw-liveupdate",b.pos.start.line);T.addClass("snw-link-preview"),v.after(T);break}}),ge.settings.enableRenderingHeadersInMarkdown){let v=this.containerEl.querySelector("[data-heading]");if(n!=null&&n.headings&&v){let w=v.getAttribute("data-heading");for(let g of n.headings)if(g.references.length>=e&&g.headerMatch===(w==null?void 0:w.replace(/\[|\]/g,""))){let _=de(g.references.length,"heading",g.references[0].realLink,g.key,(y=(d=(h=g.references[0])==null?void 0:h.resolvedFile)==null?void 0:d.path)!=null?y:"","snw-liveupdate",g.pos.start.line);_.addClass("snw-heading-preview");let C=this.containerEl.querySelector("h1,h2,h3,h4,h5,h6");C&&C.insertAdjacentElement("beforeend",_);break}}}}}};var it=200,An=class extends ae.Plugin{constructor(){super(...arguments);this.appName=this.manifest.name;this.appID=this.manifest.id;this.APP_ABBREVIARTION="SNW";this.settings=sn;this.showCountsActive=sn.enableOnStartupDesktop;this.lastSelectedReferenceType="";this.lastSelectedReferenceRealLink="";this.lastSelectedReferenceKey="";this.lastSelectedReferenceFilePath="";this.lastSelectedLineNumber=0;this.snwAPI=new Pt(this);this.markdownPostProcessor=null;this.editorExtensions=[];this.commands=new Tt(this)}async onload(){console.log(`loading ${this.appName}`),Lr(this),oo(this),po(this),go(this),fo(this),uo(this),wo(this),vo(this),so(this),window.snwAPI=this.snwAPI,await this.loadSettings(),this.addSettingTab(new ln(this.app,this)),ae.Platform.isMobile||ae.Platform.isMobileApp?this.showCountsActive=this.settings.enableOnStartupMobile:this.showCountsActive=this.settings.enableOnStartupDesktop,this.registerView(Ne,i=>new On(i,this));let n=(0,ae.debounce)(()=>{on(),Rn(),Nn(),br()},3e3,!0),r=(0,ae.debounce)(async(i,o,a)=>{await Ir(i),Un(i,a),Rn(),Nn(),br()},1e3,!0);this.registerEvent(this.app.vault.on("rename",n)),this.registerEvent(this.app.vault.on("create",n)),this.registerEvent(this.app.vault.on("delete",n)),this.registerEvent(this.app.metadataCache.on("changed",r)),this.app.workspace.registerHoverLinkSource(this.appID,{display:this.appName,defaultMod:!0}),this.snwAPI.settings=this.settings,this.registerEditorExtension(this.editorExtensions),this.app.workspace.on("layout-change",()=>{Rn(),Nn()}),this.toggleStateSNWMarkdownPreview(),this.toggleStateSNWCMEditor(),this.toggleStateSNWGutters(),this.app.workspace.onLayoutReady(async()=>{var i,o;(i=this.app.workspace.getLeavesOfType(Ne))!=null&&i.length||await((o=this.app.workspace.getRightLeaf(!1))==null?void 0:o.setViewState({type:Ne,active:!1})),on()})}async activateView(){let{workspace:n}=this.app,r=null,i=n.getLeavesOfType(Ne);if(i.length>0)r=i[0];else{let o=n.getRightLeaf(!1);await(o==null?void 0:o.setViewState({type:Ne,active:!0}))}r&&n.revealLeaf(r)}async activateViewFromRef(n,r,i,o,a){this.lastSelectedReferenceType=n,this.lastSelectedReferenceRealLink=r,this.lastSelectedReferenceKey=i,this.lastSelectedReferenceFilePath=o,this.lastSelectedLineNumber=a,await this.activateView(),await this.app.workspace.getLeavesOfType(Ne)[0].view.updateView()}toggleStateSNWMarkdownPreview(){this.settings.displayInlineReferencesMarkdown&&this.showCountsActive&&this.markdownPostProcessor===null?this.markdownPostProcessor=this.registerMarkdownPostProcessor((n,r)=>Er(n,r),100):(this.markdownPostProcessor?ae.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor):console.log("Markdown post processor is not registered"),this.markdownPostProcessor=null)}toggleStateSNWCMEditor(){let n=this.settings.displayInlineReferencesLivePreview||this.settings.displayInlineReferencesInSourceMode;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("inline-ref",n,yo)}toggleStateSNWGutters(){let n=ae.Platform.isMobile||ae.Platform.isMobileApp?this.settings.displayEmbedReferencesInGutterMobile:this.settings.displayEmbedReferencesInGutter;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("gutter",n,ho)}updateCMExtensionState(n,r,i){if(r===!0)this.editorExtensions.push(i),this.editorExtensions[this.editorExtensions.length-1].snwID=n;else for(let o=0;o<this.editorExtensions.length;o++)if(this.editorExtensions[o].snwID===n){this.editorExtensions.splice(o,1);break}this.app.workspace.updateOptions()}async loadSettings(){this.settings=Object.assign({},sn,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}onunload(){console.log(`unloading ${this.appName}`);try{this.markdownPostProcessor?ae.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor):console.log("Markdown post processor is not registered"),this.app.workspace.unregisterHoverLinkSource(this.appID)}catch(n){}}};

/* nosourcemap */