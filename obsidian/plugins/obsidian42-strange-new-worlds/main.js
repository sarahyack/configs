"use strict";var Wn=Object.defineProperty;var Po=Object.getOwnPropertyDescriptor;var Eo=Object.getOwnPropertyNames;var To=Object.prototype.hasOwnProperty;var So=(t,e)=>{for(var n in e)Wn(t,n,{get:e[n],enumerable:!0})},Lo=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Eo(e))!To.call(t,i)&&i!==n&&Wn(t,i,{get:()=>e[i],enumerable:!(r=Po(e,i))||r.enumerable});return t};var Io=t=>Lo(Wn({},"__esModule",{value:!0}),t);var oa={};So(oa,{UPDATE_DEBOUNCE:()=>it,default:()=>Rn});module.exports=Io(oa);var ae=require("obsidian");var ut=require("obsidian"),$=new Map,Tr=0,oe;function Sr(t){oe=t}function Le(){return $}function Hn(t){let{path:e,subpath:n}=(0,ut.parseLinktext)(t);return n.startsWith("#")&&!n.startsWith("#^")&&(n=n.substring(n.lastIndexOf("#")),n="#"+(0,ut.stripHeading)(n)),{path:e,subpath:n}}var Vn=(t,e)=>{var n,r;if(!(oe.settings.enableIgnoreObsExcludeFoldersLinksFrom&&(t!=null&&t.path)&&oe.app.metadataCache.isUserIgnored(t==null?void 0:t.path))){for(let i of[e==null?void 0:e.links,e==null?void 0:e.embeds,e==null?void 0:e.frontmatterLinks])if(i)for(let o of i){let{path:a,subpath:s}=o.link.startsWith("#")?Hn(t.path.replace(`.${t.extension}`,"")+o.link):Hn(o.link),l=oe.app.metadataCache.getFirstLinkpathDest(a,"/");if(l){if(oe.settings.enableIgnoreObsExcludeFoldersLinksTo&&(l!=null&&l.path)&&oe.app.metadataCache.isUserIgnored(l.path)||((r=(n=oe.app.metadataCache.getFileCache(l))==null?void 0:n.frontmatter)==null?void 0:r["snw-index-exclude"])===!0)continue;let p=(l?l.path+s:a).toLocaleUpperCase();$.set(p,[...$.get(p)||[],{realLink:o.link,reference:o,resolvedFile:l,sourceFile:t}])}else{let p=o.link.toLocaleUpperCase();$.set(p,[...$.get(p)||[],{realLink:o.link,reference:o,resolvedFile:{path:`${a}.md`,name:`${a}.md`,basename:a,extension:"md"},sourceFile:t}])}}}},Lr=async t=>{for(let[e,n]of $.entries()){let r=n.filter(i=>{var o;return((o=i==null?void 0:i.sourceFile)==null?void 0:o.path)!==t.path});r.length===0?$.delete(e):$.set(e,r)}};function on(){if(oe.showCountsActive===!0){$=new Map;for(let t of oe.app.vault.getMarkdownFiles()){let e=oe.app.metadataCache.getFileCache(t);e&&Vn(t,e)}window.snwAPI&&(window.snwAPI.references=$),Tr=Date.now()}}var Er=new Map;function pe(t){var o;if(oe.showCountsActive!==!0)return{};let e=Er.get(t.path.toLocaleUpperCase());if(e){let a=(o=e.createDate)!=null?o:0;if(Tr<a&&a+1e3>Date.now())return e}let n={},r=oe.app.metadataCache.getFileCache(t);if(!r)return n;let i=t.path.toLocaleUpperCase();if($||on(),r!=null&&r.headings){let a=`${i}#`,s=r.headings.filter(l=>$.has(a+(0,ut.stripHeading)(l.heading).toLocaleUpperCase())).map(l=>{let p=a+(0,ut.stripHeading)(l.heading).toLocaleUpperCase();return{original:"#".repeat(l.level)+l.heading,key:p,headerMatch:l.heading.replace(/\[|\]/g,""),pos:l.position,page:t.basename,type:"heading",references:$.get(p)}});s.length>0&&(n.headings=s)}if(r!=null&&r.blocks){let a=Object.values(r.blocks).filter(s=>{var l;return(((l=$.get(`${i}#^${s.id.toUpperCase()}`))==null?void 0:l.length)||0)>0}).map(s=>{let l=`${i}#^${s.id.toLocaleUpperCase()}`;return{key:l,pos:s.position,page:t.basename,type:"block",references:$.get(l)}});a.length>0&&(n.blocks=a)}if(r!=null&&r.links){let a=r.links.filter(s=>{let l=J(s.link.startsWith("#")?i+s.link:s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase(),p=$.get(l);return(p==null?void 0:p.length)>0}).map(s=>{let l=J(s.link.startsWith("#")?i+s.link:s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase(),p={key:l,original:s.original,type:"link",pos:s.position,page:t.basename,references:$.get(l)||[]};return l.includes("#")&&!l.includes("#^")&&(p.original=l.split("#")[1]),p});a.length>0&&(n.links=a)}if(r!=null&&r.embeds){let a=r.embeds.filter(s=>{var c;let l=(s.link.startsWith("#")?J(i+s.link):J(s.link)).toLocaleUpperCase()||s.link.toLocaleUpperCase(),p=l.startsWith("#")?`${t.basename}${l}`:l;return((c=$.get(p))==null?void 0:c.length)>0}).map(s=>{var d;let p=(()=>{let v=s.link.startsWith("#")?i+s.link:s.link;return J(v).toLocaleUpperCase()||s.link.toLocaleUpperCase()})(),c=p.startsWith("#")?`${t.basename}${p}`:p,[f,g]=c.includes("#")&&!c.includes("#^")?c.split("#"):[];return{key:c,page:t.basename,type:"embed",pos:s.position,references:(d=$.get(c))!=null?d:[],...g&&{original:g}}});a.length>0&&(n.embeds=a)}if(r!=null&&r.frontmatterLinks){let a=r.frontmatterLinks.filter(s=>$.has(J(s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase())).map(s=>{let l=J(s.link).toLocaleUpperCase()||s.link.toLocaleUpperCase();return{key:l,original:s.original,type:"frontmatterLink",pos:{start:{line:-1,col:-1,offset:-1},end:{line:-1,col:-1,offset:-1}},displayText:s.displayText,page:t.basename,references:$.get(l)||[]}});a.length>0&&(n.frontmatterLinks=a)}return n.cacheMetaData=r,n.createDate=Date.now(),Er.set(t.path,n),n}function J(t){let e=Hn(t),n=oe.app.metadataCache.getFirstLinkpathDest(e.path,"/");return n===null?"":n.path+e.subpath}var sn={enableOnStartupDesktop:!0,enableOnStartupMobile:!0,minimumRefCountThreshold:1,maxFileCountToDisplay:100,displayIncomingFilesheader:!0,displayInlineReferencesLivePreview:!0,displayInlineReferencesMarkdown:!0,displayInlineReferencesInSourceMode:!1,displayEmbedReferencesInGutter:!1,displayEmbedReferencesInGutterMobile:!1,displayPropertyReferences:!0,displayPropertyReferencesMobile:!1,enableRenderingBlockIdInMarkdown:!0,enableRenderingLinksInMarkdown:!0,enableRenderingHeadersInMarkdown:!0,enableRenderingEmbedsInMarkdown:!0,enableRenderingBlockIdInLivePreview:!0,enableRenderingLinksInLivePreview:!0,enableRenderingHeadersInLivePreview:!0,enableRenderingEmbedsInLivePreview:!0,enableIgnoreObsExcludeFoldersLinksFrom:!1,enableIgnoreObsExcludeFoldersLinksTo:!1,requireModifierKeyToActivateSNWView:!1,sortOptionDefault:"name-asc",displayCustomPropertyList:"",pluginSupportKanban:!1};var Et=class{constructor(e){this.references=new Map;this.console=(e,...n)=>{console.log(`SNW: ${e}`,n)};this.getMetaInfoByCurrentFile=async()=>{var e;return this.getMetaInfoByFileName(((e=this.plugin.app.workspace.getActiveFile())==null?void 0:e.path)||"")};this.searchReferencesStartingWith=async e=>{for(let[n,r]of Le())n.startsWith(e)&&console.log(n,r)};this.searchReferencesContains=async e=>{for(let[n,r]of Le())n.contains(e)&&console.log(n,r)};this.getMetaInfoByFileName=async e=>{let n=this.plugin.app.metadataCache.getFirstLinkpathDest(e,"/");return{TFile:n,metadataCache:n?this.plugin.app.metadataCache.getFileCache(n):null,SnwTransformedCache:n?pe(n):null}};this.plugin=e}parseLinkTextToFullPath(e){return J(e)}};var Ir=require("obsidian"),Tt=class{constructor(e){this.snwCommands=[{id:"SNW-ToggleActiveState",icon:"dot-network",name:"Toggle active state of SNW plugin on/off",showInRibbon:!0,callback:async()=>{this.plugin.showCountsActive=!this.plugin.showCountsActive;let e=`SNW toggled ${this.plugin.showCountsActive?`ON

`:`OFF

`}`;e+="Tabs may require reloading for this change to take effect.",new Ir.Notice(e),this.plugin.toggleStateSNWMarkdownPreview(),this.plugin.toggleStateSNWLivePreview(),this.plugin.toggleStateSNWGutters()}}];this.plugin=e;for(let n of this.snwCommands)this.plugin.addCommand({id:n.id,name:n.name,icon:n.icon,callback:async()=>{await n.callback()}})}};var S=require("obsidian"),an=class extends S.PluginSettingTab{constructor(e,n){super(e,n),this.plugin=n}display(){let{containerEl:e}=this;e.empty(),new S.Setting(e).setHeading().setName("Enable on startup"),new S.Setting(e).setName("On the desktop enable SNW at startup").addToggle(n=>{n.setValue(this.plugin.settings.enableOnStartupDesktop),n.onChange(async r=>{this.plugin.settings.enableOnStartupDesktop=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("On mobile devices enable SNW at startup").addToggle(n=>{n.setValue(this.plugin.settings.enableOnStartupMobile),n.onChange(async r=>{this.plugin.settings.enableOnStartupMobile=r,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("SNW Activation"),new S.Setting(e).setName("Require modifier key to activate SNW").setDesc(`If enabled, SNW will only activate when the modifier key is pressed when hovering the mouse over an SNW counter.  
						Otherwise, SNW will activate on a mouse hover. May require reopening open files to take effect.`).addToggle(n=>{n.setValue(this.plugin.settings.requireModifierKeyToActivateSNWView),n.onChange(async r=>{this.plugin.settings.requireModifierKeyToActivateSNWView=r,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Thresholds"),new S.Setting(e).setName("Minimal required count to show counter").setDesc(`This setting defines how many references there needs to be for the reference count box to appear. May require reloading open files.
				 Currently set to: ${this.plugin.settings.minimumRefCountThreshold} references.`).addSlider(n=>n.setLimits(1,1e3,1).setValue(this.plugin.settings.minimumRefCountThreshold).onChange(async r=>{this.plugin.settings.minimumRefCountThreshold=r,await this.plugin.saveSettings()}).setDynamicTooltip()),new S.Setting(e).setName("Maximum file references to show").setDesc(`This setting defines the max amount of files with their references are displayed in the popup or sidebar.  Set to 1000 for no maximum.
				 Currently set to: ${this.plugin.settings.maxFileCountToDisplay} references. Keep in mind higher numbers can affect performance on larger vaults.`).addSlider(n=>n.setLimits(1,1e3,1).setValue(this.plugin.settings.maxFileCountToDisplay).onChange(async r=>{this.plugin.settings.maxFileCountToDisplay=r,await this.plugin.saveSettings()}).setDynamicTooltip()),new S.Setting(e).setHeading().setName("Use Obsidian's Excluded Files list (Settings > Files & Links)"),new S.Setting(e).setName("Outgoing links").setDesc("If enabled, links FROM files in the excluded folder will not be included in SNW's reference counters. May require restarting Obsidian.").addToggle(n=>{n.setValue(this.plugin.settings.enableIgnoreObsExcludeFoldersLinksFrom),n.onChange(async r=>{this.plugin.settings.enableIgnoreObsExcludeFoldersLinksFrom=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Incoming links").setDesc("If enabled, links TO files in the excluded folder will not be included in SNW's reference counters.  May require restarting Obsidian.").addToggle(n=>{n.setValue(this.plugin.settings.enableIgnoreObsExcludeFoldersLinksTo),n.onChange(async r=>{this.plugin.settings.enableIgnoreObsExcludeFoldersLinksTo=r,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Properties"),new S.Setting(e).setName("Show references in properties on Desktop").addToggle(n=>{n.setValue(this.plugin.settings.displayPropertyReferences),n.onChange(async r=>{this.plugin.settings.displayPropertyReferences=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Show references in properties on mobile").addToggle(n=>{n.setValue(this.plugin.settings.displayPropertyReferencesMobile),n.onChange(async r=>{this.plugin.settings.displayPropertyReferencesMobile=r,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("View Modes"),new S.Setting(e).setName("Incoming Links Header Count").setDesc("In header of a document, show number of incoming link to that file.").addToggle(n=>{n.setValue(this.plugin.settings.displayIncomingFilesheader),n.onChange(async r=>{this.plugin.settings.displayIncomingFilesheader=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Show SNW indicators in Live Preview Editor").setDesc("While using Live Preview, Display inline of the text of documents all reference counts for links, blocks and embeds.Note: files may need to be closed and reopened for this setting to take effect.").addToggle(n=>{n.setValue(this.plugin.settings.displayInlineReferencesLivePreview),n.onChange(async r=>{this.plugin.settings.displayInlineReferencesLivePreview=r,this.plugin.toggleStateSNWLivePreview(),await this.plugin.saveSettings()})}),new S.Setting(e).setName("Show SNW indicators in Reading view ").setDesc("While in Reading View of a document, display inline of the text of documents all reference counts for links, blocks and embeds.Note: files may need to be closed and reopened for this setting to take effect.").addToggle(n=>{n.setValue(this.plugin.settings.displayInlineReferencesMarkdown),n.onChange(async r=>{this.plugin.settings.displayInlineReferencesMarkdown=r,this.plugin.toggleStateSNWMarkdownPreview(),await this.plugin.saveSettings()})}),new S.Setting(e).setName("Show SNW indicators in Source Mode ").setDesc("While in Source Mode of a document, display inline of the text of documents all reference counts for links, blocks and embeds.By default, this is turned off since the goal of Source Mode is to see the raw markdown.Note: files may need to be closed and reopened for this setting to take effect.").addToggle(n=>{n.setValue(this.plugin.settings.displayInlineReferencesInSourceMode),n.onChange(async r=>{this.plugin.settings.displayInlineReferencesInSourceMode=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embed references in Gutter in Live Preview Mode (Desktop)").setDesc(`Displays a count of references in the gutter while in live preview. This is done only in a
					  special scenario. It has to do with the way Obsidian renders embeds, example: ![[link]] when  
					  they are on its own line. Strange New Worlds cannot embed the count in this scenario, so a hint is 
					  displayed in the gutter. It is a hack, but at least we get some information.`).addToggle(n=>{n.setValue(this.plugin.settings.displayEmbedReferencesInGutter),n.onChange(async r=>{this.plugin.settings.displayEmbedReferencesInGutter=r,this.plugin.toggleStateSNWGutters(),await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embed references in Gutter in Live Preview Mode (Mobile)").setDesc("This is off by default on mobile since the gutter takes up some space in the left margin.").addToggle(n=>{n.setValue(this.plugin.settings.displayEmbedReferencesInGutterMobile),n.onChange(async r=>{this.plugin.settings.displayEmbedReferencesInGutterMobile=r,this.plugin.toggleStateSNWGutters(),await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Enable reference types in Reading Mode"),e.createEl("sup",{text:"(requires reopening documents to take effect)"}),new S.Setting(e).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingBlockIdInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingBlockIdInMarkdown=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingEmbedsInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingEmbedsInMarkdown=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingLinksInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingLinksInMarkdown=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingHeadersInMarkdown),n.onChange(async r=>{this.plugin.settings.enableRenderingHeadersInMarkdown=r,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Enable reference types in Live Preview Mode"),e.createEl("sup",{text:"(requires reopening documents to take effect)"}),new S.Setting(e).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingBlockIdInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingBlockIdInLivePreview=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingEmbedsInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingEmbedsInLivePreview=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingLinksInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingLinksInLivePreview=r,await this.plugin.saveSettings()})}),new S.Setting(e).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(n=>{n.setValue(this.plugin.settings.enableRenderingHeadersInLivePreview),n.onChange(async r=>{this.plugin.settings.enableRenderingHeadersInLivePreview=r,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Custom Display Settings"),new S.Setting(this.containerEl).setName("Custom Property List").setDesc("Displays properties from referenced files in the references list. The list is comma separated list of case-sensitive property names.").addText(n=>{n.setPlaceholder("Ex: Project, Summary").setValue(this.plugin.settings.displayCustomPropertyList).onChange(async r=>{this.plugin.settings.displayCustomPropertyList=r,await this.plugin.saveSettings()})}),new S.Setting(e).setHeading().setName("Support for Other Plugins"),new S.Setting(e).setName("Kanban by mgmeyers").setDesc(`Enables SNW support with in the preview mode of the Kanban plugin by mgmeyers at https://github.com/mgmeyers/obsidian-kanban. 
				SNW references will always show when editing a card. Changing this setting may require reopening files.`).addToggle(n=>{n.setValue(this.plugin.settings.pluginSupportKanban),n.onChange(async r=>{this.plugin.settings.pluginSupportKanban=r,await this.plugin.saveSettings()})})}};var ao=require("obsidian");var fn,H,Rr,Mo,qe,Mr,Ar,Fr,Wr,$n,Un,Bn,Oo,St={},Hr=[],Do=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dn=Array.isArray;function Ie(t,e){for(var n in e)t[n]=e[n];return t}function qn(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function No(t,e,n){var r,i,o,a={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?fn.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return pn(t,a,r,i,null)}function pn(t,e,n,r,i){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i==null?++Rr:i,__i:-1,__u:0};return i==null&&H.vnode!=null&&H.vnode(o),o}function dt(t){return t.children}function cn(t,e){this.props=t,this.context=e}function ft(t,e){if(e==null)return t.__?ft(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ft(t):null}function Vr(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Vr(t)}}function Or(t){(!t.__d&&(t.__d=!0)&&qe.push(t)&&!un.__r++||Mr!=H.debounceRendering)&&((Mr=H.debounceRendering)||Ar)(un)}function un(){for(var t,e,n,r,i,o,a,s=1;qe.length;)qe.length>s&&qe.sort(Fr),t=qe.shift(),s=qe.length,t.__d&&(n=void 0,i=(r=(e=t).__v).__e,o=[],a=[],e.__P&&((n=Ie({},r)).__v=r.__v+1,H.vnode&&H.vnode(n),Kn(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,i==null?ft(r):i,!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,jr(o,n,a),n.__e!=i&&Vr(n)));un.__r=0}function Ur(t,e,n,r,i,o,a,s,l,p,c){var f,g,d,v,y,h,w=r&&r.__k||Hr,_=e.length;for(l=Ro(n,e,w,l,_),f=0;f<_;f++)(d=n.__k[f])!=null&&(g=d.__i==-1?St:w[d.__i]||St,d.__i=f,h=Kn(t,d,g,i,o,a,s,l,p,c),v=d.__e,d.ref&&g.ref!=d.ref&&(g.ref&&zn(g.ref,null,d),c.push(d.ref,d.__c||v,d)),y==null&&v!=null&&(y=v),4&d.__u||g.__k===d.__k?l=Br(d,l,t):typeof d.type=="function"&&h!==void 0?l=h:v&&(l=v.nextSibling),d.__u&=-7);return n.__e=y,l}function Ro(t,e,n,r,i){var o,a,s,l,p,c=n.length,f=c,g=0;for(t.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=o+g,(a=t.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?pn(null,a,null,null,null):dn(a)?pn(dt,{children:a},null,null,null):a.constructor==null&&a.__b>0?pn(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,s=null,(p=a.__i=Ao(a,n,l,f))!=-1&&(f--,(s=n[p])&&(s.__u|=2)),s==null||s.__v==null?(p==-1&&(i>c?g--:i<c&&g++),typeof a.type!="function"&&(a.__u|=4)):p!=l&&(p==l-1?g--:p==l+1?g++:(p>l?g--:g++,a.__u|=4))):t.__k[o]=null;if(f)for(o=0;o<c;o++)(s=n[o])!=null&&!(2&s.__u)&&(s.__e==r&&(r=ft(s)),qr(s,s));return r}function Br(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=Br(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=ft(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ao(t,e,n,r){var i,o,a,s=t.key,l=t.type,p=e[n],c=p!=null&&(2&p.__u)==0;if(p===null&&t.key==null||c&&s==p.key&&l==p.type)return n;if(r>(c?1:0)){for(i=n-1,o=n+1;i>=0||o<e.length;)if((p=e[a=i>=0?i--:o++])!=null&&!(2&p.__u)&&s==p.key&&l==p.type)return a}return-1}function Dr(t,e,n){e[0]=="-"?t.setProperty(e,n==null?"":n):t[e]=n==null?"":typeof n!="number"||Do.test(e)?n:n+"px"}function ln(t,e,n,r,i){var o,a;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Dr(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Dr(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Wr,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=$n,t.addEventListener(e,o?Bn:Un,o)):t.removeEventListener(e,o?Bn:Un,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n==null?"":n;break e}catch(s){}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Nr(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=$n++;else if(e.t<n.u)return;return n(H.event?H.event(e):e)}}}function Kn(t,e,n,r,i,o,a,s,l,p){var c,f,g,d,v,y,h,w,_,P,u,C,b,T,F,A,D,M=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[s=e.__e=n.__e]),(c=H.__b)&&c(e);e:if(typeof M=="function")try{if(w=e.props,_="prototype"in M&&M.prototype.render,P=(c=M.contextType)&&r[c.__c],u=c?P?P.props.value:c.__:r,n.__c?h=(f=e.__c=n.__c).__=f.__E:(_?e.__c=f=new M(w,u):(e.__c=f=new cn(w,u),f.constructor=M,f.render=Wo),P&&P.sub(f),f.props=w,f.state||(f.state={}),f.context=u,f.__n=r,g=f.__d=!0,f.__h=[],f._sb=[]),_&&f.__s==null&&(f.__s=f.state),_&&M.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Ie({},f.__s)),Ie(f.__s,M.getDerivedStateFromProps(w,f.__s))),d=f.props,v=f.state,f.__v=e,g)_&&M.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),_&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(_&&M.getDerivedStateFromProps==null&&w!==d&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(w,u),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(w,f.__s,u)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(f.props=w,f.state=f.__s,f.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(N){N&&(N.__=e)}),C=0;C<f._sb.length;C++)f.__h.push(f._sb[C]);f._sb=[],f.__h.length&&a.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(w,f.__s,u),_&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(d,v,y)})}if(f.context=u,f.props=w,f.__P=t,f.__e=!1,b=H.__r,T=0,_){for(f.state=f.__s,f.__d=!1,b&&b(e),c=f.render(f.props,f.state,f.context),F=0;F<f._sb.length;F++)f.__h.push(f._sb[F]);f._sb=[]}else do f.__d=!1,b&&b(e),c=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++T<25);f.state=f.__s,f.getChildContext!=null&&(r=Ie(Ie({},r),f.getChildContext())),_&&!g&&f.getSnapshotBeforeUpdate!=null&&(y=f.getSnapshotBeforeUpdate(d,v)),A=c,c!=null&&c.type===dt&&c.key==null&&(A=$r(c.props.children)),s=Ur(t,dn(A)?A:[A],e,n,r,i,o,a,s,l,p),f.base=e.__e,e.__u&=-161,f.__h.length&&a.push(f),h&&(f.__E=f.__=null)}catch(N){if(e.__v=null,l||o!=null)if(N.then){for(e.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,e.__e=s}else{for(D=o.length;D--;)qn(o[D]);jn(e)}else e.__e=n.__e,e.__k=n.__k,N.then||jn(e);H.__e(N,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=Fo(n.__e,e,n,r,i,o,a,l,p);return(c=H.diffed)&&c(e),128&e.__u?void 0:s}function jn(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(jn)}function jr(t,e,n){for(var r=0;r<n.length;r++)zn(n[r],n[++r],n[++r]);H.__c&&H.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){H.__e(o,i.__v)}})}function $r(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:dn(t)?t.map($r):Ie({},t)}function Fo(t,e,n,r,i,o,a,s,l){var p,c,f,g,d,v,y,h=n.props,w=e.props,_=e.type;if(_=="svg"?i="http://www.w3.org/2000/svg":_=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(p=0;p<o.length;p++)if((d=o[p])&&"setAttribute"in d==!!_&&(_?d.localName==_:d.nodeType==3)){t=d,o[p]=null;break}}if(t==null){if(_==null)return document.createTextNode(w);t=document.createElementNS(i,_,w.is&&w),s&&(H.__m&&H.__m(e,o),s=!1),o=null}if(_==null)h===w||s&&t.data==w||(t.data=w);else{if(o=o&&fn.call(t.childNodes),h=n.props||St,!s&&o!=null)for(h={},p=0;p<t.attributes.length;p++)h[(d=t.attributes[p]).name]=d.value;for(p in h)if(d=h[p],p!="children"){if(p=="dangerouslySetInnerHTML")f=d;else if(!(p in w)){if(p=="value"&&"defaultValue"in w||p=="checked"&&"defaultChecked"in w)continue;ln(t,p,null,d,i)}}for(p in w)d=w[p],p=="children"?g=d:p=="dangerouslySetInnerHTML"?c=d:p=="value"?v=d:p=="checked"?y=d:s&&typeof d!="function"||h[p]===d||ln(t,p,d,h[p],i);if(c)s||f&&(c.__html==f.__html||c.__html==t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(f&&(t.innerHTML=""),Ur(e.type=="template"?t.content:t,dn(g)?g:[g],e,n,r,_=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&ft(n,0),s,l),o!=null)for(p=o.length;p--;)qn(o[p]);s||(p="value",_=="progress"&&v==null?t.removeAttribute("value"):v!=null&&(v!==t[p]||_=="progress"&&!v||_=="option"&&v!=h[p])&&ln(t,p,v,h[p],i),p="checked",y!=null&&y!=t[p]&&ln(t,p,y,h[p],i))}return t}function zn(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){H.__e(i,n)}}function qr(t,e,n){var r,i;if(H.unmount&&H.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||zn(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){H.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&qr(r[i],e,n||typeof t.type!="function");n||qn(t.__e),t.__c=t.__=t.__e=void 0}function Wo(t,e,n){return this.constructor(t,n)}function ke(t,e,n){var r,i,o,a;e==document&&(e=document.documentElement),H.__&&H.__(t,e),i=(r=typeof n=="function")?null:n&&n.__k||e.__k,o=[],a=[],Kn(e,t=(!r&&n||e).__k=No(dt,null,[t]),i||St,St,e.namespaceURI,!r&&n?[n]:i?null:e.firstChild?fn.call(e.childNodes):null,o,!r&&n?n:i?i.__e:e.firstChild,r,a),jr(o,t,a)}fn=Hr.slice,H={__e:function(t,e,n,r){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(s){t=s}throw t}},Rr=0,Mo=function(t){return t!=null&&t.constructor==null},cn.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ie({},this.state),typeof t=="function"&&(t=t(Ie({},n),this.props)),t&&Ie(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Or(this))},cn.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Or(this))},cn.prototype.render=dt,qe=[],Ar=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fr=function(t,e){return t.__v.__b-e.__v.__b},un.__r=0,Wr=/(PointerCapture)$|Capture$/i,$n=0,Un=Nr(!1),Bn=Nr(!0),Oo=0;var Ho=(t,e)=>{let n=getComputedStyle(t),r=n.position==="absolute",i=e?/(auto|scroll|hidden)/:/(auto|scroll)/;if(n.position==="fixed")return document.body;for(let o=t.parentElement;o;o=o.parentElement)if(n=getComputedStyle(o),(!r||n.position!=="static")&&i.test(n.overflow+n.overflowY+n.overflowX))return o;return document.body},mn=t=>{let e=t.querySelectorAll(".search-result-file-matched-text");for(let n of Array.from(e))if(n instanceof HTMLElement){let r=Ho(n,!0);r&&(r.scrollTop=n.offsetTop-r.offsetTop-r.offsetHeight/2)}};var rt=require("obsidian");var ro=require("obsidian");var mt=require("obsidian");var Lt=(t,e)=>t.substring(e.start.offset,e.end.offset),Kr=(t,e)=>t.substring(e.start.offset-e.start.col,e.end.offset),Gn=(t,e)=>{try{return t.start.offset<=e.start.offset&&t.end.offset>=e.end.offset}catch(n){return!1}};var gn=class{constructor(e,{listItems:n=[],headings:r=[],sections:i=[]}){this.fileContents=e;this.getListItemIndexContaining=e=>this.listItems.findIndex(({position:n})=>Gn(n,e));this.getSectionContaining=e=>this.sections.find(({position:n})=>Gn(n,e));this.getListItemWithDescendants=e=>{let n=this.listItems[e],r=[n];for(let i=e+1;i<this.listItems.length;i++){let o=this.listItems[i];if(o.parent<n.position.start.line)return r;r.push(o)}return r};this.listItems=n,this.headings=r,this.sections=i}getListBreadcrumbs(e){let n=[];if(this.listItems.length===0)return n;let r=this.getListItemIndexContaining(e);if(r<0)return n;let o=this.listItems[r],a=o.parent;if(this.isTopLevelListItem(o))return n;for(let s=r-1;s>=0;s--){let l=this.listItems[s];if(l.parent<a&&(n.unshift(l),a=l.parent),this.isTopLevelListItem(l))return n}return n}getFirstSectionUnder(e){return this.sections.find(n=>n.position.start.line>e.start.line)}getHeadingContaining(e){let n=this.getHeadingIndexContaining(e);return this.headings[n]}getHeadingBreadcrumbs(e){let n=[];if(this.headings.length===0)return n;let r=l=>{let p=this.headings[l].level,c=l-1;for(let f=c;f>=0;f--){let g=this.headings[f];g.level<p&&(p=g.level,n.unshift(g))}},i=this.getHeadingIndexContaining(e);if(i>=0)return r(i),n;let a=this.getIndexOfHeadingAbove(e);if(a>=0){let l=this.headings[a];return n.unshift(l),r(a),n}return n}isTopLevelListItem(e){return e.parent<=0}getIndexOfHeadingAbove(e){return e===void 0?-1:this.headings.reduce((n,r,i)=>r.position.start.line<e.start.line?i:n,-1)}getHeadingIndexContaining(e){return e===void 0?-1:this.headings.findIndex(n=>n.position.start.line===e.start.line)}};var zr=t=>t.map(e=>e.trim()).filter(e=>e.length>0).join(" \u27A4 "),Gr=(t,e)=>zr(e.map(n=>Lt(t,n.position)).map(n=>n.trim().replace(/^-\s+/,""))),Yr=(t,e)=>{let r=e[0].position.start.col;return e.map(i=>Kr(t,i.position).slice(r)).join(`
`)},Xr=t=>zr(t.map(e=>e.heading));var Vo=0,_a=Array.isArray;function L(t,e,n,r,i,o){e||(e={});var a,s,l=e;if("ref"in l)for(s in l={},e)s=="ref"?a=e[s]:l[s]=e[s];var p={type:t,props:l,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Vo,__i:-1,__u:0,__source:i,__self:o};if(typeof t=="function"&&(a=t.defaultProps))for(s in a)l[s]===void 0&&(l[s]=a[s]);return H.vnode&&H.vnode(p),p}var se;function Jr(t){se=t}var Qr=async t=>{var i,o;let e=t.reference.position!==void 0?t.reference.position.start.line.toString():"0",n=L("div",{className:"snw-ref-item-info search-result-file-match","snw-data-line-number":e,"snw-data-file-name":(i=t==null?void 0:t.sourceFile)==null?void 0:i.path,"data-href":(o=t==null?void 0:t.sourceFile)==null?void 0:o.path,dangerouslySetInnerHTML:{__html:(await Uo(t)).innerHTML}}),r=createDiv();return ke(n,r),r},Uo=async t=>{var g;let e=await se.app.vault.cachedRead(t.sourceFile),n=se.app.metadataCache.getFileCache(t.sourceFile),r=t.reference.position,i=createDiv();if(i.setAttribute("uic","uic"),(g=t.reference)!=null&&g.key)return i.innerText=`Used in property: ${t.reference.key}`,i;let o=new gn(e,n),a=o.getHeadingBreadcrumbs(r);if(a.length>0){let d=i.createDiv();d.addClass("snw-breadcrumbs"),d.createEl("span",{text:"H"}),await mt.MarkdownRenderer.render(se.app,Xr(a),d,t.sourceFile.path,se)}let s=o.getListItemIndexContaining(r);if(s>=0){let d=o.getListBreadcrumbs(r);if(d.length>0){let h=i.createDiv();h.addClass("snw-breadcrumbs"),h.createEl("span",{text:"L"}),await mt.MarkdownRenderer.render(se.app,Gr(e,d),h,t.sourceFile.path,se)}let v=o.getListItemWithDescendants(s),y=i.createDiv();await mt.MarkdownRenderer.render(se.app,Yr(e,v),y,t.sourceFile.path,se)}else{let d=o.getSectionContaining(r),v="";(d==null?void 0:d.position)!==void 0&&(v=Lt(e,d.position)),/^\[\^([\w]+)\]:(.*)$/.test(v)&&(v=v.replace("[","").replace("]:","")),await mt.MarkdownRenderer.render(se.app,v,i,t.sourceFile.path,se)}let p=o.getHeadingContaining(r);if(p){let d=o.getFirstSectionUnder(p.position);if(d){let v=i.createDiv();await mt.MarkdownRenderer.render(se.app,Lt(e,d.position),v,t.sourceFile.path,se)}}let c=i.querySelectorAll("*"),f=Array.from(c).find(d=>d.textContent===t.reference.displayText);try{f.addClass("search-result-file-matched-text")}catch(d){}return i};var j="top",Y="bottom",z="right",q="left",hn="auto",He=[j,Y,z,q],Me="start",Ke="end",Zr="clippingParents",vn="viewport",gt="popper",ei="reference",Yn=He.reduce(function(t,e){return t.concat([e+"-"+Me,e+"-"+Ke])},[]),yn=[].concat(He,[hn]).reduce(function(t,e){return t.concat([e,e+"-"+Me,e+"-"+Ke])},[]),Bo="beforeRead",jo="read",$o="afterRead",qo="beforeMain",Ko="main",zo="afterMain",Go="beforeWrite",Yo="write",Xo="afterWrite",ti=[Bo,jo,$o,qo,Ko,zo,Go,Yo,Xo];function Q(t){return t?(t.nodeName||"").toLowerCase():null}function B(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ce(t){var e=B(t).Element;return t instanceof e||t instanceof Element}function X(t){var e=B(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ht(t){if(typeof ShadowRoot=="undefined")return!1;var e=B(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Jo(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!X(o)||!Q(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function Qo(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},a=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),s=a.reduce(function(l,p){return l[p]="",l},{});!X(i)||!Q(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}var It={name:"applyStyles",enabled:!0,phase:"write",fn:Jo,effect:Qo,requires:["computeStyles"]};function Z(t){return t.split("-")[0]}var ve=Math.max,ze=Math.min,Oe=Math.round;function vt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Mt(){return!/^((?!chrome|android).)*safari/i.test(vt())}function ue(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&X(t)&&(i=t.offsetWidth>0&&Oe(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Oe(r.height)/t.offsetHeight||1);var a=ce(t)?B(t):window,s=a.visualViewport,l=!Mt()&&n,p=(r.left+(l&&s?s.offsetLeft:0))/i,c=(r.top+(l&&s?s.offsetTop:0))/o,f=r.width/i,g=r.height/o;return{width:f,height:g,top:c,right:p+f,bottom:c+g,left:p,x:p,y:c}}function Ge(t){var e=ue(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Ot(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ht(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function re(t){return B(t).getComputedStyle(t)}function Xn(t){return["table","td","th"].indexOf(Q(t))>=0}function ee(t){return((ce(t)?t.ownerDocument:t.document)||window.document).documentElement}function De(t){return Q(t)==="html"?t:t.assignedSlot||t.parentNode||(ht(t)?t.host:null)||ee(t)}function ni(t){return!X(t)||re(t).position==="fixed"?null:t.offsetParent}function Zo(t){var e=/firefox/i.test(vt()),n=/Trident/i.test(vt());if(n&&X(t)){var r=re(t);if(r.position==="fixed")return null}var i=De(t);for(ht(i)&&(i=i.host);X(i)&&["html","body"].indexOf(Q(i))<0;){var o=re(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function ye(t){for(var e=B(t),n=ni(t);n&&Xn(n)&&re(n).position==="static";)n=ni(n);return n&&(Q(n)==="html"||Q(n)==="body"&&re(n).position==="static")?e:n||Zo(t)||e}function Ye(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Xe(t,e,n){return ve(t,ze(e,n))}function ri(t,e,n){var r=Xe(t,e,n);return r>n?n:r}function Dt(){return{top:0,right:0,bottom:0,left:0}}function Nt(t){return Object.assign({},Dt(),t)}function Rt(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var es=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Nt(typeof e!="number"?e:Rt(e,He))};function ts(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Z(n.placement),l=Ye(s),p=[q,z].indexOf(s)>=0,c=p?"height":"width";if(!(!o||!a)){var f=es(i.padding,n),g=Ge(o),d=l==="y"?j:q,v=l==="y"?Y:z,y=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],h=a[l]-n.rects.reference[l],w=ye(o),_=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,P=y/2-h/2,u=f[d],C=_-g[c]-f[v],b=_/2-g[c]/2+P,T=Xe(u,b,C),F=l;n.modifiersData[r]=(e={},e[F]=T,e.centerOffset=T-b,e)}}function ns(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Ot(e.elements.popper,i)&&(e.elements.arrow=i))}var ii={name:"arrow",enabled:!0,phase:"main",fn:ts,effect:ns,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fe(t){return t.split("-")[1]}var rs={top:"auto",right:"auto",bottom:"auto",left:"auto"};function is(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Oe(n*i)/i||0,y:Oe(r*i)/i||0}}function oi(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,p=t.adaptive,c=t.roundOffsets,f=t.isFixed,g=a.x,d=g===void 0?0:g,v=a.y,y=v===void 0?0:v,h=typeof c=="function"?c({x:d,y}):{x:d,y};d=h.x,y=h.y;var w=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),P=q,u=j,C=window;if(p){var b=ye(n),T="clientHeight",F="clientWidth";if(b===B(n)&&(b=ee(n),re(b).position!=="static"&&s==="absolute"&&(T="scrollHeight",F="scrollWidth")),b=b,i===j||(i===q||i===z)&&o===Ke){u=Y;var A=f&&b===C&&C.visualViewport?C.visualViewport.height:b[T];y-=A-r.height,y*=l?1:-1}if(i===q||(i===j||i===Y)&&o===Ke){P=z;var D=f&&b===C&&C.visualViewport?C.visualViewport.width:b[F];d-=D-r.width,d*=l?1:-1}}var M=Object.assign({position:s},p&&rs),N=c===!0?is({x:d,y},B(n)):{x:d,y};if(d=N.x,y=N.y,l){var U;return Object.assign({},M,(U={},U[u]=_?"0":"",U[P]=w?"0":"",U.transform=(C.devicePixelRatio||1)<=1?"translate("+d+"px, "+y+"px)":"translate3d("+d+"px, "+y+"px, 0)",U))}return Object.assign({},M,(e={},e[u]=_?y+"px":"",e[P]=w?d+"px":"",e.transform="",e))}function os(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,p={placement:Z(e.placement),variation:fe(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,oi(Object.assign({},p,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,oi(Object.assign({},p,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var si={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:os,data:{}};var wn={passive:!0};function ss(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,l=B(e.elements.popper),p=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&p.forEach(function(c){c.addEventListener("scroll",n.update,wn)}),s&&l.addEventListener("resize",n.update,wn),function(){o&&p.forEach(function(c){c.removeEventListener("scroll",n.update,wn)}),s&&l.removeEventListener("resize",n.update,wn)}}var ai={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ss,data:{}};var as={left:"right",right:"left",bottom:"top",top:"bottom"};function yt(t){return t.replace(/left|right|bottom|top/g,function(e){return as[e]})}var ls={start:"end",end:"start"};function bn(t){return t.replace(/start|end/g,function(e){return ls[e]})}function Je(t){var e=B(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Qe(t){return ue(ee(t)).left+Je(t).scrollLeft}function Jn(t,e){var n=B(t),r=ee(t),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var p=Mt();(p||!p&&e==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+Qe(t),y:l}}function Qn(t){var e,n=ee(t),r=Je(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=ve(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=ve(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+Qe(t),l=-r.scrollTop;return re(i||n).direction==="rtl"&&(s+=ve(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function Ze(t){var e=re(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function _n(t){return["html","body","#document"].indexOf(Q(t))>=0?t.ownerDocument.body:X(t)&&Ze(t)?t:_n(De(t))}function Ve(t,e){var n;e===void 0&&(e=[]);var r=_n(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=B(r),a=i?[o].concat(o.visualViewport||[],Ze(r)?r:[]):r,s=e.concat(a);return i?s:s.concat(Ve(De(a)))}function wt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ps(t,e){var n=ue(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function li(t,e,n){return e===vn?wt(Jn(t,n)):ce(e)?ps(e,n):wt(Qn(ee(t)))}function cs(t){var e=Ve(De(t)),n=["absolute","fixed"].indexOf(re(t).position)>=0,r=n&&X(t)?ye(t):t;return ce(r)?e.filter(function(i){return ce(i)&&Ot(i,r)&&Q(i)!=="body"}):[]}function Zn(t,e,n,r){var i=e==="clippingParents"?cs(t):[].concat(e),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(l,p){var c=li(t,p,r);return l.top=ve(c.top,l.top),l.right=ze(c.right,l.right),l.bottom=ze(c.bottom,l.bottom),l.left=ve(c.left,l.left),l},li(t,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function At(t){var e=t.reference,n=t.element,r=t.placement,i=r?Z(r):null,o=r?fe(r):null,a=e.x+e.width/2-n.width/2,s=e.y+e.height/2-n.height/2,l;switch(i){case j:l={x:a,y:e.y-n.height};break;case Y:l={x:a,y:e.y+e.height};break;case z:l={x:e.x+e.width,y:s};break;case q:l={x:e.x-n.width,y:s};break;default:l={x:e.x,y:e.y}}var p=i?Ye(i):null;if(p!=null){var c=p==="y"?"height":"width";switch(o){case Me:l[p]=l[p]-(e[c]/2-n[c]/2);break;case Ke:l[p]=l[p]+(e[c]/2-n[c]/2);break;default:}}return l}function we(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,a=o===void 0?t.strategy:o,s=n.boundary,l=s===void 0?Zr:s,p=n.rootBoundary,c=p===void 0?vn:p,f=n.elementContext,g=f===void 0?gt:f,d=n.altBoundary,v=d===void 0?!1:d,y=n.padding,h=y===void 0?0:y,w=Nt(typeof h!="number"?h:Rt(h,He)),_=g===gt?ei:gt,P=t.rects.popper,u=t.elements[v?_:g],C=Zn(ce(u)?u:u.contextElement||ee(t.elements.popper),l,c,a),b=ue(t.elements.reference),T=At({reference:b,element:P,strategy:"absolute",placement:i}),F=wt(Object.assign({},P,T)),A=g===gt?F:b,D={top:C.top-A.top+w.top,bottom:A.bottom-C.bottom+w.bottom,left:C.left-A.left+w.left,right:A.right-C.right+w.right},M=t.modifiersData.offset;if(g===gt&&M){var N=M[i];Object.keys(D).forEach(function(U){var te=[z,Y].indexOf(U)>=0?1:-1,k=[j,Y].indexOf(U)>=0?"y":"x";D[U]+=N[k]*te})}return D}function er(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,p=l===void 0?yn:l,c=fe(r),f=c?s?Yn:Yn.filter(function(v){return fe(v)===c}):He,g=f.filter(function(v){return p.indexOf(v)>=0});g.length===0&&(g=f);var d=g.reduce(function(v,y){return v[y]=we(t,{placement:y,boundary:i,rootBoundary:o,padding:a})[Z(y)],v},{});return Object.keys(d).sort(function(v,y){return d[v]-d[y]})}function us(t){if(Z(t)===hn)return[];var e=yt(t);return[bn(t),e,bn(e)]}function fs(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,p=n.padding,c=n.boundary,f=n.rootBoundary,g=n.altBoundary,d=n.flipVariations,v=d===void 0?!0:d,y=n.allowedAutoPlacements,h=e.options.placement,w=Z(h),_=w===h,P=l||(_||!v?[yt(h)]:us(h)),u=[h].concat(P).reduce(function(Pe,he){return Pe.concat(Z(he)===hn?er(e,{placement:he,boundary:c,rootBoundary:f,padding:p,flipVariations:v,allowedAutoPlacements:y}):he)},[]),C=e.rects.reference,b=e.rects.popper,T=new Map,F=!0,A=u[0],D=0;D<u.length;D++){var M=u[D],N=Z(M),U=fe(M)===Me,te=[j,Y].indexOf(N)>=0,k=te?"width":"height",R=we(e,{placement:M,boundary:c,rootBoundary:f,altBoundary:g,padding:p}),I=te?U?z:q:U?Y:j;C[k]>b[k]&&(I=yt(I));var V=yt(I),ie=[];if(o&&ie.push(R[N]<=0),s&&ie.push(R[I]<=0,R[V]<=0),ie.every(function(Pe){return Pe})){A=M,F=!1;break}T.set(M,ie)}if(F)for(var _e=v?3:1,Ue=function(he){var Ee=u.find(function(st){var Te=T.get(st);if(Te)return Te.slice(0,he).every(function(at){return at})});if(Ee)return A=Ee,"break"},xe=_e;xe>0;xe--){var Be=Ue(xe);if(Be==="break")break}e.placement!==A&&(e.modifiersData[r]._skip=!0,e.placement=A,e.reset=!0)}}var pi={name:"flip",enabled:!0,phase:"main",fn:fs,requiresIfExists:["offset"],data:{_skip:!1}};function ci(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ui(t){return[j,z,Y,q].some(function(e){return t[e]>=0})}function ds(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,a=we(e,{elementContext:"reference"}),s=we(e,{altBoundary:!0}),l=ci(a,r),p=ci(s,i,o),c=ui(l),f=ui(p);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:p,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var fi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ds};function ms(t,e,n){var r=Z(t),i=[q,j].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[q,z].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function gs(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,a=yn.reduce(function(c,f){return c[f]=ms(f,e.rects,o),c},{}),s=a[e.placement],l=s.x,p=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=p),e.modifiersData[r]=a}var di={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gs};function hs(t){var e=t.state,n=t.name;e.modifiersData[n]=At({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var mi={name:"popperOffsets",enabled:!0,phase:"read",fn:hs,data:{}};function tr(t){return t==="x"?"y":"x"}function vs(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,p=n.rootBoundary,c=n.altBoundary,f=n.padding,g=n.tether,d=g===void 0?!0:g,v=n.tetherOffset,y=v===void 0?0:v,h=we(e,{boundary:l,rootBoundary:p,padding:f,altBoundary:c}),w=Z(e.placement),_=fe(e.placement),P=!_,u=Ye(w),C=tr(u),b=e.modifiersData.popperOffsets,T=e.rects.reference,F=e.rects.popper,A=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,D=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,N={x:0,y:0};if(b){if(o){var U,te=u==="y"?j:q,k=u==="y"?Y:z,R=u==="y"?"height":"width",I=b[u],V=I+h[te],ie=I-h[k],_e=d?-F[R]/2:0,Ue=_===Me?T[R]:F[R],xe=_===Me?-F[R]:-T[R],Be=e.elements.arrow,Pe=d&&Be?Ge(Be):{width:0,height:0},he=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Dt(),Ee=he[te],st=he[k],Te=Xe(0,T[R],Pe[R]),at=P?T[R]/2-_e-Te-Ee-D.mainAxis:Ue-Te-Ee-D.mainAxis,Fe=P?-T[R]/2+_e+Te+st+D.mainAxis:xe+Te+st+D.mainAxis,lt=e.elements.arrow&&ye(e.elements.arrow),zt=lt?u==="y"?lt.clientTop||0:lt.clientLeft||0:0,_t=(U=M==null?void 0:M[u])!=null?U:0,Gt=I+at-_t-zt,Yt=I+Fe-_t,xt=Xe(d?ze(V,Gt):V,I,d?ve(ie,Yt):ie);b[u]=xt,N[u]=xt-I}if(s){var kt,Xt=u==="x"?j:q,Jt=u==="x"?Y:z,Se=b[C],We=C==="y"?"height":"width",Ct=Se+h[Xt],je=Se-h[Jt],Pt=[j,q].indexOf(w)!==-1,Qt=(kt=M==null?void 0:M[C])!=null?kt:0,Zt=Pt?Ct:Se-T[We]-F[We]-Qt+D.altAxis,en=Pt?Se+T[We]+F[We]-Qt-D.altAxis:je,tn=d&&Pt?ri(Zt,Se,en):Xe(d?Zt:Ct,Se,d?en:je);b[C]=tn,N[C]=tn-Se}e.modifiersData[r]=N}}var gi={name:"preventOverflow",enabled:!0,phase:"main",fn:vs,requiresIfExists:["offset"]};function nr(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function rr(t){return t===B(t)||!X(t)?Je(t):nr(t)}function ys(t){var e=t.getBoundingClientRect(),n=Oe(e.width)/t.offsetWidth||1,r=Oe(e.height)/t.offsetHeight||1;return n!==1||r!==1}function ir(t,e,n){n===void 0&&(n=!1);var r=X(e),i=X(e)&&ys(e),o=ee(e),a=ue(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Q(e)!=="body"||Ze(o))&&(s=rr(e)),X(e)?(l=ue(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=Qe(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function ws(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=e.get(s);l&&i(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function or(t){var e=ws(t);return ti.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function sr(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function ar(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var hi={placement:"bottom",modifiers:[],strategy:"absolute"};function vi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function yi(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?hi:i;return function(s,l,p){p===void 0&&(p=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},hi,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},f=[],g=!1,d={state:c,setOptions:function(w){var _=typeof w=="function"?w(c.options):w;y(),c.options=Object.assign({},o,c.options,_),c.scrollParents={reference:ce(s)?Ve(s):s.contextElement?Ve(s.contextElement):[],popper:Ve(l)};var P=or(ar([].concat(r,c.options.modifiers)));return c.orderedModifiers=P.filter(function(u){return u.enabled}),v(),d.update()},forceUpdate:function(){if(!g){var w=c.elements,_=w.reference,P=w.popper;if(vi(_,P)){c.rects={reference:ir(_,ye(P),c.options.strategy==="fixed"),popper:Ge(P)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(D){return c.modifiersData[D.name]=Object.assign({},D.data)});for(var u=0;u<c.orderedModifiers.length;u++){if(c.reset===!0){c.reset=!1,u=-1;continue}var C=c.orderedModifiers[u],b=C.fn,T=C.options,F=T===void 0?{}:T,A=C.name;typeof b=="function"&&(c=b({state:c,options:F,name:A,instance:d})||c)}}}},update:sr(function(){return new Promise(function(h){d.forceUpdate(),h(c)})}),destroy:function(){y(),g=!0}};if(!vi(s,l))return d;d.setOptions(p).then(function(h){!g&&p.onFirstUpdate&&p.onFirstUpdate(h)});function v(){c.orderedModifiers.forEach(function(h){var w=h.name,_=h.options,P=_===void 0?{}:_,u=h.effect;if(typeof u=="function"){var C=u({state:c,name:w,instance:d,options:P}),b=function(){};f.push(C||b)}})}function y(){f.forEach(function(h){return h()}),f=[]}return d}}var bs=[ai,mi,si,It,di,pi,gi,ii,fi],lr=yi({defaultModifiers:bs});var _s="tippy-box",Si="tippy-content",xs="tippy-backdrop",Li="tippy-arrow",Ii="tippy-svg-arrow",et={passive:!0,capture:!0},Mi=function(){return document.body};function pr(t,e,n){if(Array.isArray(t)){var r=t[e];return r==null?Array.isArray(n)?n[e]:n:r}return t}function mr(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Oi(t,e){return typeof t=="function"?t.apply(void 0,e):t}function wi(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function ks(t){return t.split(/\s+/).filter(Boolean)}function bt(t){return[].concat(t)}function bi(t,e){t.indexOf(e)===-1&&t.push(e)}function Cs(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function Ps(t){return t.split("-")[0]}function Cn(t){return[].slice.call(t)}function _i(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function Ft(){return document.createElement("div")}function Pn(t){return["Element","Fragment"].some(function(e){return mr(t,e)})}function Es(t){return mr(t,"NodeList")}function Ts(t){return mr(t,"MouseEvent")}function Di(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Ss(t){return Pn(t)?[t]:Es(t)?Cn(t):Array.isArray(t)?t:Cn(document.querySelectorAll(t))}function cr(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function xi(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function Ls(t){var e,n=bt(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function Is(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var o=i.popperRect,a=i.popperState,s=i.props,l=s.interactiveBorder,p=Ps(a.placement),c=a.modifiersData.offset;if(!c)return!0;var f=p==="bottom"?c.top.y:0,g=p==="top"?c.bottom.y:0,d=p==="right"?c.left.x:0,v=p==="left"?c.right.x:0,y=o.top-r+f>l,h=r-o.bottom-g>l,w=o.left-n+d>l,_=n-o.right-v>l;return y||h||w||_})}function ur(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function ki(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Ce={isTouch:!1},Ci=0;function Ms(){Ce.isTouch||(Ce.isTouch=!0,window.performance&&document.addEventListener("mousemove",Ni))}function Ni(){var t=performance.now();t-Ci<20&&(Ce.isTouch=!1,document.removeEventListener("mousemove",Ni)),Ci=t}function Os(){var t=document.activeElement;if(Di(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Ds(){document.addEventListener("touchstart",Ms,et),window.addEventListener("blur",Os)}var Ns=typeof window!="undefined"&&typeof document!="undefined",Rs=Ns?!!window.msCrypto:!1;var As={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Fs={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},be=Object.assign({appendTo:Mi,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},As,Fs),Ws=Object.keys(be),Hs=function(e){var n=Object.keys(e);n.forEach(function(r){be[r]=e[r]})};function Ri(t){var e=t.plugins||[],n=e.reduce(function(r,i){var o=i.name,a=i.defaultValue;if(o){var s;r[o]=t[o]!==void 0?t[o]:(s=be[o])!=null?s:a}return r},{});return Object.assign({},t,n)}function Vs(t,e){var n=e?Object.keys(Ri(Object.assign({},be,{plugins:e}))):Ws,r=n.reduce(function(i,o){var a=(t.getAttribute("data-tippy-"+o)||"").trim();if(!a)return i;if(o==="content")i[o]=a;else try{i[o]=JSON.parse(a)}catch(s){i[o]=a}return i},{});return r}function Pi(t,e){var n=Object.assign({},e,{content:Oi(e.content,[t])},e.ignoreAttributes?{}:Vs(t,e.plugins));return n.aria=Object.assign({},be.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var Us=function(){return"innerHTML"};function fr(t,e){t[Us()]=e}function Ei(t){var e=Ft();return t===!0?e.className=Li:(e.className=Ii,Pn(t)?e.appendChild(t):fr(e,t)),e}function Ti(t,e){Pn(e.content)?(fr(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?fr(t,e.content):t.textContent=e.content)}function dr(t){var e=t.firstElementChild,n=Cn(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Si)}),arrow:n.find(function(r){return r.classList.contains(Li)||r.classList.contains(Ii)}),backdrop:n.find(function(r){return r.classList.contains(xs)})}}function Ai(t){var e=Ft(),n=Ft();n.className=_s,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Ft();r.className=Si,r.setAttribute("data-state","hidden"),Ti(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(o,a){var s=dr(e),l=s.box,p=s.content,c=s.arrow;a.theme?l.setAttribute("data-theme",a.theme):l.removeAttribute("data-theme"),typeof a.animation=="string"?l.setAttribute("data-animation",a.animation):l.removeAttribute("data-animation"),a.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?l.setAttribute("role",a.role):l.removeAttribute("role"),(o.content!==a.content||o.allowHTML!==a.allowHTML)&&Ti(p,t.props),a.arrow?c?o.arrow!==a.arrow&&(l.removeChild(c),l.appendChild(Ei(a.arrow))):l.appendChild(Ei(a.arrow)):c&&l.removeChild(c)}return{popper:e,onUpdate:i}}Ai.$$tippy=!0;var Bs=1,xn=[],kn=[];function js(t,e){var n=Pi(t,Object.assign({},be,Ri(_i(e)))),r,i,o,a=!1,s=!1,l=!1,p=!1,c,f,g,d=[],v=wi(Gt,n.interactiveDebounce),y,h=Bs++,w=null,_=Cs(n.plugins),P={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},u={id:h,reference:t,popper:Ft(),popperInstance:w,props:n,state:P,plugins:_,clearDelayTimeouts:Zt,setProps:en,setContent:tn,show:wo,hide:bo,hideWithInteractivity:_o,enable:Pt,disable:Qt,unmount:xo,destroy:ko};if(!n.render)return u;var C=n.render(u),b=C.popper,T=C.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+u.id,u.popper=b,t._tippy=u,b._tippy=u;var F=_.map(function(m){return m.fn(u)}),A=t.hasAttribute("aria-expanded");return lt(),_e(),I(),V("onCreate",[u]),n.showOnCreate&&Ct(),b.addEventListener("mouseenter",function(){u.props.interactive&&u.state.isVisible&&u.clearDelayTimeouts()}),b.addEventListener("mouseleave",function(){u.props.interactive&&u.props.trigger.indexOf("mouseenter")>=0&&te().addEventListener("mousemove",v)}),u;function D(){var m=u.props.touch;return Array.isArray(m)?m:[m,0]}function M(){return D()[0]==="hold"}function N(){var m;return!!((m=u.props.render)!=null&&m.$$tippy)}function U(){return y||t}function te(){var m=U().parentNode;return m?Ls(m):document}function k(){return dr(b)}function R(m){return u.state.isMounted&&!u.state.isVisible||Ce.isTouch||c&&c.type==="focus"?0:pr(u.props.delay,m?0:1,be.delay)}function I(m){m===void 0&&(m=!1),b.style.pointerEvents=u.props.interactive&&!m?"":"none",b.style.zIndex=""+u.props.zIndex}function V(m,x,E){if(E===void 0&&(E=!0),F.forEach(function(O){O[m]&&O[m].apply(O,x)}),E){var W;(W=u.props)[m].apply(W,x)}}function ie(){var m=u.props.aria;if(m.content){var x="aria-"+m.content,E=b.id,W=bt(u.props.triggerTarget||t);W.forEach(function(O){var ne=O.getAttribute(x);if(u.state.isVisible)O.setAttribute(x,ne?ne+" "+E:E);else{var le=ne&&ne.replace(E,"").trim();le?O.setAttribute(x,le):O.removeAttribute(x)}})}}function _e(){if(!(A||!u.props.aria.expanded)){var m=bt(u.props.triggerTarget||t);m.forEach(function(x){u.props.interactive?x.setAttribute("aria-expanded",u.state.isVisible&&x===U()?"true":"false"):x.removeAttribute("aria-expanded")})}}function Ue(){te().removeEventListener("mousemove",v),xn=xn.filter(function(m){return m!==v})}function xe(m){if(!(Ce.isTouch&&(l||m.type==="mousedown"))){var x=m.composedPath&&m.composedPath()[0]||m.target;if(!(u.props.interactive&&ki(b,x))){if(bt(u.props.triggerTarget||t).some(function(E){return ki(E,x)})){if(Ce.isTouch||u.state.isVisible&&u.props.trigger.indexOf("click")>=0)return}else V("onClickOutside",[u,m]);u.props.hideOnClick===!0&&(u.clearDelayTimeouts(),u.hide(),s=!0,setTimeout(function(){s=!1}),u.state.isMounted||Ee())}}}function Be(){l=!0}function Pe(){l=!1}function he(){var m=te();m.addEventListener("mousedown",xe,!0),m.addEventListener("touchend",xe,et),m.addEventListener("touchstart",Pe,et),m.addEventListener("touchmove",Be,et)}function Ee(){var m=te();m.removeEventListener("mousedown",xe,!0),m.removeEventListener("touchend",xe,et),m.removeEventListener("touchstart",Pe,et),m.removeEventListener("touchmove",Be,et)}function st(m,x){at(m,function(){!u.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&x()})}function Te(m,x){at(m,x)}function at(m,x){var E=k().box;function W(O){O.target===E&&(ur(E,"remove",W),x())}if(m===0)return x();ur(E,"remove",f),ur(E,"add",W),f=W}function Fe(m,x,E){E===void 0&&(E=!1);var W=bt(u.props.triggerTarget||t);W.forEach(function(O){O.addEventListener(m,x,E),d.push({node:O,eventType:m,handler:x,options:E})})}function lt(){M()&&(Fe("touchstart",_t,{passive:!0}),Fe("touchend",Yt,{passive:!0})),ks(u.props.trigger).forEach(function(m){if(m!=="manual")switch(Fe(m,_t),m){case"mouseenter":Fe("mouseleave",Yt);break;case"focus":Fe(Rs?"focusout":"blur",xt);break;case"focusin":Fe("focusout",xt);break}})}function zt(){d.forEach(function(m){var x=m.node,E=m.eventType,W=m.handler,O=m.options;x.removeEventListener(E,W,O)}),d=[]}function _t(m){var x,E=!1;if(!(!u.state.isEnabled||kt(m)||s)){var W=((x=c)==null?void 0:x.type)==="focus";c=m,y=m.currentTarget,_e(),!u.state.isVisible&&Ts(m)&&xn.forEach(function(O){return O(m)}),m.type==="click"&&(u.props.trigger.indexOf("mouseenter")<0||a)&&u.props.hideOnClick!==!1&&u.state.isVisible?E=!0:Ct(m),m.type==="click"&&(a=!E),E&&!W&&je(m)}}function Gt(m){var x=m.target,E=U().contains(x)||b.contains(x);if(!(m.type==="mousemove"&&E)){var W=We().concat(b).map(function(O){var ne,le=O._tippy,pt=(ne=le.popperInstance)==null?void 0:ne.state;return pt?{popperRect:O.getBoundingClientRect(),popperState:pt,props:n}:null}).filter(Boolean);Is(W,m)&&(Ue(),je(m))}}function Yt(m){var x=kt(m)||u.props.trigger.indexOf("click")>=0&&a;if(!x){if(u.props.interactive){u.hideWithInteractivity(m);return}je(m)}}function xt(m){u.props.trigger.indexOf("focusin")<0&&m.target!==U()||u.props.interactive&&m.relatedTarget&&b.contains(m.relatedTarget)||je(m)}function kt(m){return Ce.isTouch?M()!==m.type.indexOf("touch")>=0:!1}function Xt(){Jt();var m=u.props,x=m.popperOptions,E=m.placement,W=m.offset,O=m.getReferenceClientRect,ne=m.moveTransition,le=N()?dr(b).arrow:null,pt=O?{getBoundingClientRect:O,contextElement:O.contextElement||U()}:t,Pr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(nn){var ct=nn.state;if(N()){var Co=k(),Fn=Co.box;["placement","reference-hidden","escaped"].forEach(function(rn){rn==="placement"?Fn.setAttribute("data-placement",ct.placement):ct.attributes.popper["data-popper-"+rn]?Fn.setAttribute("data-"+rn,""):Fn.removeAttribute("data-"+rn)}),ct.attributes.popper={}}}},$e=[{name:"offset",options:{offset:W}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!ne}},Pr];N()&&le&&$e.push({name:"arrow",options:{element:le,padding:3}}),$e.push.apply($e,(x==null?void 0:x.modifiers)||[]),u.popperInstance=lr(pt,b,Object.assign({},x,{placement:E,onFirstUpdate:g,modifiers:$e}))}function Jt(){u.popperInstance&&(u.popperInstance.destroy(),u.popperInstance=null)}function Se(){var m=u.props.appendTo,x,E=U();u.props.interactive&&m===Mi||m==="parent"?x=E.parentNode:x=Oi(m,[E]),x.contains(b)||x.appendChild(b),u.state.isMounted=!0,Xt()}function We(){return Cn(b.querySelectorAll("[data-tippy-root]"))}function Ct(m){u.clearDelayTimeouts(),m&&V("onTrigger",[u,m]),he();var x=R(!0),E=D(),W=E[0],O=E[1];Ce.isTouch&&W==="hold"&&O&&(x=O),x?r=setTimeout(function(){u.show()},x):u.show()}function je(m){if(u.clearDelayTimeouts(),V("onUntrigger",[u,m]),!u.state.isVisible){Ee();return}if(!(u.props.trigger.indexOf("mouseenter")>=0&&u.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(m.type)>=0&&a)){var x=R(!1);x?i=setTimeout(function(){u.state.isVisible&&u.hide()},x):o=requestAnimationFrame(function(){u.hide()})}}function Pt(){u.state.isEnabled=!0}function Qt(){u.hide(),u.state.isEnabled=!1}function Zt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function en(m){if(!u.state.isDestroyed){V("onBeforeUpdate",[u,m]),zt();var x=u.props,E=Pi(t,Object.assign({},x,_i(m),{ignoreAttributes:!0}));u.props=E,lt(),x.interactiveDebounce!==E.interactiveDebounce&&(Ue(),v=wi(Gt,E.interactiveDebounce)),x.triggerTarget&&!E.triggerTarget?bt(x.triggerTarget).forEach(function(W){W.removeAttribute("aria-expanded")}):E.triggerTarget&&t.removeAttribute("aria-expanded"),_e(),I(),T&&T(x,E),u.popperInstance&&(Xt(),We().forEach(function(W){requestAnimationFrame(W._tippy.popperInstance.forceUpdate)})),V("onAfterUpdate",[u,m])}}function tn(m){u.setProps({content:m})}function wo(){var m=u.state.isVisible,x=u.state.isDestroyed,E=!u.state.isEnabled,W=Ce.isTouch&&!u.props.touch,O=pr(u.props.duration,0,be.duration);if(!(m||x||E||W)&&!U().hasAttribute("disabled")&&(V("onShow",[u],!1),u.props.onShow(u)!==!1)){if(u.state.isVisible=!0,N()&&(b.style.visibility="visible"),I(),he(),u.state.isMounted||(b.style.transition="none"),N()){var ne=k(),le=ne.box,pt=ne.content;cr([le,pt],0)}g=function(){var $e;if(!(!u.state.isVisible||p)){if(p=!0,b.offsetHeight,b.style.transition=u.props.moveTransition,N()&&u.props.animation){var An=k(),nn=An.box,ct=An.content;cr([nn,ct],O),xi([nn,ct],"visible")}ie(),_e(),bi(kn,u),($e=u.popperInstance)==null||$e.forceUpdate(),V("onMount",[u]),u.props.animation&&N()&&Te(O,function(){u.state.isShown=!0,V("onShown",[u])})}},Se()}}function bo(){var m=!u.state.isVisible,x=u.state.isDestroyed,E=!u.state.isEnabled,W=pr(u.props.duration,1,be.duration);if(!(m||x||E)&&(V("onHide",[u],!1),u.props.onHide(u)!==!1)){if(u.state.isVisible=!1,u.state.isShown=!1,p=!1,a=!1,N()&&(b.style.visibility="hidden"),Ue(),Ee(),I(!0),N()){var O=k(),ne=O.box,le=O.content;u.props.animation&&(cr([ne,le],W),xi([ne,le],"hidden"))}ie(),_e(),u.props.animation?N()&&st(W,u.unmount):u.unmount()}}function _o(m){te().addEventListener("mousemove",v),bi(xn,v),v(m)}function xo(){u.state.isVisible&&u.hide(),u.state.isMounted&&(Jt(),We().forEach(function(m){m._tippy.unmount()}),b.parentNode&&b.parentNode.removeChild(b),kn=kn.filter(function(m){return m!==u}),u.state.isMounted=!1,V("onHidden",[u]))}function ko(){u.state.isDestroyed||(u.clearDelayTimeouts(),u.unmount(),zt(),delete t._tippy,u.state.isDestroyed=!0,V("onDestroy",[u]))}}function Wt(t,e){e===void 0&&(e={});var n=be.plugins.concat(e.plugins||[]);Ds();var r=Object.assign({},e,{plugins:n}),i=Ss(t);if(0)var o,a;var s=i.reduce(function(l,p){var c=p&&js(p,r);return c&&l.push(c),l},[]);return Pn(t)?s[0]:s}Wt.defaultProps=be;Wt.setDefaultProps=Hs;Wt.currentInput=Ce;var Fi=function(e){var n=e===void 0?{}:e,r=n.exclude,i=n.duration;kn.forEach(function(o){var a=!1;if(r&&(a=Di(r)?o.reference===r:o.popper===r.popper),!a){var s=o.props.duration;o.setProps({duration:i}),o.hide(),o.state.isDestroyed||o.setProps({duration:s})}})},Eu=Object.assign({},It,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Wt.setDefaultProps({render:Ai});var En=Wt;var Wi=()=>L("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-more-horizontal",children:[L("title",{children:"More details icon"}),L("circle",{cx:"12",cy:"12",r:"1"}),L("circle",{cx:"19",cy:"12",r:"1"}),L("circle",{cx:"5",cy:"12",r:"1"})]});var Ht,K,gr,Hi,Sn=0,zi=[],G=H,Vi=G.__b,Ui=G.__r,Bi=G.diffed,ji=G.__c,$i=G.unmount,qi=G.__;function vr(t,e){G.__h&&G.__h(K,t,Sn||e),Sn=0;var n=K.__H||(K.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Gi(t){return Sn=1,$s(Qi,t)}function $s(t,e,n){var r=vr(Ht++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):Qi(void 0,e),function(s){var l=r.__N?r.__N[0]:r.__[0],p=r.t(l,s);l!==p&&(r.__N=[p,r.__[1]],r.__c.setState({}))}],r.__c=K,!K.__f)){var i=function(s,l,p){if(!r.__c.__H)return!0;var c=r.__c.__H.__.filter(function(g){return!!g.__c});if(c.every(function(g){return!g.__N}))return!o||o.call(this,s,l,p);var f=r.__c.props!==s;return c.forEach(function(g){if(g.__N){var d=g.__[0];g.__=g.__N,g.__N=void 0,d!==g.__[0]&&(f=!0)}}),o&&o.call(this,s,l,p)||f};K.__f=!0;var o=K.shouldComponentUpdate,a=K.componentWillUpdate;K.componentWillUpdate=function(s,l,p){if(this.__e){var c=o;o=void 0,i(s,l,p),o=c}a&&a.call(this,s,l,p)},K.shouldComponentUpdate=i}return r.__N||r.__}function Yi(t,e){var n=vr(Ht++,3);!G.__s&&Ji(n.__H,e)&&(n.__=t,n.u=e,K.__H.__h.push(n))}function Xi(t){return Sn=5,qs(function(){return{current:t}},[])}function qs(t,e){var n=vr(Ht++,7);return Ji(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Ks(){for(var t;t=zi.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Tn),t.__H.__h.forEach(hr),t.__H.__h=[]}catch(e){t.__H.__h=[],G.__e(e,t.__v)}}G.__b=function(t){K=null,Vi&&Vi(t)},G.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),qi&&qi(t,e)},G.__r=function(t){Ui&&Ui(t),Ht=0;var e=(K=t.__c).__H;e&&(gr===K?(e.__h=[],K.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Tn),e.__h.forEach(hr),e.__h=[],Ht=0)),gr=K},G.diffed=function(t){Bi&&Bi(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(zi.push(e)!==1&&Hi===G.requestAnimationFrame||((Hi=G.requestAnimationFrame)||zs)(Ks)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),gr=K=null},G.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Tn),n.__h=n.__h.filter(function(r){return!r.__||hr(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],G.__e(r,n.__v)}}),ji&&ji(t,e)},G.unmount=function(t){$i&&$i(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Tn(r)}catch(i){e=i}}),n.__H=void 0,e&&G.__e(e,n.__v))};var Ki=typeof requestAnimationFrame=="function";function zs(t){var e,n=function(){clearTimeout(r),Ki&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);Ki&&(e=requestAnimationFrame(n))}function Tn(t){var e=K,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),K=e}function hr(t){var e=K;t.__c=t.__(),K=e}function Ji(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function Qi(t,e){return typeof e=="function"?e(t):e}var Zi={"name-asc":{label:"Name",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-a-z"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><path d="M20 8h-5"/><path d="M15 10V6.5a2.5 2.5 0 0 1 5 0V10"/><path d="M15 14h5l-5 6h5"/></svg>'},"name-desc":{label:"Name",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-z-a"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M15 4h5l-5 6h5"/><path d="M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"/><path d="M20 18h-5"/></svg>'},"mtime-asc":{label:"Date",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-down-0-1"><path d="m3 16 4 4 4-4"/><path d="M7 20V4"/><rect x="15" y="4" width="4" height="6" ry="2"/><path d="M17 20v-6h-2"/><path d="M15 20h4"/></svg>'},"mtime-desc":{label:"Date",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up-1-0"><path d="m3 8 4-4 4 4"/><path d="M7 4v16"/><path d="M17 10V4h-2"/><path d="M15 10h4"/><rect x="15" y="14" width="4" height="6" ry="2"/></svg>'}},eo=({plugin:t,onChange:e})=>{let[n,r]=Gi(!1),i=Xi(null),o=()=>{r(!n)},a=async s=>{r(!1),t.settings.sortOptionDefault=s,await t.saveSettings(),e()};return Yi(()=>{let s=l=>{i.current&&!i.current.contains(l.target)&&r(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),L("div",{className:"snw-sort-dropdown-wrapper",ref:i,children:[L("button",{type:"button",onClick:o,class:"snw-sort-dropdown-button",children:L("div",{dangerouslySetInnerHTML:{__html:Zi[t.settings.sortOptionDefault].icon}})}),n&&L("ul",{className:"snw-sort-dropdown-list",children:Object.entries(Zi).map(([s,{label:l,icon:p}])=>L("li",{id:s,onClick:async c=>{c.stopPropagation(),await a(s)},class:"snw-sort-dropdown-list-item",children:[L("span",{dangerouslySetInnerHTML:{__html:p}}),L("span",{className:"snw-sort-dropdown-list-item-label",children:l})]}))})]})};var to=(t,e,n,r,i,o,a,s,l)=>{let p=L("div",{className:`${a?"snw-ref-title-popover":"snw-ref-title-side-pane"} tree-item-self is-clickable`,children:[L("div",{className:"snw-ref-title-popover-label","snw-ref-title-type":t,"snw-ref-title-reallink":e,"snw-ref-title-key":n,"snw-data-file-name":r,"snw-data-line-number":o.toString(),children:e}),L(eo,{plugin:s,onChange:l}),a&&L("span",{className:"snw-ref-title-popover-open-sidepane-icon","snw-ref-title-type":t,"snw-ref-title-reallink":e,"snw-ref-title-key":n,"snw-data-file-name":r,"snw-data-line-number":o.toString(),children:L("span",{className:"snw-ref-title-popover-icon",onClick:f=>{f.stopPropagation(),Fi({duration:0}),s.activateView(t,e,n,r,Number(o))},children:L(Wi,{})})})]}),c=createDiv();return ke(p,c),c};var tt;function io(t){tt=t}var yr=async(t,e,n,r,i,o)=>{let a=await no(t,n,r),s=createDiv();s.append(to(t,e,n,r,a.refCount,i,o,tt,async()=>{let p=s.querySelector(".snw-ref-area");if(p){for(p.style.visibility="hidden";p.firstChild;)p.removeChild(p.firstChild);p.style.visibility="visible";let c=await no(t,n,r);p.prepend(c.response),setTimeout(async()=>{await Ln(!1,p)},500)}}));let l=createDiv({cls:"snw-ref-area"});return l.append(a.response),s.append(l),s},Gs=(t,e)=>t.sort((n,r)=>{let i=n.sourceFile,o=r.sourceFile;switch(e){case"name-asc":return i==null?void 0:i.basename.localeCompare(o==null?void 0:o.basename);case"name-desc":return o==null?void 0:o.basename.localeCompare(i==null?void 0:i.basename);case"mtime-asc":return(i==null?void 0:i.stat.mtime)-(o==null?void 0:o.stat.mtime);case"mtime-desc":return(o==null?void 0:o.stat.mtime)-(i==null?void 0:i.stat.mtime);default:return 0}}),no=async(t,e,n)=>{var f,g,d;let r=0,i=null;if(t==="File"){let v=Le(),y=[];for(let h of v.values())for(let w of h)w!=null&&w.resolvedFile&&((f=w==null?void 0:w.resolvedFile)==null?void 0:f.path)===n&&y.push(w);r=y.length,i=y}else{let v=Le().get(e);v===void 0&&(v=Le().get(e));let y=await Ys(v);r=y.length,i=y}let o=Array.from(new Set(i.map(v=>{var y;return(y=v.sourceFile)==null?void 0:y.path}))).map(v=>i.find(y=>{var h;return((h=y.sourceFile)==null?void 0:h.path)===v})),a=Gs(o,tt.settings.sortOptionDefault),s=createDiv(),l=tt.settings.maxFileCountToDisplay;r<l&&(l=r);let p=0,c=null;tt.settings.displayCustomPropertyList.trim()!==""&&(c=tt.settings.displayCustomPropertyList.split(",").map(v=>v.trim()));for(let v=0;v<a.length;v++){if(p>l)continue;let y=a[v],h=createDiv();h.addClass("snw-ref-item-container"),h.addClass("tree-item"),s.appendChild(h);let w=createDiv();w.addClass("snw-ref-item-file"),w.addClass("tree-item-self"),w.addClass("search-result-file-title"),w.addClass("is-clickable"),w.setAttribute("snw-data-line-number","-1"),w.setAttribute("snw-data-file-name",y.sourceFile.path),w.setAttribute("data-href",y.sourceFile.path),w.setAttribute("href",y.sourceFile.path);let _=createDiv();_.addClass("snw-ref-item-file-icon"),_.addClass("tree-item-icon"),_.addClass("collapse-icon"),(0,ro.setIcon)(_,"file-box");let P=createDiv();if(P.addClass("snw-ref-item-file-label"),P.addClass("tree-item-inner"),P.innerText=y.sourceFile.basename,w.append(_),w.append(P),h.appendChild(w),c!=null){let C=y.sourceFile?tt.app.metadataCache.getFileCache(y.sourceFile):null;c.forEach(b=>{var F;let T=(F=C==null?void 0:C.frontmatter)==null?void 0:F[b];if(T){let A=L("div",{class:"snw-custom-property-container",children:[L("span",{class:"snw-custom-property-name",children:b}),L("span",{class:"snw-custom-property-text",children:[": ",T]})]}),D=createDiv();ke(A,D),P.append(D)}})}let u=createDiv();u.addClass("snw-ref-item-collection-items"),u.addClass("search-result-file-matches"),h.appendChild(u);for(let C of i)((g=y.sourceFile)==null?void 0:g.path)===((d=C.sourceFile)==null?void 0:d.path)&&p<l&&(p+=1,u.appendChild(await Qr(C)))}return{response:s,refCount:r}},Ys=async t=>t.sort((e,n)=>{var o;let r=0;e.reference.position!==void 0&&(r=Number(e.reference.position.start.line));let i=0;return n.reference.position!==void 0&&(i=Number(n.reference.position.start.line)),((o=e.sourceFile)==null?void 0:o.basename.localeCompare(n.sourceFile.basename))||Number(r)-Number(i)});var nt;function oo(t){nt=t,Jr(nt)}var In=async t=>{let{refType:e,realLink:n,key:r,filePath:i,lineNu:o}=await Xs(t),a=createDiv();a.addClass("snw-popover-container"),a.addClass("search-result-container"),a.appendChild(await yr(e,n,r,i,o,!0)),t.setContent(a),setTimeout(async()=>{await Ln(!1,a)},500),mn(a)},so=async(t,e,n,r,i)=>{let o=createDiv();return o.addClass("snw-sidepane-container"),o.addClass("search-result-container"),o.append(await yr(t,e,n,r,i,!1)),setTimeout(async()=>{await Ln(!1,o)},500),o},Ln=async(t,e)=>{e.querySelectorAll(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-popover-label").forEach(r=>{r.getAttribute("snw-has-handler")||(r.setAttribute("snw-has-handler","true"),r.addEventListener("click",async i=>{var c,f;i.preventDefault();let o=i.target.closest(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-popover-label");if(!o)return;let a=Number(o.getAttribute("snw-data-line-number")),s=o.getAttribute("snw-data-file-name"),l=app.metadataCache.getFirstLinkpathDest(s,s);if(!l){new rt.Notice(`File not found: ${s}. It may be a broken link.`);return}nt.app.workspace.getLeaf(rt.Keymap.isModEvent(i)).openFile(l);let p=o.getAttribute("snw-ref-title-key");if(p){if(p.contains("#^")){let g=Object.entries((c=nt.app.metadataCache.getFileCache(l))==null?void 0:c.blocks);if(g){let d=p.match(/#\^(.+)$/g)[0].replace("#^","").toLowerCase();a=g.find(y=>y[0]===d)[1].position.start.line}}else if(p.contains("#")){let g=(f=nt.app.metadataCache.getFileCache(l))==null?void 0:f.headings;if(g){let d=p.match(/#(.+)/g)[0].replace("#","");a=g.find(y=>y.heading.toLocaleUpperCase()===d).position.start.line}}}a>0&&setTimeout(()=>{try{let g=nt.app.workspace.getActiveViewOfType(rt.MarkdownView);g&&g.setEphemeralState({line:a})}catch(g){}},400)}),nt.app.internalPlugins.plugins["page-preview"].enabled===!0&&r.addEventListener("mouseover",i=>{i.preventDefault();let o=app.internalPlugins.plugins["page-preview"].instance.overrides["obsidian42-strange-new-worlds"]!==!1;if(o===!1||o===!0&&rt.Keymap.isModifier(i,"Mod")){let a=i.target,s={scroll:Number(a.getAttribute("snw-data-line-number"))},l=a.getAttribute("snw-data-file-name");l&&app.workspace.trigger("link-hover",{},a,l,"",s)}}))})},Xs=async t=>{let e=t.reference,n=e.getAttribute("data-snw-type")||"",r=e.getAttribute("data-snw-reallink")||"",i=e.getAttribute("data-snw-key")||"",o=e.getAttribute("data-snw-filepath")||"",a=Number(e.getAttribute("snw-data-line-number"))||0;return{refType:n,realLink:r,key:i,filePath:o,lineNu:a}};var Ne="Strange New Worlds",Mn=class extends ao.ItemView{constructor(e,n){super(e),this.plugin=n}getViewType(){return Ne}getDisplayText(){return Ne}getIcon(){return"file-digit"}async onOpen(){ke(L("div",{class:"snw-sidepane-loading",children:[L("div",{class:"snw-sidepane-loading-banner",children:"Discovering Strange New Worlds..."}),L("div",{class:"snw-sidepane-loading-subtext",children:"Click a reference counter in the main document for information to appear here."})]}),this.containerEl.querySelector(".view-content"))}async updateView(){let e=this.plugin;this.containerEl.replaceChildren(await so(e.lastSelectedReferenceType,e.lastSelectedReferenceRealLink,e.lastSelectedReferenceKey,e.lastSelectedReferenceFilePath,e.lastSelectedLineNumber)),mn(this.containerEl)}async onClose(){}};var Bt=require("obsidian");var Vt=require("obsidian");var Ut;function lo(t){Ut=t}function de(t,e,n,r,i,o,a){let s=L("div",{className:`snw-reference snw-${e} ${o}`,"data-snw-type":e,"data-snw-reallink":n,"data-snw-key":r.toLocaleUpperCase(),"data-snw-filepath":i,"snw-data-line-number":a.toString(),children:t.toString()}),l=createDiv();ke(s,l);let p=l.firstElementChild;(Vt.Platform.isDesktop||Vt.Platform.isDesktopApp)&&(p.onclick=async d=>On(d.target));let c=Ut.settings.requireModifierKeyToActivateSNWView,f=!0;return En(p,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onTrigger(d,v){let y=v;c!==!1&&(y.ctrlKey||y.metaKey?f=!0:f=!1)},onShow(d){if(!f)return!1;setTimeout(async()=>{await In(d)},1)}}).popper.classList.add("snw-tippy"),l}var On=async t=>{var a,s,l,p,c;let e=(a=t.getAttribute("data-snw-type"))!=null?a:"",n=(s=t.getAttribute("data-snw-realLink"))!=null?s:"",r=(l=t.getAttribute("data-snw-key"))!=null?l:"",i=(p=t.getAttribute("data-snw-filepath"))!=null?p:"",o=(c=t.getAttribute("snw-data-line-number"))!=null?c:"";Ut.activateView(e,n,r,i,Number(o))},wr=(0,Vt.debounce)(()=>{var e,n;let t=document.querySelectorAll(".snw-liveupdate");for(let r of Array.from(t)){let i=(n=(e=Ut.snwAPI.references.get(r.dataset.snwKey))==null?void 0:e.length)!=null?n:0;if(i<Ut.settings.minimumRefCountThreshold){r.remove();continue}let o=String(i);r.textContent!==o&&(r.textContent=o)}},it,!0);var ot;function co(t){ot=t}function Js(){ot.app.workspace.iterateAllLeaves(t=>{(t.view.getViewType()==="markdown"||t.view.getViewType()==="file-properties")&&Qs(t.view)})}var Dn=(0,Bt.debounce)(()=>{Js()},it,!0);function Qs(t){var i,o,a;if(!ot.showCountsActive)return;let e=Bt.Platform.isMobile||Bt.Platform.isMobileApp?ot.settings.displayPropertyReferencesMobile:ot.settings.displayPropertyReferences,n=t;if(!e||!(n!=null&&n.rawFrontmatter))return;let r=n.file?pe(n.file):{};if((i=r.frontmatterLinks)!=null&&i.length)for(let s of n.metadataEditor.rendered){let l=s.valueEl.querySelector(".metadata-link-inner.internal-link");if(l){let c=l.textContent,f=(o=r.frontmatterLinks)==null?void 0:o.find(g=>g.displayText===c);f&&po(l,f)}let p=s.valueEl.querySelectorAll(".multi-select-pill.internal-link .multi-select-pill-content span");if(p.length)for(let c of Array.from(p)){let f=c.textContent,g=(a=r.frontmatterLinks)==null?void 0:a.find(v=>v.displayText===f),d=c.parentElement;g&&d&&po(d,g)}}}function po(t,e){var i,o,a,s;let n=(i=t.parentElement)==null?void 0:i.querySelector(".snw-frontmatter-wrapper"),r=e.references.length;if(!n&&r>=ot.settings.minimumRefCountThreshold){n=createSpan({cls:"snw-frontmatter-wrapper"});let l=de(r,"link",e.references[0].realLink,e.key,(s=(a=(o=e.references[0])==null?void 0:o.resolvedFile)==null?void 0:a.path)!=null?s:"","snw-frontmatter-count",e.pos.start.line);n.appendChild(l),t.insertAdjacentElement("afterend",n)}else try{if(r>=ot.settings.minimumRefCountThreshold){let l=n==null?void 0:n.querySelector(".snw-frontmatter-count");l&&(l.innerText=` ${r} `)}else n==null||n.remove()}catch(l){}}var $t=require("obsidian");var jt;function uo(t){jt=t}function Zs(){!jt.settings.displayIncomingFilesheader||!jt.showCountsActive||jt.app.workspace.iterateAllLeaves(t=>{t.view.getViewType()==="markdown"&&ea(t.view)})}var Nn=(0,$t.debounce)(()=>{Zs()},it,!0);function ea(t){var c,f,g;let e=t.file;if(!e)return;let n=Le(),r=0;for(let d of n.values())for(let v of d)v!=null&&v.resolvedFile&&((c=v==null?void 0:v.resolvedFile)==null?void 0:c.path)===e.path&&r++;let i=pe(e);if(((g=(f=i==null?void 0:i.cacheMetaData)==null?void 0:f.frontmatter)==null?void 0:g["snw-file-exclude"])===!0&&(r=0),r<1){let d=t.contentEl.querySelector(".snw-header-count-wrapper");d&&d.remove();return}let o=t.contentEl.querySelector(".snw-header-count");if(o&&o.dataset.snwKey===e.basename){o.innerText=` ${r.toString()} `;return}let a=t.contentEl,s=a.querySelector(".snw-header-count-wrapper");s?o=a.querySelector(".snw-header-count"):(s=createDiv({cls:"snw-reference snw-header-count-wrapper"}),o=createDiv({cls:"snw-header-count"}),s.appendChild(o),a.prepend(s)),o&&(o.innerText=` ${r.toString()} `),($t.Platform.isDesktop||$t.Platform.isDesktopApp)&&o&&(o.onclick=d=>{d.stopPropagation(),s&&On(s)}),s.setAttribute("data-snw-reallink",e.basename),s.setAttribute("data-snw-key",e.basename),s.setAttribute("data-snw-type","File"),s.setAttribute("data-snw-filepath",e.path),s.onclick=d=>{d.stopPropagation(),On(d.target)};let l=!0;En(s,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onTrigger(d,v){let y=v;jt.settings.requireModifierKeyToActivateSNWView!==!1&&(y.ctrlKey||y.metaKey?l=!0:l=!1)},onShow(d){if(!l)return!1;setTimeout(async()=>{await In(d)},1)}}).popper.classList.add("snw-tippy")}var qt=require("@codemirror/view"),fo=require("obsidian");var br;function mo(t){br=t}var ta=class extends qt.GutterMarker{constructor(t,e,n,r,i,o){super(),this.referenceCount=t,this.referenceType=e,this.realLink=n,this.key=r,this.filePath=i,this.addCssClass=o}toDOM(){return de(this.referenceCount,this.referenceType,this.realLink,this.key,this.filePath,this.addCssClass,0)}},na=new class extends qt.GutterMarker{toDOM(){return document.createTextNode("\xF8\xF8\xF8")}},ra=(0,qt.gutter)({class:"snw-gutter-ref",lineMarker(t,e){var a,s,l,p,c,f,g,d,v;let n=t.state.field(fo.editorInfoField);if(((a=n.currentMode)==null?void 0:a.sourceMode)===!0&&br.settings.displayInlineReferencesInSourceMode===!1||!n.file)return null;let r=pe(n.file);if(((l=(s=r==null?void 0:r.cacheMetaData)==null?void 0:s.frontmatter)==null?void 0:l["snw-file-exclude"])===!0||((c=(p=r==null?void 0:r.cacheMetaData)==null?void 0:p.frontmatter)==null?void 0:c["snw-canvas-exclude-edit"])===!0)return null;let i=(f=n.app.metadataCache.getFileCache(n.file))==null?void 0:f.embeds;if(!i||!i.length)return null;let o=t.state.doc.lineAt(e.from).number;for(let y of i)if(y.position.start.line+1===o){for(let h of(g=r==null?void 0:r.embeds)!=null?g:[])if((h==null?void 0:h.references.length)>=Math.max(2,br.settings.minimumRefCountThreshold)&&(h==null?void 0:h.pos.start.line)+1===o){let w=t.state.doc.lineAt(e.from).text.trim();if(w.startsWith("!")){let _=w.replace("![[","").replace("]]","").split("|")[0];if((_.startsWith("#")?n.file+_:J(_)||_).toLocaleUpperCase()===h.key)return new ta(h.references.length,"embed",h.references[0].realLink,h.key,(v=(d=h.references[0].resolvedFile)==null?void 0:d.path)!=null?v:"","snw-embed-special snw-liveupdate")}}}return null},initialSpacer:()=>na}),go=ra;var Re=require("@codemirror/view"),Ae=require("obsidian");var me;function ho(t){me=t}var vo=Re.ViewPlugin.fromClass(class{constructor(t){this.view=t;this.decorations=Re.Decoration.none;this.regxPattern="";me.settings.enableRenderingBlockIdInLivePreview&&(this.regxPattern="(\\s\\^)(\\S+)$"),me.settings.enableRenderingEmbedsInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}!\\[\\[(.*?)\\]\\]`),me.settings.enableRenderingLinksInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}\\[\\[(.*?)\\]\\]`),me.settings.enableRenderingHeadersInLivePreview&&(this.regxPattern+=`${this.regxPattern!==""?"|":""}^#+\\s.+`),this.regxPattern!==""&&(this.decorator=new Re.MatchDecorator({regexp:new RegExp(this.regxPattern,"g"),decorate:(e,n,r,i,o)=>{var c,f,g,d,v,y,h,w,_,P,u,C,b,T,F,A,D,M,N,U,te;let a=o.state.field(Ae.editorInfoField),s=[],l=null;if(!a.file&&(me.settings.enableRenderingEmbedsInLivePreview||me.settings.enableRenderingLinksInLivePreview)){let k=i[0].replace(/^\[\[|\]\]$|^!\[\[|\]\]$/g,""),R=J(k).toLocaleUpperCase();if(R){let I=i.input.startsWith("!")?"embed":"link";l=me.app.metadataCache.getFirstLinkpathDest((0,Ae.parseLinktext)(k).path,"/");let V=me.snwAPI.references.get(R),ie=[{key:R,page:l.path,type:I,pos:{start:{line:0,ch:0,col:0,offset:0},end:{line:0,ch:0,col:0,offset:0}},references:V!=null?V:[]}];s.push({key:R,transformedCachedItem:ie!=null?ie:null,refType:I,from:r,to:r})}}else{if(me.settings.displayInlineReferencesInSourceMode===!1&&((c=a.currentMode)==null?void 0:c.sourceMode)===!0)return null;l=a.file;let k=pe(l);if((k.links||k.headings||k.embeds||k.blocks)&&((g=(f=k==null?void 0:k.cacheMetaData)==null?void 0:f.frontmatter)==null?void 0:g["snw-file-exclude"])!==!0&&((v=(d=k==null?void 0:k.cacheMetaData)==null?void 0:d.frontmatter)==null?void 0:v["snw-canvas-exclude-edit"])!==!0){let R=i[0].charAt(0);if(R==="["&&((h=(y=k==null?void 0:k.links)==null?void 0:y.length)!=null?h:0)>0){let I=i[0].replace("[[","").replace("]]","");I.startsWith("#")&&(I=l.path+I),I=I.toLocaleUpperCase(),s.push({key:I,transformedCachedItem:(w=k.links)!=null?w:null,refType:"link",from:r,to:r})}else if(R==="#"&&((u=((_=k==null?void 0:k.headings)==null?void 0:_.length)||((P=k==null?void 0:k.links)==null?void 0:P.length))!=null?u:0)>0){if(s.push({key:(0,Ae.stripHeading)(i[0].replace(/^#+/,"").substring(1)),transformedCachedItem:(C=k.headings)!=null?C:null,refType:"heading",from:r,to:r}),me.settings.enableRenderingLinksInLivePreview){let I=i[0].match(/\[\[(.*?)\]\]|!\[\[(.*?)\]\]/g);if(I)for(let V of I)s.push({key:V.replace("![[","").replace("[[","").replace("]]","").toLocaleUpperCase(),transformedCachedItem:V.startsWith("!")?(b=k.embeds)!=null?b:null:(T=k.links)!=null?T:null,refType:"link",from:r-i[0].length+(i[0].indexOf(V)+V.length),to:r-i[0].length+(i[0].indexOf(V)+V.length)})}}else if(R==="!"&&((A=(F=k==null?void 0:k.embeds)==null?void 0:F.length)!=null?A:0)>0){let I=i[0].replace("![[","").replace("]]","");I.startsWith("#")&&(I=l.path+(0,Ae.stripHeading)(I)),s.push({key:I.toLocaleUpperCase(),transformedCachedItem:(D=k.embeds)!=null?D:null,refType:"embed",from:r,to:r})}else R===" "&&((N=(M=k==null?void 0:k.blocks)==null?void 0:M.length)!=null?N:0)>0&&s.push({key:(l.path+i[0].replace(" ^","#^")).toLocaleUpperCase(),transformedCachedItem:(U=k.blocks)!=null?U:null,refType:"block",from:r,to:r})}}if(s.length===0||!l)return;let p=s.sort((k,R)=>k.to===R.to?k.refType==="heading"?1:-1:k.to-R.to);for(let k of s)if(k.key!==""){let R=ia(k.refType,k.key,(te=k.transformedCachedItem)!=null?te:[],l.path,l.extension);R!=null&&e(k.from,k.to,Re.Decoration.widget({widget:R,side:1}))}}}),this.decorations=this.decorator.createDeco(t))}update(t){this.regxPattern!==""&&(t.docChanged||t.viewportChanged)&&(this.decorations=this.decorator?this.decorator.updateDeco(t,this.decorations):this.decorations)}},{decorations:t=>t.decorations}),ia=(t,e,n,r,i)=>{var a,s;let o=e;for(let l=0;l<n.length;l++){let p=n[l],c=p.key;if(t==="heading"&&(c=(0,Ae.stripHeading)((a=p.headerMatch)!=null?a:""),o=o.replace(/^\s+|\s+$/g,"")),!(t==="link"&&p.references.length===1)){if(t==="embed"||t==="link"){o.contains("|")&&(o=o.substring(0,e.search(/\|/)));let f=J(o).toLocaleUpperCase();o=f===""?o:f,c.startsWith("#")&&(c=r+(0,Ae.stripHeading)(c))}if(c===o){let f=(s=p==null?void 0:p.references[0])!=null&&s.resolvedFile?p.references[0].resolvedFile.path.replace(`.${p.references[0].resolvedFile}`,""):o;return(p==null?void 0:p.references.length)>=me.settings.minimumRefCountThreshold?new _r(p.references.length,p.type,p.references[0].realLink,p.key,f,"snw-liveupdate",p.pos.start.line):null}}}return null},_r=class extends Re.WidgetType{constructor(e,n,r,i,o,a,s){super(),this.referenceCount=e,this.referenceType=n,this.realLink=r,this.key=i,this.filePath=o,this.addCssClass=a,this.lineNu=s}toDOM(){return de(this.referenceCount,this.referenceType,this.realLink,this.key,this.filePath,this.addCssClass,this.lineNu)}destroy(){}ignoreEvent(){return!1}};var Kt=require("obsidian");var ge;function yo(t){ge=t}function Cr(t,e){var r;if(e.remainingNestLevel===4||t.hasAttribute("uic")||t.querySelectorAll(".contains-task-list").length>0)return;let n=ge.app.vault.fileMap[e.sourcePath];if(n===void 0)e.addChild(new xr(t));else{if(ge.settings.pluginSupportKanban===!1){let i=ge.app.metadataCache.getFileCache(n);if((r=i==null?void 0:i.frontmatter)!=null&&r["kanban-plugin"])return}e.addChild(new kr(t,e.getSectionInfo(t),n))}}var xr=class extends Kt.MarkdownRenderChild{constructor(e){super(e),this.containerEl=e}onload(){for(let e of Array.from(this.containerEl.querySelectorAll("a.internal-link, span.internal-embed"))){let n=e.dataset.href||e.getAttribute("src"),r=J(n).toLocaleUpperCase(),i=ge.app.metadataCache.getFirstLinkpathDest((0,Kt.parseLinktext)(n).path,"/"),o=ge.snwAPI.references.get(r),a=(o==null?void 0:o.length)||0;if(a<=0||a<ge.settings.minimumRefCountThreshold)continue;let s=e.classList.contains("internal-link")?"link":"embed";if(!i)continue;let l=de(a,s,n,r,i.path,`snw-liveupdate snw-${s}-preview`,1);e.after(l)}}},kr=class extends Kt.MarkdownRenderChild{constructor(e,n,r){super(e),this.containerEl=e,this.sectionInfo=n,this.currentFile=r}onload(){var r,i,o,a,s,l,p,c,f,g,d,v;let e=ge.settings.minimumRefCountThreshold,n=pe(this.currentFile);if(((i=(r=n==null?void 0:n.cacheMetaData)==null?void 0:r.frontmatter)==null?void 0:i["snw-file-exclude"])!==!0&&((a=(o=n==null?void 0:n.cacheMetaData)==null?void 0:o.frontmatter)==null?void 0:a["snw-canvas-exclude-preview"])!==!0&&(n!=null&&n.blocks||n.embeds||n.headings||n.links)){if(ge.settings.enableRenderingBlockIdInMarkdown&&(n!=null&&n.blocks)&&this.sectionInfo){for(let y of n.blocks)if(y.references.length>=e&&y.pos.start.line>=((s=this.sectionInfo)==null?void 0:s.lineStart)&&y.pos.end.line<=((l=this.sectionInfo)==null?void 0:l.lineEnd)){let h=de(y.references.length,"block",y.references[0].realLink,y.key,(f=(c=(p=y.references[0])==null?void 0:p.resolvedFile)==null?void 0:c.path)!=null?f:"","snw-liveupdate",y.pos.start.line),w=this.containerEl.querySelector("p"),_=y.pos.start.line-this.sectionInfo.lineStart;if(w)w.append(h);else{if(w=this.containerEl.querySelector(`li[data-line="${_}"]`),!w)continue;let P=w.querySelector("ul");P?P.before(h):w.append(h)}w&&!w.hasClass("snw-block-preview")&&h.addClass("snw-block-preview")}}if(ge.settings.enableRenderingEmbedsInMarkdown&&(n!=null&&n.embeds)&&this.containerEl.querySelectorAll(".internal-embed:not(.snw-embed-preview)").forEach(y=>{var _,P,u,C;let h=y.getAttribute("src");if(!h)return;let w=J(h[0]==="#"?this.currentFile.path.slice(0,-(this.currentFile.extension.length+1))+h:h)||h;for(let b of(_=n.embeds)!=null?_:[])if(b.references.length>=e&&w.toLocaleUpperCase()===b.key.toLocaleUpperCase()){let T=de(b.references.length,"embed",b.references[0].realLink,b.key.toLocaleUpperCase(),(C=(u=(P=b.references[0])==null?void 0:P.resolvedFile)==null?void 0:u.path)!=null?C:"","snw-liveupdate",b.pos.start.line);T.addClass("snw-embed-preview"),y.after(T);break}}),ge.settings.enableRenderingLinksInMarkdown&&(n!=null&&n.links)&&this.containerEl.querySelectorAll("a.internal-link").forEach(y=>{var _,P,u,C;let h=y.getAttribute("data-href");if(!h)return;let w=J(h[0]==="#"?this.currentFile.path.slice(0,-(this.currentFile.extension.length+1))+h:h)||h;for(let b of(_=n.links)!=null?_:[])if(b.references.length>=Math.max(2,e)&&b.key.toLocaleUpperCase()===w.toLocaleUpperCase()){let T=de(b.references.length,"link",b.references[0].realLink,b.key.toLocaleUpperCase(),(C=(u=(P=b.references[0])==null?void 0:P.resolvedFile)==null?void 0:u.path)!=null?C:"","snw-liveupdate",b.pos.start.line);T.addClass("snw-link-preview"),y.after(T);break}}),ge.settings.enableRenderingHeadersInMarkdown){let y=this.containerEl.querySelector("[data-heading]");if(n!=null&&n.headings&&y){let h=y.getAttribute("data-heading");for(let w of n.headings)if(w.references.length>=e&&w.headerMatch===(h==null?void 0:h.replace(/\[|\]/g,""))){let _=de(w.references.length,"heading",w.references[0].realLink,w.key,(v=(d=(g=w.references[0])==null?void 0:g.resolvedFile)==null?void 0:d.path)!=null?v:"","snw-liveupdate",w.pos.start.line);_.addClass("snw-heading-preview");let P=this.containerEl.querySelector("h1,h2,h3,h4,h5,h6");P&&P.insertAdjacentElement("beforeend",_);break}}}}}};var it=200,Rn=class extends ae.Plugin{constructor(){super(...arguments);this.appName=this.manifest.name;this.appID=this.manifest.id;this.APP_ABBREVIARTION="SNW";this.settings=sn;this.showCountsActive=sn.enableOnStartupDesktop;this.lastSelectedReferenceType="";this.lastSelectedReferenceRealLink="";this.lastSelectedReferenceKey="";this.lastSelectedReferenceFilePath="";this.lastSelectedLineNumber=0;this.snwAPI=new Et(this);this.markdownPostProcessor=null;this.editorExtensions=[];this.commands=new Tt(this)}async onload(){console.log(`loading ${this.appName}`),Sr(this),io(this),lo(this),mo(this),uo(this),co(this),yo(this),ho(this),oo(this),window.snwAPI=this.snwAPI,await this.loadSettings(),this.addSettingTab(new an(this.app,this)),ae.Platform.isMobile||ae.Platform.isMobileApp?this.showCountsActive=this.settings.enableOnStartupMobile:this.showCountsActive=this.settings.enableOnStartupDesktop,this.registerView(Ne,i=>new Mn(i,this));let n=(0,ae.debounce)(()=>{on(),Nn(),Dn(),wr()},3e3,!0),r=(0,ae.debounce)(async(i,o,a)=>{await Lr(i),Vn(i,a),Nn(),Dn(),wr()},1e3,!0);this.registerEvent(this.app.vault.on("rename",n)),this.registerEvent(this.app.vault.on("delete",n)),this.registerEvent(this.app.metadataCache.on("changed",r)),this.app.workspace.registerHoverLinkSource(this.appID,{display:this.appName,defaultMod:!0}),this.snwAPI.settings=this.settings,this.registerEditorExtension(this.editorExtensions),this.app.workspace.on("layout-change",()=>{Nn(),Dn()}),this.toggleStateSNWMarkdownPreview(),this.toggleStateSNWLivePreview(),this.toggleStateSNWGutters(),this.app.workspace.onLayoutReady(async()=>{var i,o;(i=this.app.workspace.getLeavesOfType(Ne))!=null&&i.length||await((o=this.app.workspace.getRightLeaf(!1))==null?void 0:o.setViewState({type:Ne,active:!1})),on()})}async activateView(n,r,i,o,a){this.lastSelectedReferenceType=n,this.lastSelectedReferenceRealLink=r,this.lastSelectedReferenceKey=i,this.lastSelectedReferenceFilePath=o,this.lastSelectedLineNumber=a;let{workspace:s}=this.app,l=null,p=s.getLeavesOfType(Ne);if(p.length>0)l=p[0];else{let c=s.getRightLeaf(!1);await(c==null?void 0:c.setViewState({type:Ne,active:!0}))}l&&s.revealLeaf(l),await this.app.workspace.getLeavesOfType(Ne)[0].view.updateView()}toggleStateSNWMarkdownPreview(){this.settings.displayInlineReferencesMarkdown&&this.showCountsActive&&this.markdownPostProcessor===null?this.markdownPostProcessor=this.registerMarkdownPostProcessor((n,r)=>Cr(n,r),100):(this.markdownPostProcessor?ae.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor):console.log("Markdown post processor is not registered"),this.markdownPostProcessor=null)}toggleStateSNWLivePreview(){let n=this.settings.displayInlineReferencesLivePreview;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("inline-ref",n,vo)}toggleStateSNWGutters(){let n=ae.Platform.isMobile||ae.Platform.isMobileApp?this.settings.displayEmbedReferencesInGutterMobile:this.settings.displayEmbedReferencesInGutter;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("gutter",n,go)}updateCMExtensionState(n,r,i){if(r===!0)this.editorExtensions.push(i),this.editorExtensions[this.editorExtensions.length-1].snwID=n;else for(let o=0;o<this.editorExtensions.length;o++)if(this.editorExtensions[o].snwID===n){this.editorExtensions.splice(o,1);break}this.app.workspace.updateOptions()}async loadSettings(){this.settings=Object.assign({},sn,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}onunload(){console.log(`unloading ${this.appName}`);try{this.markdownPostProcessor?ae.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor):console.log("Markdown post processor is not registered"),this.app.workspace.unregisterHoverLinkSource(this.appID)}catch(n){}}};

/* nosourcemap */